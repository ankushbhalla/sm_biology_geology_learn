var blink={};var msgBoxWidth=550;var sonido_ultimo_id_abierto=0;var loadpagewithajax=false;var allowedSpecialCodes=new Array(37,39,46,8,9);var imgsizearray=[];function mostrarAvisoOffline(){_showAlert(textweb("aviso_offline"))}function getWindowObjectByString(e){var t=window;var i=e.split(".");for(var n=0;n<i.length;n++){t=t[i[n]]}return t}function callOfflinePCParent(e,t){if(!blink.isOfflinePCApp)return;if(!t)t=[];if(blink.appVersion>=3.4){try{var i={task:"js",funcStr:e,args:t};top.postMessage(i,"*")}catch(e){blink.log.error(e)}}else{try{var n=getWindowObjectByString(e);n="parent."+n;n.apply(null,t)}catch(e){blink.log.error(e)}}}function cambiarIdioma(e){url=location.href.replace("#","");if(url.indexOf("blinklang=")!=-1){redireccionar(url.replace(/blinklang=\w\w/,"blinklang="+e))}else{redireccionar(url+(url.indexOf("?")==-1?"?":"&")+"blinklang="+e)}return false}function compararTexto(texto1,texto2,modoMates,permitirTolerancia){if(modoMates){texto1=texto1.replace(new RegExp("[=.]+","g"),"");texto1=texto1.replace(/,/g,".");texto1=texto1.replace(/'/g,".");texto2=texto2.replace(new RegExp("[.=]+","g"),"");texto2=texto2.replace(/,/g,".");texto2=texto2.replace(/'/g,".");if(!isFinite(texto1))return false;if(!isFinite(texto2))return false;return ltrim(clean(texto1),"+")==ltrim(clean(texto2),"+");permitirTolerancia=true;if(!permitirTolerancia)return parseFloat(texto1)==parseFloat(texto2);else{var valor=parseFloat(texto2);var i=10,j=1;while(Math.floor(valor*i)-valor*i!=0&&j<4){i*=10;j++}if(Math.abs(valor*i)<10){i*=10;j++}return Math.abs(valor-eval(texto1))<=1/i*1.0001}}else{return clean(texto1).replace(/[`|´|’]/gi,"'").toLowerCase()==clean(texto2).toLowerCase()}}function verificarVacios(e,t){return blink.theme.verificarVacios(e,t)}function verificarTamanoMinimo(e,t){return blink.theme.verificarTamanoMinimo(e,t)}function isValidURL(e){var t=!!e.match(/^https?:\/\/[0-9a-z\.\-_]+\.[a-z]{2,}/);return t||blink.theme.validarProtocoloExterno&&blink.theme.validarProtocoloExterno(e)}function isValidEmail(e){var t=/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/;if(!t.test(e)){_showAlert(textweb("registro_email_invalido"));return false}return true}function verificarEmail(e){for(var t=0;t<e.length;t++){var i=document.getElementById(e[t]);if(!i)continue;if(!isValidEmail($.trim(i.value))){i.focus();return false}}return true}function verificarSelect(e){for(var t=0;t<e.length;t++){var i=document.getElementById(e[t]);if(!i)continue;if(!i.selectedIndex){_showAlert(textweb("registro_code_campo_vacio"));i.focus();return false}}return true}var keyStr="ABCDEFGHIJKLMNOP"+"QRSTUVWXYZabcdef"+"ghijklmnopqrstuv"+"wxyz0123456789+/"+"=";function encode64(e){e=escape(e);var t="";var i,n,a="";var r,o,s,l="";var c=0;do{i=e.charCodeAt(c++);n=e.charCodeAt(c++);a=e.charCodeAt(c++);r=i>>2;o=(i&3)<<4|n>>4;s=(n&15)<<2|a>>6;l=a&63;if(isNaN(n)){s=l=64}else if(isNaN(a)){l=64}t=t+keyStr.charAt(r)+keyStr.charAt(o)+keyStr.charAt(s)+keyStr.charAt(l);i=n=a="";r=o=s=l=""}while(c<e.length);return t}function decode64(e,t){if(e==undefined||e=="")return"";var i="";var n,a,r="";var o,s,l,c="";var u=0;var d=/[^A-Za-z0-9\+\/\=]/g;if(d.exec(e)){if(t!=true){_showAlert("There were invalid base64 characters in the input text.\n"+"Valid base64 characters are A-Z, a-z, 0-9, '+', '/',and '='\n"+"Expect errors in decoding.")}}e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");do{o=keyStr.indexOf(e.charAt(u++));s=keyStr.indexOf(e.charAt(u++));l=keyStr.indexOf(e.charAt(u++));c=keyStr.indexOf(e.charAt(u++));n=o<<2|s>>4;a=(s&15)<<4|l>>2;r=(l&3)<<6|c;i=i+String.fromCharCode(n);if(l!=64){i=i+String.fromCharCode(a)}if(c!=64){i=i+String.fromCharCode(r)}n=a=r="";o=s=l=c=""}while(u<e.length);return decode_utf8(i)}function getTimeParam(e){var t=0;var i=e.indexOf("t=");if(i!=-1){var n=e.indexOf("&",i+2);if(n==-1){n=e.length}t=e.substr(i+2,n-(i+2))}return t}function calculateTimeParameter(e){var t=0;var i=e.split(/t=/);if(i.length>1&&i[1].trim()!=""){var n=i[1].split(/[m]/i);$seconds=0;if(n.length>1){var a=n[1];if(a.trim()!=""){var r=n[1].split(/[s]/i);var o=!isNaN(n[0])?parseInt(n[0])*60:0;var s=r[0].trim()!=""&&!isNaN(r[0])?parseInt(r[0]):0;seconds=o+s}else{seconds=n[0].trim()!=""&&!isNaN(n[0])?parseInt(n[0])*60:0}}else if(n.length==1){var l=n[0].split(/[s]/i);seconds=l[0].trim()!=""&&!isNaN(l[0])?parseInt(l[0]):0}t=seconds}return t}function borrarMultimedia(e){closeMsgBox();var t=$("#"+prefijoSeleccionMultimedia+"_img1v").val();if(e==""){if(idCursoSeleccionMultimedia==0){$("[name=perfil_img1v]").val("-1");$("#perfil_img1").attr("src","../images/i/foto_registro.gif")}else{cargarImagen("",WEB+SIN_IMAGEN_CURSO,true);getAJAX("/LMS/ajax.php?op=course.updatecourseimage&idcurso="+idCursoSeleccionMultimedia+"&img=",standardAJAXFunc,false)}return}else{writeImgPlayer(prefijoSeleccionMultimedia,"../images/multimedia.jpg",$("#"+prefijoSeleccionMultimedia+"_imagezoom").val(),false,$("[name="+prefijoSeleccionMultimedia+"_img1v_title]").val());$("[name="+e+"_img1v]").val("");$("#slide_miniatura_"+secuencia[activeSlide]).attr("src","../images/multimedia.jpg");marcarHaCambiado(getIDSlideFromPrefijo(prefijoSeleccionMultimedia))}}function borrarImagenIndex(e){closeMsgBox();getAJAX("/LMS/ajax.php?op=course.deletecourseimageindex&idcurso="+idCursoSeleccionMultimedia+"&img=",standardAJAXFunc,false)}function setBackgroundImage(e,t){blink.theme.setBackgroundImage(e,t)}function _oldsetBackgroundImage(e,t){if(e!=""){$("#"+t+"contenidos_curso").prepend('<div class="backimage"><img src="'+e+'" style="z-index:-1;"></div>')}else{$("#"+t+"contenidos_curso div.backimage").remove()}}function updateLabelFile(e,t){if(e!=""){var i=e.substring(e.lastIndexOf("/")+1);$("#"+t).html(i)}}function showSlideFromID(e){var t=secuencia.findIndex(e);if(t!=-1)showSlide(t);return false}function generaThumbSlide(e,t,i,n){return blink.theme.generaThumbSlide(e,t,i,n)}function generaThumbActivity(e,t,i,n){return blink.theme.generaThumbActivity(e,t,i,n)}function votar(e,t){getAJAX("/LMS/ajax.php?op=votar&idcurso="+e+"&valor="+t,null,false,"votacion_ajax_"+e)}function mostrarTooltip(e){toggleLayer(e)}function toggleVisibility(e){var t=document.getElementById(e).style.visibility;if(t=="visible")document.getElementById(e).style.visibility="hidden";else document.getElementById(e).style.visibility="visible"}function toggleLayer(e){var t,i;if(document.getElementById)t=document.getElementById(e);else if(document.all)t=document.all[e];else if(document.layers)t=document.layers[e];i=t.style;if(i.display==""&&t.offsetWidth!=undefined&&t.offsetHeight!=undefined)i.display=t.offsetWidth!=0&&t.offsetHeight!=0?"block":"none";i.display=i.display==""||i.display=="block"?"none":"block"}try{YAHOO.namespace("example.container")}catch(e){}var usingPasswd=false;function getWaitingHTML(){return blink.theme.getWaitingHTML()}function getErrorHTML(){return textweb("error_general_AJAX")}function getMsgBoxFromURL(e,t,i){if(i==null)i="responsecontainer";if(e.startsWith("text:")){setAndExecute(i,decode64(e.substring(5),true));return}e=addParamUrl(e,"theme_msgbox",BLINK_THEME);blink.ajax(e,function(e){if(!e||e.startsWith("ERROR")){closeMsgBox();blink.rest.connection(function(e){if(e==0){_showAlert(textweb("tablettxt_require_connection"))}else{_showAlert(textweb("error_general_AJAX"))}})}else{if(blink.isIE7orlower)$("#dlgAJAX").hide().show()}},{data:t},{responseContainer:"#"+i})}var respAJAX=null;var pingTimer=null;var pingTimeout=1;function setPingTimer(e){pingTimeout=e;initPingTimer()}function initPingTimer(){pingTimer=setTimeout("ping()",pingTimeout*1e3)}function resetPingTimer(){if(pingTimer){clearTimeout(pingTimer);initPingTimer()}}function ping(e){if(blink.user.esAnonimo()||modoVisualizacionLabel==="standalone"){return false}getAJAX("/LMS/ajax.php?op=session.ping&idcurso="+idcurso+"&idclase="+idclase,function(e){})}function changeActiveDiv(e,t,i){$("#solapas > li").removeClass("on");$("#solapas > li:eq("+i+")").addClass("on");if(document.getElementById(t+visibleDiv))document.getElementById(t+visibleDiv).style.display="none";visibleDiv=i;if(document.getElementById(t+visibleDiv))document.getElementById(t+visibleDiv).style.display="block";$("#"+t+visibleDiv+" .campoonfocustab").focus();return false}var visibleDiv=0;function initializeVisibleDiv(e){visibleDiv=e}function getActiveDiv(){return visibleDiv}function buttonPlayVideoPressed(e,t,i){if(i){blink.theme.rest.video(t,e,i)}else{blink.rest.video(t)}}function habilitarBoton(e,t){if(t)$("#"+e).removeClass("disabled").find("a").each(function(){$(this).attr("onclick",$(this).attr("onclick_old"));$(this).attr("onclick2","")});else $("#"+e).addClass("disabled").find("a").each(function(){$(this).attr("onclick2",$(this).attr("onclick_old"));$(this).attr("onclick","return false;")})}function habilitarBoton2(e,t){blink.theme.habilitarBoton2(e,t)}function conmutarEstadoBoton(e,t){blink.theme.conmutarEstadoBoton(e,t)}var MODO_STANDALONE=false;function dlgCreateNewEditCourse(e){showMsgBox("","/LMS/msgbox.php?op=course.neweditcourse"+(e?"&idcurso="+e:""),"550")}function msgboxCopyOldCourseToCurrentYear(e){showMsgBox("","/LMS/msgbox.php?op=course.copyoldcoursetocurrentyear&idcurso="+e,"550")}function executeCopyOldCourseToCurrentYear(e){getAJAX("/LMS/ajax.php?op=course.executecopyoldcoursetocurrentyear&idcurso="+e,standardAJAX)}function dlgCreateNewLibroDemo(e){showMsgBox("","/LMS/msgbox.php?op=course.newLibroDemo&idcentro="+e,"550")}function actualizarNumeroMensajesNuevos(e){if(e>0)$("#header_nummensajes").show().html(e)}var numUsuariosVentanaClase=0;var hayCambiosVentanaClase=false;var notIDs="";var autocompleteWithTeachers=false;function definirAutocompleteEditGroup(){$("#nombre").blinkcomplete({minLength:2,source:function(e,t){var i="/LMS/ajax.php?";i+=autocompleteWithTeachers?"op=search.searchteacher":"op=search.searchstudent&esInfantil="+esInfantil;blink.getJSON(i,t,{data:{term:e.term,notIDs:notIDs}})},getItemLine1:function(e){return e.label},open:function(e,t){$(".ui-autocomplete").css("z-index",4200)},select:function(e,t){$("#nombre").val(t.item.nombre);$("#apellidos").val(t.item.apellidos);$("#email").val(t.item.email);$("#idusuariohidden").val(t.item.id);notIDs+=","+t.item.id;definirAutocompleteEditGroup();onEditGroupPressEnter();return false}})}function addUsuario(e){blink.theme.addUsuario(e)}function removeUsuarioExistente(e,t){if(notIDs.length){var i=notIDs;var n=notIDs.indexOf(e);if(n!=-1){var a=""+e;i=notIDs.substr(0,n)+notIDs.substr(n+a.length+1)}notIDs=i}definirAutocompleteEditGroup();removeUsuario(t)}function removeUsuario(e){blink.theme.removeUsuario(e)}function editUsuario(e,t){blink.theme.editUsuario(e,t)}function onEditGroupPressEnter(){if($("#anadir:visible").size()){$(".anadir").click();$("#nombre").focus()}if($(".confirmar:visible").size()){$(".confirmar").click();$("#nombre").focus();return}}function updateUsuario(){blink.theme.updateUsuario()}function updateHandlersVentanaClase(){$(".alumno").each(function(e){this.id="fila"+e});$(".tabla_alumno_ref").each(function(e){$(this).click(function(){editUsuario(e,"nombre")})});$(".tabla_alumno_nombre").each(function(e){$(this).click(function(){editUsuario(e,"nombre")})});$(".tabla_alumno_apellidos").each(function(e){$(this).click(function(){editUsuario(e,"apellidos")})});$(".tabla_alumno_email").each(function(e){$(this).click(function(){editUsuario(e,"email")})});$(".tabla_alumno_email2").each(function(e){$(this).click(function(){editUsuario(e,"email2")})})}function checkCambiosVentanaClase(){if(hayCambiosVentanaClase)return confirm(textweb("new_edit_group_17"));return true}function getIDsAlumnosSeleccionados(){return blink.theme.getIDsAlumnosSeleccionados()}function getIDsProfesoresSeleccionados(){return blink.theme.getIDsProfesoresSeleccionados()}function onCreateEditGroup(e,t,i){if(modoUsuarios==2&&esInfantil)return;if(!modoUsuarios){t=1}if(!t){t=modoUsuarios}if(i)prf="1";else prf="0";showMsgBox("","/LMS/msgbox.php?op=group.neweditgroup"+(e?"&idgrupo="+e:"")+"&modoUsuarios="+t+"&prf="+prf,550,null,true)}function onMoveGroup(e){showMsgBox("","/LMS/msgbox.php?op=group.movegroup"+(e?"&idgrupo="+e:""),550,null,true)}function onCreateEditClaustro(e){showMsgBox("","/LMS/msgbox.php?op=group.neweditgroup"+(e?"&idgrupo="+e:"")+"&modoUsuarios=3",550,null,false)}function onCreateEditStaff(e){showMsgBox("","/LMS/msgbox.php?op=group.neweditgroup&modoUsuarios=4&idcentro="+e,550,null,false)}function onJoinCommunity(){showMsgBox("","/LMS/msgbox.php?op=group.joincommunity","550")}function onSendHomework(e,t){if(modoUsuarios==1&&(typeof modoVistaClase=="undefined"||!modoVistaClase||modoVistaClase=="clase")){ids=getIDsAlumnosSeleccionados();showMsgBox("","/LMS/msgbox.php?op=homework.preparardeberes&idcurso="+e+"&idgrupo="+t+(window.lastColorFilterSelected?"&ideje="+window.lastColorFilterSelected:"")+(ids.length==0?"":"&idalumnos="+ids.join(",")),550)}}function deleteHomework(e,t){if(confirm(textweb("js_borrar_nota_deberes"))){getAJAX("/LMS/ajax.php?op=homework.deletehomework&idhomework="+e+"&idgrupo="+t,standardAJAX)}}function openHomeworkEditDateMsgBox(e){showMsgBox("","/LMS/msgbox.php?op=homework.homeworkEditDateDeadLine&id="+e,450)}function onMiClaseSendMessage(){idsProfs=getIDsProfesoresSeleccionados();if(idsProfs.length==0)ids=getIDsAlumnosSeleccionados();else ids=idsProfs;var e="/LMS/msgbox.php?op=user.enviarmensaje&idgrupo="+idgrupo+"&modoUsuarios="+modoUsuarios+(idsProfs.length>0?"&tipo_dest=2":"");if(ids.length!=0)e+="&idusers="+ids.join(",");showMsgBox("",e,550)}function onMensajesSendMessage(e,t){var i="/LMS/msgbox.php?op=user.enviarmensaje&idusers="+e+"&idgrupo="+t+"&modoUsuarios="+modoUsuarios;showMsgBox("",i,550)}function onMessagesSendMassive(){var e="/LMS/msgbox.php?op=user.enviarmensaje&options=massive";showMsgBox("",e,550)}function onMiClaseInfantilWriteInfoStudent(e){var t="/LMS/msgbox.php?op=user.writeinfostudent&idgrupo="+idgrupo+"&idcurso="+idcurso+"&idalumno="+e;showMsgBox("",t,550)}function onMiClaustroSendMessage(){blink.theme.onMiClaustroSendMessage()}function enviarMensaje(e,t,i){if(!e||e==0){_showAlert(textweb("diagnostico_alumno_23"));return}if(t!=undefined)idcurso=t;showMsgBox("","/LMS/msgbox.php?op=user.enviarmensaje&idcurso="+idcurso,550,"&idusers="+e+(i?"&dest="+i:""))}function onDeleteGroup(e,t){if(modoUsuarios==1||modoUsuarios==3){texto=t&&t==6?textweb("js_borrar_comunidad"):textweb("js_borrar_grupo");if(!confirm(texto))return;if(t&&t==6){getAJAX("/LMS/ajax.php?op=group.deletegroup&idgrupo="+e,function(e){if(e.startsWith("GO")){redireccionar(e.substr(3),false)}})}else{getAJAX("/LMS/ajax.php?op=group.deletegroup&idgrupo="+e,standardAJAX)}}}function onDeleteStudents(e){if(!confirm(textweb("js_borrar_alumnos")))return;ids=getIDsAlumnosSeleccionados();getAJAX("/LMS/ajax.php?op=group.deletestudentsfromgroup&idgrupo="+e+"&idalumnos="+ids.join(","),standardAJAX)}function loadColorFilter(e,t){seleccionarMiClase(""+e.ids,t);var i=e.m<.33?"Reforzar":"Potenciar";$('<div class="color_selector"><div class="color '+t+'"></div><div class="color_label">'+i+" <b>"+e.n+"</b></div>").click(function(){window.lastColorFilterSelected=e.e+1;$(".un_alunmo_clickbase").removeClass("un_alunmo_click").addClass("un_alunmo_noclick");seleccionarMiClase(""+e.ids)}).appendTo("#color_filters")}function marcarResultadoFiltro(){$("#resultadoFiltro").html(textweb("mi_clase_filtro_1")+": "+$(".un_alunmo_click").size()+" "+textweb("mi_clase_filtro_2"));$("#resultadoFiltro").fadeIn()}function onMiClaseDesasignarContenido(e){var t=window.event;t&&t.stopPropagation();if(!confirm(textweb("js_desasignar_contenido")))return;getAJAX("/LMS/ajax.php?op=group.removecontentfromgroup&idgrupo="+idgrupo+"&idcurso="+e,standardAJAX)}function onMiClaseAsignarContenido(){showMsgBox("","/LMS/msgbox.php?op=user.assigncourse&idgroup="+idgrupo,550)}function seleccionarMiClase(e,t){blink.theme.seleccionarMiClase(e,t)}var modoUsuarios=1;var modoClaseInicial=true;function cambiarModoPadresAlumnos(e,t){blink.theme.cambiarModoPadresAlumnos(e,t)}function onIngresarCodigoClase(e,t,i){var n="";if(e&&e!=""){n+="&cod="+e}if(t){n+="&idcurso="+t}if(i){n+="&soloClase="+true}showMsgBox("","/LMS/msgbox.php?op=group.ingresarcodigoclase"+n,550,null)}function onGrupoCambiarCerrado(t){getAJAX("/LMS/ajax.php?op=group.cambiarcerradogrupo&idgrupo="+t,function(e){if(e.startsWith("ERROR"))standardAJAX(e);else{$("#codgrupo"+t).removeClass("tipo_acceso_grupo_0 tipo_acceso_grupo_1").addClass("tipo_acceso_grupo_"+e.substring(2));if(blink.isApp)blink.rest.updateofflineWithoutReload()}})}function onCursoCambiarTipoAcceso(e){blink.theme.onCursoCambiarTipoAcceso(e)}function onCursoCambiarTipoAccesoCurso(e){getAJAX("/LMS/ajax.php?op=course.cambiartipoaccesocurso&idcurso="+e,function(e){if(e.startsWith("ERROR"))standardAJAX(e);else{if($("#access_control").hasClass("tipo_acceso_amarillo_0"))$("#access_control").removeClass("tipo_acceso_amarillo_0").addClass("tipo_acceso_amarillo_3");else $("#access_control").removeClass("tipo_acceso_amarillo_3").addClass("tipo_acceso_amarillo_0")}})}function onCursoCambiarNovedad(r){getAJAX("/LMS/ajax.php?op=course.cambiarnovedad&idcurso="+r,function(e){var t;var i=blink.theme.isAdaptative();t=$("#novedad"+r);if(e.startsWith("ERROR")){standardAJAX(e);if(i){var n=t.prop("checked");var a=n?false:true;t.prop("checked",a)}}else{if(!i)toggleClasses("#novedad"+r,".cursoEnNovedad",".cursoNoNovedad")}})}function onCursoCambiarBloqueado(e,t,i){blink.theme.onCursoCambiarBloqueado(e,t,i)}function onCursoCambiarOnline(e){blink.theme.onCursoCambiarOnline(e)}function onCursoCambiarBloqueadoTema(e,t,i){blink.theme.onCursoCambiarBloqueadoTema(e,t,i)}function onCursoCambiarOnlineTema(e,t,i){blink.theme.onCursoCambiarOnlineTema(e,t,i)}function onCursoNotificarCambios(){if(confirm(textweb("js_confirmar_notificar_cambios_curso"))){getAJAX("/LMS/ajax.php?op=course.notificarcambioscurso&idcurso="+idcurso,standardAJAX)}}function saveComentario(e,t,i,n,a){blink.theme.saveComentario(e,t,i,n,a)}function onFinishSavingComentario(e){if(e!="OK"){_showAlert(textweb("js_error_guardar_comentario"));return}_showAlert(textweb("js_ok_guardar_comentario"))}function onFinishSavingPositivos(e){}function esconderColumnasDiagnostico(e){blink.theme.esconderColumnasDiagnostico(e)}function irSubtema(e,t,i,n,a,r){blink.theme.irSubtema(e,t,i,n,a,r)}var camposTextoCalificacionesActivados=false;var cerrarSinVerificar=false;function onCalificacionesBeforeUnload(){if(!cerrarSinVerificar){if($(".input_calificaciones.changed").size()>0)return""}}function onCalificacionesEditarNotas(){blink.theme.onCalificacionesEditarNotas()}function cambiarEstadoBotonNotas(){blink.theme.cambiarEstadoBotonNotas()}function desactivarCamposTextoCalificaciones(){blink.theme.desactivarCamposTextoCalificaciones()}function activarCamposTextoCalificaciones(){blink.theme.activarCamposTextoCalificaciones()}function isScrolledIntoView(e){var t=$(window).scrollTop(),i=t+$(window).height(),n=$(e).offset().top,a=n+$(e).height();return n+(a-n)/2>=t&&n+(a-n)/2<=i}function obtenerArrayActualizacionNotas(e){return blink.theme.obtenerArrayActualizacionNotas(e)}function hanCambiadoNotas(){return $(".input_calificaciones.changed").length>0}function guardarNotasCambiadas(){a=obtenerArrayActualizacionNotas();if(a=="[]"){desactivarCamposTextoCalificaciones();return}getAJAX("/LMS/ajax.php?op=updategrades&json="+encodeURIComponent(a)+"&"+window.seleccion,function(e){_showAlert(e)})}function goRegister(){redireccionar("/portal/contactus.php?os=1")}function onLoadDiagnostico(){blink.theme.onLoadDiagnostico()}function f_td_progreso_1(e){var t=$(e).attr("codtabla");var i=$("#tabla_diagnostico th[codtabla='"+t+"']").addClass("on").attr("title");$("#tabla_diagnostico td[codtabla='"+t+"']").addClass("on");$("#titular_tabla").html(i)}function f_td_progreso_2(e){var t=$(e).attr("codtabla");$("#tabla_diagnostico th[codtabla='"+t+"']").removeClass("on");$("#tabla_diagnostico td[codtabla='"+t+"']").removeClass("on");$("#titular_tabla").html("")}function irListaCursos(){parent.location.href="/"}function changeStatus(){getAJAX("/LMS/ajax.php?op=utils.changestatus",function(e){if(e.startsWith("OK")){online=e.substring(2)=="1";$("#status_line").html('<div class="'+(online?"on_line":"off_line")+'">'+(online?textweb("header_8"):textweb("header_9"))+"</div>");if(window.idUsuarioMiClase){$("input[name='seleccionado_1'][value='"+window.idUsuarioMiClase+"']").parents(".un_alumno").each(function(){if(modoUsuarios==1){if(online){$(this).find(".ficha_alumno .offline").addClass("online").removeClass("offline")}else{$(this).find(".ficha_alumno .online").addClass("offline").removeClass("online")}}else{if(online){$(this).find(".ficha_padre .offline").addClass("online").removeClass("offline")}else{$(this).find(".ficha_padre .online").addClass("offline").removeClass("online")}}})}}},false)}function setSessionAttribute(e,t){if(e!="PIZARRA"&&e!="SONIDO")getAJAX("/LMS/ajax.php?op=session.setSessionAttribute&SESSION_ATTRIBUTE="+e+"&SESSION_ATTRIBUTE_VALUE="+t,function(){})}function searchPhoto(e,t){blink.theme.searchPhoto(e,t)}function msgIncompatibleDevice(){_showAlert(textweb("device_incompatible"))}function goEditarCurso(e){var t=false;getAJAX("/LMS/ajax.php?op=content.checkIncompatibleDevice&idcontent="+e+"&content_type=Curso",function(e){if(!e.startsWith("OK")){msgIncompatibleDevice();t=true}},false,undefined,undefined,true);if(t)return;if(blink.isAndroid)goVerCurso(e);else redireccionar("/coursePlayer/curso2.php?editar=1&idcurso="+e)}function goVerCurso(e,t){var i=false;getAJAX("/LMS/ajax.php?op=content.checkIncompatibleDevice&idcontent="+e+"&content_type=Curso",function(e){if(!e.startsWith("OK")){msgIncompatibleDevice();i=true}},false,undefined,undefined,true);if(i)return;if(t)showMsgBox("","/LMS/msgbox.php?op=user.askteachertoactivate&idcurso="+e,msgBoxWidth);else redireccionar("/coursePlayer/curso2.php?idcurso="+e)}function goEnrollCurso(e){if(blink.isApp){getAJAX("/LMS/ajax.php?op=course.enroll&idcurso="+e,standardAJAX)}else{redireccionar("/coursePlayer/curso2.php?idcurso="+e+"&enroll=true")}}function goBusqueda(e,t,i,n,a,r,o){borrarValoresDefecto();if(!i)i=1;if(!e)e="buscador";var s=$("#"+e).attr("value")||"";var l="";var c=$("div[id^='fg']");if(a)l+="&o="+a;if(r)l+="&idc="+r;if($("#selfiltrogrupo1")!=undefined&&$("#selfiltrogrupo1").attr("value")!=undefined&&$("#selfiltrogrupo1").attr("value")!="undefined")l+="&fg1="+$("#selfiltrogrupo1").attr("value");if($("#selfiltrogrupo2")!=undefined&&$("#selfiltrogrupo2").attr("value")!=undefined&&$("#selfiltrogrupo2").attr("value")!="undefined")l+="&fg2="+$("#selfiltrogrupo2").attr("value");if($("#selfiltrogrupo3")!=undefined&&$("#selfiltrogrupo3").attr("value")!=undefined&&$("#selfiltrogrupo3").attr("value")!="undefined")l+="&fg3="+$("#selfiltrogrupo3").attr("value");if($("#selfiltrogrupo4")!=undefined&&$("#selfiltrogrupo4").attr("value")!=undefined&&$("#selfiltrogrupo4").attr("value")!="undefined")l+="&fg4="+$("#selfiltrogrupo4").attr("value");if(c.length!==0){c.map(function(e,t){if($(t)!=undefined&&$(t).length){var i=$(t).find(".checked");var n="";if(i.length>0){i.map(function(e,t){if(!$(t).find("input").data("supracat")){n+=(n!=""?"%2C":"")+$(t).find("input").attr("value")}});l+="&"+$(t).attr("id")+"="+n}}})}var u="/LMS/busqueda.php";if(o){u="/LMS/index.php"}if($("#popup")!=undefined&&$("#popup").attr("value")!=undefined&&$("#popup").attr("value")!="undefined")l+="&popup="+$("#popup").attr("value");if(t=="res"){redireccionar(u+"?busqueda="+encodeURIComponent(s)+"&resources=1"+(n?"&u="+n:"")+"&m="+i+l)}else{redireccionar(u+"?busqueda="+encodeURIComponent(s)+(true||t=="cat"?"&catalog=1":"")+(n?"&u="+n:"")+"&m="+i+l)}}function goBusquedaMisCursos(e,t){borrarValoresDefecto();if(!e)e="buscador";var i=$("#"+e).attr("value");redireccionar("/LMS/teachers.php?as=mycourses&busqueda="+encodeURIComponent(i)+"&tipo="+t)}function goBusquedaMisCentros(e,t){borrarValoresDefecto();if(!t)t="buscador";var i=$("#"+t).attr("value");redireccionar("/LMS/estadisticas2.php?idcurso="+encodeURIComponent(e)+"&busqueda="+encodeURIComponent(i))}function goBusquedaMisCursosAlumno(e){if(!e)e="buscador";var t=$("#"+e).attr("value");redireccionar("/LMS/students.php?busqueda="+encodeURIComponent(t))}function goBusquedaMisMensajes(e,t,i){if(window.offline){mostrarAvisoOffline();return}borrarValoresDefecto();if(!e)e="buscador_mensajes";if(!i)i="0";var n=$("#"+e).attr("value");redireccionar("/LMS/mensajes.php?busqueda="+encodeURIComponent(n)+"&fm="+i+"&g="+t)}function goBusquedaActividadesCurso(e,t){borrarValoresDefecto();idc=idcurso!=undefined?idcurso:"";var i=$("#"+e).attr("value");redireccionar("/coursePlayer/curso2.php?idcurso="+idc+(t=="1"?"&editar="+t:"")+($.trim(i)!=""?"&q="+encodeURIComponent(i):""))}function borrarCursoConPermiso(e,t,i,n,a){blink.theme.borrarCursoConPermiso(e,t,i,n,a)}function desasignarCursoConPermiso(e,t,i){blink.theme.desasignarCursoConPermiso(e,t,i)}function onMisCursosSendMessage(e){showMsgBox("","/LMS/msgbox.php?op=user.enviarmensaje&idcurso="+e,550)}function onMisCursosAsignarCurso(e){showMsgBox("","/LMS/msgbox.php?op=group.assigngroup&idcurso="+e,550)}function onMisCursosGenerarCodigo(e){showMsgBox("","/LMS/msgbox.php?op=credit.generatecode"+(e!=undefined&&e!=""?"&idcurso="+e:""),555)}function onMisCursosImportarCodigo(e){showMsgBox("","/LMS/msgbox.php?op=credit.importcode&idcurso="+e,555)}function onMisCursosFiltrar(e){if(e=="filtro_creados")redireccionar("/LMS/teachers.php?tipo=1");else if(e=="filtro_todos")redireccionar("/LMS/teachers.php?tipo=0");else redireccionar("/LMS/teachers.php?tipo=2");return}function onMisCursosCambiarEstadoOnline(e){blink.theme.onMisCursosCambiarEstadoOnline(e)}function onMisCursosCambiarDestacado(e){blink.theme.onMisCursosCambiarDestacado(e)}function onMisCursosCambiarEnCatalogo(e){blink.theme.onMisCursosCambiarEnCatalogo(e)}function onMisCursosEditarColaboradores(e){showMsgBox("","/LMS/msgbox.php?op=course.neweditcolaborators&idcurso="+e,550)}function onMisCursosFileSize(e){showMsgBox("","/LMS/msgbox.php?op=files.filesize&idcurso="+e,550)}function duplicarCurso(e){showMsgBox("","/LMS/msgbox.php?op=course.showduplicatecourse&idcurso="+e,550)}function onMisCursosCargaLicencia(e,t){askCredit(e,t)}function askCredit(e,t){var i="";if(e&&e!="")i="&cod="+e;if(typeof t!=="undefined"&&t!="")i+="&idalumno="+t;showMsgBox("","/LMS/msgbox.php?typemsg=musthavecredit&typeservice=36"+i,"550")}function getTipoCodigo(e){return e.match(/^cl/i)&&e.length==10?"clase":"libro"}function checkCodigoClaseLibro(e,t){var i="";var n=false;e=$.trim(e);i=getTipoCodigo(e);if(i=="clase"&&t=="cursos"){if(confirm(textweb("js_confirmar_codigo_clase"))){closeMsgBox();onIngresarCodigoClase(e);return false}else n=true}else if(i=="libro"&&t==="clases"){if(confirm(textweb("js_confirmar_codigo_libro"))){closeMsgBox();onMisCursosCargaLicencia(e);return false}else n=true}if(n){closeMsgBox();return false}return true}function onMensajesEnviarMensaje(e,t,i){blink.theme.onMensajesEnviarMensaje(e,t,i)}function onMensajesEliminarMensaje(e){var t="/LMS/ajax.php?op=message.deletemessage&idmsg=";blink.theme.onQuitarMensaje(e,t)}function onMensajesOcultarMensaje(e){var t="/LMS/ajax.php?op=message.hidemessage&idmsg=";blink.theme.onQuitarMensaje(e,t)}function imprimirClase(e,t,i){showMask();$('<div id="busyDIV">'+textweb("pdf_creating")+"</div>").prependTo(document.body).center();var n="/coursePlayer/imprimir2.php?idcurso="+e+"&idclase="+t;if(i&&i!="")n+="&numSec="+i;getAJAX(n,function(e){$("#busyDIV").remove();hideMask();standardAJAXFunc(e);formatPrintScreen()})}function newPrintActivity(e,t){if(!e)e=blink.getReqParam(location.href,"idcurso");if(!t)t=blink.getReqParam(location.href,"idclase");var i="/coursePlayer/imprimir2.php?puppeteer=true&idcurso="+e+"&idclase="+t;var n=blink.getReqParam(location.href,"idalumno");if(n)i+="&idalumno="+n;i+="&continuo=true";var a='<div class="loader"><div class="inner"></div></div><div id="main"><div class="container" ><div class="sphere"></div><div class="sphere"></div><div class="sphere"></div><div class="sphere"></div><div class="sphere"></div><div class="sphere"></div></div></div>';var r='var xhr=window.XMLHttpRequest?new XMLHttpRequest:window.ActiveXObject?new ActiveXObject("Microsoft.XMLHTTP"):null;xhr&&(xhr.open("GET","'+i+'"),xhr.onreadystatechange=function(){if(4==xhr.readyState){var e=xhr.responseText;if(e&&"GO "==e.substr(0,3)){location=e.substr(3)}else alert("error")}},xhr.send());';var o=window.open("about:blank","_blank");var s='<link rel="stylesheet" type="text/css" href="/themes/responsive/assets/css/blink/00.blink.css">';o.document.write(s+a+"<script>"+r+"<\/script>")}function printURL(e){var t="/LMS/ajax.php?op=printServer.printURL&url="+encodeURIComponent(e);var i='<h3 id="divBUSY" align="center" style="\t\t\t\t\tposition: absolute;\t\t\t\t\tpadding: 10px 30px 10px 10px;\t\t\t\t\tborder-radius: 20px;\t\t\t\t\tz-index: 10000;\t\t\t\t\tbackground-image: url(https://www.blinklearning.com/images/loader.gif);\t\t\t\t\tbackground-position: 95% center;\t\t\t\t\tbackground-repeat: no-repeat;">'+textweb("pdf_creating")+"</h3>";var n='var xhr=window.XMLHttpRequest?new XMLHttpRequest:window.ActiveXObject?new ActiveXObject("Microsoft.XMLHTTP"):null;xhr&&(xhr.open("GET","'+t+'"),xhr.onreadystatechange=function(){if(4==xhr.readyState){var e=xhr.responseText;if(e&&"GO "==e.substr(0,3)){location=e.substr(3)}else alert("error")}},xhr.send());';var a=window.open("about:blank","_blank");a.document.write(i+"<script>"+n+"<\/script>")}function formatPrintScreen(){}function onCursoInvitar(e){showMsgBox("","/LMS/msgbox.php?op=user.enviarinvitacion&idcurso="+e,550)}function imprimirTemas(){blink.theme.imprimirTemas()}var oMenu=null;function onIniciarChat(e){return;if(oMenu!=null){oMenu.destroy()}oMenu=new YAHOO.widget.Menu("basicmenu",{zindex:3,x:YAHOO.util.Dom.getX("botonChat"+e),y:YAHOO.util.Dom.getY("botonChat"+e)+40});oMenu.clearContent();oMenu.addItems([{text:"Yahoo! Mail",url:"http://mail.yahoo.com"},{text:"Yahoo! Address Book",url:"http://addressbook.yahoo.com"},{text:"Yahoo! Calendar",url:"http://calendar.yahoo.com"},{text:"Yahoo! Notepad",url:"http://notepad.yahoo.com"}]);oMenu.render(document.body);oMenu.show()}function showOlvidoContrasena(e){$("#olvidaste").val($("#email").val());$("#labelolvidocontrasena").hide();$("#labelolvidocontrasena_init").show();$("#olvidaste_contrasena").toggle();if(e){var t=$("#popup").offset();t.left+=320;t.top+=180}else{var t=$("#label_olvido").offset();t.left-=382;t.top-=20}$("#olvidaste_contrasena").offset(t)}function onOlvidoContrasena(e){return blink.theme.onOlvidoContrasena(e)}function showAccesoClase(){$("#labelaccesoclase").hide();$("#labelaccesoclase_init").show();toggleLayer("acceso_clase")}function onAccesoClase(e){$("#botonaccesoclase").css("cursor","wait");$("#labelaccesoclase_init").hide();$("#labelaccesoclase").show();getAJAX("/LMS/ajax.php?op=group.accesoclase&codigo="+encodeURIComponent(e),function(e){if(e.startsWith("ERROR")){$("#labelaccesoclase").html('<span style="color:#cc3333";>'+e.substring(5)+"</span>");$("#botonaccesoclase").css("cursor","default")}else{redireccionar(e.substring(2))}});return false}var factorpixelcanvas=1;var _guardarPizarra=true;function getIndiceStoreDrawing(){if(window.secuencia!=undefined&&window.secuencia.length>0)return blink.activity.getFirstSlideIndex(window.activeSlide);return 0}function getCanvas(){var e=$("#canvas"+getIndiceStoreDrawing()).get(0);if(e&&e.getContext)return e.getContext("2d")}function clearCanvas(){var e=$("#canvas"+getIndiceStoreDrawing()).get(0);if(e&&e.getContext){ctx=e.getContext("2d");ctx.clearRect(0,0,$(e).width(),$(e).height())}}function drawLine(e,t,i,n,a,r,o){if(!e)return;var s=o;var l=r==2?.2:1;var c=5;if(r==2)c=15;else if(r==4)c=10;c=c*factorpixelcanvas;e.strokeStyle=s;e.globalAlpha=l;e.lineWidth=c;e.lineCap=r==2?"butt":"round";e.beginPath();e.moveTo(t*factorpixelcanvas,i*factorpixelcanvas);e.lineTo(n*factorpixelcanvas,a*factorpixelcanvas);e.stroke()}var lastx=0,lasty=0;var drawing=false;var erasing=false;var numline=0;var lineax=new Array;var lineay=new Array;var tipolinea=new Array;var colorlinea=new Array;var notesArray=new Array;var offsetcanvas;function updateActiveCanvas(e){if(e)elem=e.target;else elem=document.getElementById("canvasdiv"+getIndiceStoreDrawing());offsetcanvas=$(elem).offset()}function startDraw(e){if(herramientaPizarra!=blink.tools.NOTE){blink.tools.closeNotesOnEvent(e)}if(herramientaPizarra==0)return;updateActiveCanvas(e);pos=getCoordinates(e);lastx=pos.x;lasty=pos.y;id=getIndiceStoreDrawing();if(lineax[id]==undefined)lineax[id]=new Array;if(lineay[id]==undefined)lineay[id]=new Array;if(tipolinea[id]==undefined)tipolinea[id]=new Array;if(colorlinea[id]==undefined)colorlinea[id]=new Array;if(notesArray[id]==undefined)notesArray[id]=new Array;if(herramientaPizarra!=blink.tools.NOTE)drawing=true;if(herramientaPizarra==blink.tools.ERASER)erasing=true;if(blink.isAndroid)e.preventDefault();e.stopImmediatePropagation();return false}function stopDraw(e){if($(e.target).closest(".nota").size()==0)e.stopImmediatePropagation();if(herramientaPizarra==0)return;if(herramientaPizarra==blink.tools.NOTE){pos=getCoordinates(e);var t=getIndiceStoreDrawing();var i=blink.tools.getNewID(t);var n={x:parseInt(pos.x),y:parseInt(pos.y),ID:"note"+t+"_"+i,txt:""};notesArray[t].push(n);selectPizarraColor("boton_notes",blink.tools.NOTE);blink.tools.drawNote(n,$("#canvas"+getIndiceStoreDrawing()).parent().get(0),true)}else updateDraw(e);if(blink.isAndroid)e.preventDefault();drawing=false;erasing=false;if(window.scormAPI)updateSCORM()}function updateDraw(e){if(herramientaPizarra==0)return;if(herramientaPizarra==blink.tools.ERASER){if(!blink.theme.useIndepentEraser&&erasing)ejecutarBorrador(e);return}if(!drawing)return;pos=getCoordinates(e);if(herramientaPizarra==2)pos.y=lasty;esPunto=false;if(esInfantil&&pos.x==lastx&&pos.y==lasty&&herramientaPizarra!=2){esPunto=true;pos.x=lastx+1;pos.y=lasty+1}if(esPunto||Math.abs(pos.x-lastx)+Math.abs(pos.y-lasty)>4){drawLine(getCanvas(),lastx,lasty,pos.x,pos.y,herramientaPizarra,colorSelected);id=getIndiceStoreDrawing();lineax[id].push(parseInt(lastx));lineay[id].push(parseInt(lasty));lineax[id].push(parseInt(pos.x));lineay[id].push(parseInt(pos.y));tipolinea[id].push(herramientaPizarra);colorlinea[id].push(colorSelected);numline++;lastx=pos.x;lasty=pos.y}if(blink.isAndroid)e.preventDefault();e.stopImmediatePropagation()}function redrawCanvas(e){redrawing=true;id=getIndiceStoreDrawing();clearCanvas();if(e){$("#canvas"+id).parent().find(".nota_pos").remove()}if(lineax[id]){var t=lineax[id],i=lineay[id];var n=t.length-1;var a=getCanvas();for(var r=0;r<n;r=r+2)drawLine(a,t[r],i[r],t[r+1],i[r+1],tipolinea[id][r/2],colorlinea[id][r/2])}if(e&&notesArray[id]){var o=notesArray[id];var s=o.length;for(var r=0;r<s;r++){_note=o[r];blink.tools.drawNote(_note,$("#canvas"+id).parent().get(0))}}redrawing=false}function getCoordinates(e){var t=0;var i=0;if(!e)e=window.event;if(blink.hasTouch){e.preventDefault();if(!e.touches&&!e.changedTouches){e=e.originalEvent}t=e.touches[0]?e.touches[0].pageX:e.changedTouches[0].pageX;i=e.touches[0]?e.touches[0].pageY:e.changedTouches[0].pageY;e.stopPropagation()}else if(e.pageX||e.pageY){t=e.pageX;i=e.pageY}else if(e.clientX||e.clientY){t=e.clientX+document.body.scrollLeft+document.documentElement.scrollLeft;i=e.clientY+document.body.scrollTop+document.documentElement.scrollTop}var n=$(e.target).offset();var a={x:(t-n.left)/factorpixelcanvas,y:(i-n.top)/factorpixelcanvas};return a}function distanciacuadradapuntoasegmento(e,t,i,n,a,r){var o=i-e,s=n-t;var l=o*o+s*s;var c=((a-e)*o+(r-t)*s)/l;if(c>1)c=1;if(c<0)c=0;var u=e+c*o,d=t+c*s;var f=u-a,p=d-r;return f*f+p*p}var areaBorrador=500;function ejecutarBorrador(e){updateActiveCanvas();id=getIndiceStoreDrawing();if(!lineax[id])return;var t,i;if(!e.target){t=$(e).offset();i={x:t.left+$(e).width()/2-offsetcanvas.left,y:t.top+$(e).height()/2-offsetcanvas.top}}else{t=getCoordinates(e);i=t}if(factorpixelcanvas){i.x=i.x/factorpixelcanvas;i.y=i.y/factorpixelcanvas}var n=lineax[id],a=lineay[id];var r=1e7;var o=n.length-1;var s=Array(),l=Array(),c=Array(),u=Array();var d=false;for(var f=0;f<o;f=f+2){var p=distanciacuadradapuntoasegmento(n[f],a[f],n[f+1],a[f+1],i.x,i.y);r=Math.min(r,p);if(p<areaBorrador){d=true}else{s.push(n[f]);l.push(a[f]);s.push(n[f+1]);l.push(a[f+1]);c.push(tipolinea[id][f/2]);u.push(colorlinea[id][f/2])}}$("canvasborrador").html("Min:"+r);lineax[id]=s;lineay[id]=l;tipolinea[id]=c;colorlinea[id]=u;if(d){var h=$("#canvasdiv"+activeSlide+" canvas").get(0);blink.isAndroidApp&&(h.width=h.width);setTimeout(redrawCanvas,0)}}function ejecutarBorradorCompleto(e){id=getIndiceStoreDrawing();if(!lineax[id])return;var t=$("#canvasborrador").offset();updateActiveCanvas();var i=200;$("#canvas"+id).fadeOut();$("#canvasborrador").offset(offsetcanvas).animate({top:"+=100",left:"+=800"},i).animate({top:"+=100",left:"-=800"},i).animate({top:"+=100",left:"+=800"},i).animate({top:"+=100",left:"-=800"},i).animate(t,i,function(){lineax[id]=Array();lineay[id]=Array();tipolinea[id]=Array();colorlinea[id]=Array();$("#canvas"+id).show();clearCanvas();updateActiveCanvas();if(e)posicionarBorrador()})}function prepararCamposTexto(){$("input[textodefault='si']").focus(function(){if(this.value==this.defaultValue)this.value="";if(this.value!=this.defaultValue)this.select()});$("input[textodefault='si']").blur(function(){if($.trim(this.value)==""){this.value=this.defaultValue?this.defaultValue:""}});$("textarea[textodefault='si']").focus(function(){if(this.value==this.defaultValue)this.value="";if(this.value!=this.defaultValue)this.select()});$("textarea[textodefault='si']").blur(function(){if($.trim(this.value)==""){this.value=this.defaultValue?this.defaultValue:""}});$("[sample]").each(function(){if(this.value==""){this.value=$(this).attr("sample")}});$("[sample]").focus(function(){if(this.value==$(this).attr("sample")){this.value=""}else this.select()});$("[sample]").blur(function(){if(this.value==""){this.value=$(this).attr("sample");$(this).addClass("sample")}});$(".contenidos_curso input, .contenidos_curso textarea, .contenidos_curso select").change(function(){try{marcarHaCambiado(getIDSlideFromIdElement(this.name))}catch(e){}});$(".contenidos input, .contenidos select").focus(function(){$("#topSpace").hide()});$("[help]").each(function(){if(this.value==""){this.value=$(this).attr("help");$(this).addClass("help")}});$("[help]").focus(function(){if(this.value==$(this).attr("help")){this.value="";$(this).removeClass("help")}else this.select()});$("[help]").blur(function(){if(this.value==""){this.value=$(this).attr("help");$(this).addClass("help")}});$("[tooltip]").each(function(){this.title=$(this).attr("tooltip");$(this).tooltip()})}function borrarValoresDefecto(){$("[help]").each(function(){if(this.value==$(this).attr("help")){this.value="";$(this).removeClass("help")}})}function buscarActividades(e,t,i,n,a,r){blink.theme.buscarActividades(e,t,i,n,a,r)}function buscarActividadesEmbebibles(e,t,i){blink.theme.buscarActividadesEmbebibles(e,t,i)}function _buscarActividades(e,t,i,n,a,r,o,s,l){blink.theme._buscarActividades(e,t,i,n,a,r,o,s,l)}function buscarNovedadesCurso(e){blink.theme.buscarNovedadesCurso(e)}function _buscarNovedadesCurso(e,t){blink.theme._buscarNovedadesCurso(e,t)}function desactivarVinculosAccessControl(){$('[hasaccess="ac_disabled"]').each(function(){$(this).addClass("disabled").unbind("click");var e=$(this).is("a")?this:$(this).find("a").get(0);$(e).attr("href","javascript:void(0);").attr("onclick","javascript:void(0);")});$('[hasaccess="ac_demo_blocked"]').each(function(){$(this).unbind("click");var e=$(this).is("a")?this:$(this).find("a").get(0);link="javascript:showMsgBox('', '/LMS/msgbox.php?typemsg=mustnotbedemo',550);";$(e).attr("href","javascript:void(0);").attr("onclick",link)});$('[hasaccess="ac_must_be_online"]').each(function(){$(this).unbind("click");var e=$(this).is("a")?this:$(this).find("a").get(0);var t=$(".menu_lateral").find(e).length>0;var i=$(this).attr("class");var n=i.indexOf(" ");if(n!=-1)i=i.substring(0,n);if(t)link="javascript:mostrarRequiereOnline('."+i+"', 'arrow', true);";else link="javascript:mostrarRequiereOnline('', 'none', true);";$(e).attr("href","javascript:void(0);").attr("onclick",link)});$('[hasaccess="ac_only_premium_users"]').each(function(){$(this).addClass("premium").unbind("click");var e=$(this).is("a")?this:$(this).find("a").get(0);var t=$(".menu_lateral").find(e).length>0;var i=$(this).attr("class");var n=i.indexOf(" ");if(n!=-1)i=i.substring(0,n);if(t)link="javascript:mostrarBloqueoLicencia('."+i+"', 'arrow', true);";else link="javascript:mostrarBloqueoLicencia('', 'none', true);";$(e).attr("href","javascript:void(0);").attr("onclick",link)});$('[hasaccess="invisible"]').remove()}function escribe_correo(e,t,i){var n="";for(var a=0;a<e.length;a++){n+=String.fromCharCode(e[a])}document.write('<a href="mailto:'+n+(i?"?subject="+i:"")+'">'+(t?t:n)+"</a>")}var temaini=null;function initCursoDrag(){blink.theme.initCursoDrag()}var posini=null;var pagMoving=false;function pagUp(e,t){if(!e)e=esInfantil&&!editar?160*3:150;if(!t)t=500;if(window.myScroll){myScroll.scrollTo(0,-e,t,true);myScroll.refresh()}else{if(!pagMoving){e=Math.min(e,-$("#ulCapaTemas").position().top);if(e>0){pagMoving=true;$("#ulCapaTemas").animate({top:"+="+Math.min(e,-$("#ulCapaTemas").position().top)},t,function(){pagMoving=false})}}}return false}function pagDown(e,t){if(!e)e=esInfantil&&!editar?160*3:150;if(!t)t=500;if(window.myScroll){myScroll.scrollTo(0,e,t,true);myScroll.refresh()}else{if(posini==null)posini=$("#ulCapaTemas").position().top;if(!pagMoving){var i=$("#ulCapaTemas").height();e=Math.min(e,$("#ulCapaTemas").height()+$("#ulCapaTemas").position().top-e);if(e>0){pagMoving=true;$("#ulCapaTemas").animate({top:"-="+e},t,function(){pagMoving=false})}}}return false}function showSection(e,t){var i=800;if(!t&&!$("li[id=tema"+e+"]").hasClass("on")){$("li[id^='tema']").removeClass("on").find(".contenido_tema").hide(i)}repositionSection(e,i);$("li[id=tema"+e+"]").toggleClass("on").find(".contenido_tema").stop().slideToggle(i,function(){if(window.myScroll){window.myScroll.refresh()}})}function repositionSection(e,t,i){}function openSection(e){$("li[id=tema"+e+"]").addClass("on").find(".contenido_tema:hidden").toggle("height")}function dlgCreateNewEditSection(e,t){if(!t)t=0;var i=getQueryParamValue("idgrupo");showMsgBox("","/LMS/msgbox.php?op=section.neweditsection&idcurso="+e+"&idtema="+t+(i?"&idgrupo="+i:""),550)}function borrarSeccion(e,t){if(confirm(textweb("course_41"))){getAJAX("/LMS/ajax.php?op=section.deletesection&idcurso="+e+"&idtema="+t,standardAJAX)}}function dlgCopyClass(e){showMsgBox("","/LMS/msgbox.php?op=activity.neweditclass&only_copy=1&callback="+e,770)}function dlgCopyEmbeddedClass(e){showMsgBox("","/LMS/msgbox.php?op=activity.neweditclass&only_copy=1&callback="+e+"&isEmbedded=1",770)}function dlgCreateNewEditClass(e,t,i,n,a,r,o,s,l,c){var u="/LMS/msgbox.php?op=activity.neweditclass";u+="&idcurso="+e;u+="&idtema="+t;u+=i?"&idclase="+i:"";u+=n?"&justrefresh="+n:"";u+=a?"&public="+a:"";u+=r?"&isResource="+r:"";u+=o?"&typeClass="+o:"";u+=s?"&idgrupo="+s:"";u+=l?"&blockTag="+l:"";u+=c?"&tpl="+c:"";showMsgBox("",u,770)}function dlgCreateNewEditBlock(e,t,i){var n="/LMS/msgbox.php?op=activity.neweditblock";n+="&idcurso="+e;n+="&idtema="+t;if(i){n+="&idclase="+i}showMsgBox("",n,770)}function dlgUsuarioAutor(e,t){var i="";if(t)i="&refresh=1";showMsgBox("","/LMS/msgbox.php?op=BlinkCore.viewuserauthor&iduser="+e+i,550)}function borrarClaseConPermiso(e,t,i,n,a){blink.theme.borrarClaseConPermiso(e,t,i,n,a)}function changeImagenClase(e,t,i){var n="finSeleccionarImagenClase";if(i==1)n="finSeleccionarImagenClaseRepos";seleccionarMultimedia(e,"",n,"borrarImagenClase","image",null,"activity",t)}function changeVideoClase(e,t,i){var n="finSeleccionarVideoClase";if(i==1)n="finSeleccionarVideoClaseRepos";seleccionarMultimedia(e,"",n,"borrarVideoClase","video",null,"activity",t)}function changeImagenTema(e,t){var i="finSeleccionarImagenTema";seleccionarMultimedia(e,"",i,"borrarImagenTema","image",null,"section",t)}function switchClaseOnline(e,t,i,n,a){blink.theme.switchClaseOnline(e,t,i,n,a)}function addClickToEditActivityButtonAction(e,t,i,n,a,r){blink.theme.addClickToEditActivityButtonAction(e,t,i,n,a,r)}function editActivityButtonAction(e,t,i,n,a){if(n==TIPOS_CLASES.WEB){var r=1;dlgCreateNewEditClass(i,t,e,r)}else{blink.editClass(e,a)}}function borrarImagenClase(){closeMsgBox();getAJAX("/LMS/ajax.php?op=activity.updateclassimage&idcurso="+idCursoSeleccionMultimedia+"&idclase="+idAppSeleccionarMultimedia+"&img=",function(e){if(e=="OK"||e=="RELOAD"){window.location.reload(true)}else _showAlert(textweb("course_46"))},false)}function borrarVideoClase(){closeMsgBox();getAJAX("/LMS/ajax.php?op=activity.updateclassvideo&idcurso="+idCursoSeleccionMultimedia+"&idclase="+idAppSeleccionarMultimedia+"&video=",function(e){if(e=="OK"||e=="RELOAD"){window.location.reload(true)}else _showAlert(textweb("course_46"))},false)}function borrarImagenTema(){closeMsgBox();getAJAX("/LMS/ajax.php?op=section.updatesectionimage&idcurso="+idCursoSeleccionMultimedia+"&idtema="+idAppSeleccionarMultimedia+"&img=",function(e){if(e=="OK"||e=="RELOAD"){window.location.reload(true)}else _showAlert(textweb("course_46"))},false)}function openSendActivityHomework(e,t){var t=typeof t!=="undefined"?t:false;showMsgBox("","/LMS/msgbox.php?op=homework.sendActivityHomework&idclase="+e+(t?"&sendTask=1":""),550)}function mostrarPopupAyuda(e){showMsgBox("","/LMS/msgbox.php?op=help.help&seccion="+e,550)}function mostrarPopupAyudaTexto(e){showMsgBox("","text:"+e,550)}function generarPublisherPackageScorm(e,t){var t=typeof t!=="undefined"?t:false;showMsgBox("","/LMS/msgbox.php?op=course.generaroutputscorm"+(e?"&idcurso="+e:"")+(t?"&componentactivities=1":""),"550")}function generarPackageScorm(e,t,i,n,a,r){if(!n){if(confirm(textweb("scorm_incluir_contenido"))){n=true}}var a=typeof a!=="undefined"?a:true;blink.theme.spinner.show();r=typeof r!=="undefined"?r:false;var o=n?"course.generastandalone":"course.generapkgscorm";var s="/LMS/ajax.php?op="+o+"&idcursos="+e+(t?"&idtemas="+t:"")+(i?"&idclases="+i:"")+(a?"&componentactivities=1":"")+(r?"&esGeneraStandalone=1":"");blink.events.on("ajax:success ajax:error",function(){blink.theme.spinner.hide()});getAJAX(s,standardAJAX,false)}function generarBlinkZIP(e){var t="/LMS/ajax.php?op=course.generablinkzip&idcursos="+e;getAJAX(t,standardAJAX,false)}function exportarDiagnostico(e,t){blink.theme.exportarDiagnostico(e,t)}function importarPackageScorm(e){showMsgBox("","/LMS/msgbox.php?op=course.importpkgscorm"+(e?"&idcurso="+e:""),550)}function importarDatos(e){showMsgBox("","/LMS/msgbox.php?op=importdata"+(e?"&idtipo="+e:""),550)}function enableFloatingObjects(){$(".borrador").each(function(){$(this).dblclick(function(){ejecutarBorradorCompleto(true)});$(this).css("cursor","pointer")});$(".draggable, .borrador, .eraser").blinkDraggable();if($.browser.msie)$(".unselectable").attr("unselectable","on")}function _savePosition(e){xy=$(e).offset();var t=xy.left;var i=xy.top;xy=$(e).position();var t=xy.left;var i=xy.top;$(e).attr("blink-left-start-drag",t).attr("blink-top-start-drag",i)}function _loadPosition(e){var t=$(e).attr("blink-left-start-drag");var i=$(e).attr("blink-top-start-drag");$(e).position({left:t,top:i})}var _lastDraggableObj;var _draggablemindist=50*50;var DragScrollLibroDigital;function _onStartDragDraggable(e,t){if($(e).hasClass("borrador")){updateActiveCanvas()}else if($(e).hasClass("html_page")){DragScrollLibroDigital.mouseDown=true;DragScrollLibroDigital.prevX=t.screenX;DragScrollLibroDigital.prevY=t.screenY;DragScrollLibroDigital.iniX=parseInt($(DragScrollLibroDigital.tgt).css("left"));DragScrollLibroDigital.iniY=parseInt($(DragScrollLibroDigital.tgt).css("top"))}else{_lastDraggableObj=e}}function _onDragDraggable(e,t){if($(e).hasClass("borrador")){ejecutarBorrador(e)}else if($(e).hasClass("html_page")){DragScrollLibroDigital.getMousePosition(t)}}function _onEndDragDraggable(e,t){if($(e).hasClass("html_page")){DragScrollLibroDigital.terminarmouse(t)}else{_lastDraggableObj=e;xy=$(e).offset();var r=null;var o=_draggablemindist;var i=$(e).width(),n=$(e).height();xy.left+=i/2;xy.top+=n/2;$(".droppable").each(function(){var e=$(this).offset();var t=$(this).width(),i=$(this).height();e.left+=t/2;e.top+=i/2;var n=$(this).attr("tamanoradiodrop");if(n==undefined)n=_draggablemindist;var a=(e.left-xy.left)*(e.left-xy.left)+(e.top-xy.top)*(e.top-xy.top);if(r==null&&a<n||r!=null&a<o){r=this;o=a}});var a=false;if(r!=null)a=_activateDroppable(r,e);if($(e).hasClass("draggablereturnorigin")){$(e).data({dropped:a});$(e).draggable("option","revertDuration",a?0:500)}}}function _onStopDragDraggable(e){if($(e).data().dropped){$(e).hide().fadeIn(1e3).addClass("dropped")}}function _activateDroppable(e,t){var i=false;if(e.nodeName=="INPUT"&&e.type=="text"&&!e.disabled){var n=$(t).attr("dropvalue");if(n!=undefined&&n!=""){e.value=n;$(e).trigger("change")}}if(e.nodeName=="DIV"){if($(e).hasClass("dropcenter")){var a=$(e).offset();var r=$(t).offset();var o=$(e).width(),s=$(e).height();var l=$(t).width(),c=$(t).height();var u={left:a.left+o/2-l/2,top:a.top+s/2-c/2};$(t).offset(u)}}i=true;if($(t).hasClass("draggableremove")&&i)$(t).hide();return i}function prepararNota(e,t,i){if(e==="")return"-";if(e=="-")return"-";if(e=="P")return"P";if(e==null)return"-";if(t==100)return parseFloat(e).toFixed()+"%";else{var n=parseFloat(e)/100*t;return n.toFixed(i)}}function obtenerNotaPendiente(e){return"P"}function cambiarEstadoActividadUsuario(e,t,i,n){getAJAX("/LMS/ajax.php?op=cambiarEstadoActividadUsuario&estado="+n+"&idalumno="+e+"&idcurso="+t+(i?"&idclase="+i:""),function(){},false)}function cambiarEstadoActividades(e,t,i,n,a){var r=a?"activity.cerrarActividades":"activity.abrirActividades";getAJAX("/LMS/ajax.php?op="+r+"&idgrupo="+e+"&idcurso="+t+(i?"&idtema="+idema:"")+(n?"&idclase="+n:""),function(){},false)}function buscarPalabrasBuscador(){var e=document.referrer;var t=e.split("&");var i="q";if(t[0].indexOf("yahoo")!=-1)i="p";if(t[0].indexOf("blinklearning.com")!=-1||t[0].indexOf("localhost")!=-1)i="busqueda";var n="";for(var a=1;a<t.length;a++)if(t[a].startsWith(i+"=")){n=unescape(t[a].substring(2));break}buscarPalabras(n)}function buscarPalabras(e){if(e=="")return;var n=e.split(" ");var a="",r=0;$(".contenidos_curso").each(function(){var e=$(this).html().toUpperCase();var t=0;for(var i=0;i<n.length;i++){if(n[i].length<3)continue;t+=e.split(n[i].toUpperCase()).length-1}if(t>r){r=t;a=this.id}});if(a!=""){var t=$("#"+a).parent().parent().parent().parent().parent().attr("id").substring(6);showSlideFromID(t)}}function CSVToArray(e,t){t=t||",";var i=new RegExp("(\\"+t+"|\\r?\\n|\\r|^)"+'(?:"([^"]*(?:""[^"]*)*)"|'+'([^"\\'+t+"\\r\\n]*))","gi");var n=[[]];var a=null;while(a=i.exec(e)){var r=a[1];if(r.length&&r!=t){n.push([])}if(a[2]){var o=a[2].replace(new RegExp('""',"g"),'"')}else{var o=a[3]}n[n.length-1].push(o)}return n}function duplicateActividad(e,t){getAJAX("/LMS/ajax.php?op=activity.duplicateclass&idcurso="+e+"&idclase="+t,standardAJAXPopup);return false}function showSlideGenerator(){if(!editar)return;return;datos=prompt("Introduce los datos para replicar la transparencia");oldID=secuencia[activeSlide];prefijo="t"+secuencia[activeSlide];tipotransp=document.f[prefijo+"_type"].value;transparray=datos.split(";");createNewSlide(tipotransp,transparray.length,function(e){populateWithCSVData(tipotransp,oldID,e,transparray)})}function populateWithCSVData(e,t,n,a){numslides=a.length;actualizarCamposTexto();try{for(i=0;i<numslides;i++){datosarray=CSVToArray(a[i])[0];IDtransp=n+i;$("[name^='t"+IDtransp+"_']").each(function(){var e=this.name.substring(3);if(e!="type"&&e!="idtransp"&&this.type){if(this.type=="input"||this.type=="text"||this.type=="hidden"||this.type=="textarea"){if(document.f["t"+t+"_"+e])this.value=document.f["t"+t+"_"+e].value}if(this.type.startsWith("select"))if(document.f["t"+t+"_"+e])this.selectedIndex=document.f["t"+t+"_"+e].selectedIndex}});if(e==9){numoperaciones=Math.floor(datosarray.length/3);var r=["+","-","x","/"];for(var o=1;o<=numoperaciones;o++){document.f["t"+IDtransp+"_operando1_"+o].value=datosarray[3*(o-1)];document.f["t"+IDtransp+"_operacion_"+o].selectedIndex=r.findIndex(datosarray[3*(o-1)+1]);document.f["t"+IDtransp+"_operando2_"+o].value=datosarray[3*(o-1)+2]}}if(e==6){txt=document.f["t"+IDtransp+"_textFillblanks"].value;for(var o=0;o<datosarray.length;o++){txt=txt.replace("::",datosarray[o])}document.f["t"+IDtransp+"_textFillblanks"].value=txt}}}catch(e){_showAlert(e.description)}setTimeout("actualizarCamposTexto(false)",1e3)}function borrarFicheroMultimediaCurso(e,t,i){if(confirm(textweb("select_multimedia_27"))){getAJAX("/LMS/ajax.php?op=files.deletefile&idcurso="+e+"&file="+t,i)}}function borrarFicheroMultimedia(e,t,i,n){if(confirm(textweb("select_multimedia_27"))){getAJAX("/LMS/ajax.php?op=files.deletefile&app="+e+"&appid="+t+"&file="+i,n)}}function borrarFicheroAPIidfile(e,t,i){if(confirm(textweb("select_multimedia_27"))){getAJAX("/LMS/ajax.php?op=files.deletefile&api_name="+e+"&idfile="+t,i)}}var optimizado=false;function optimizarEspacio(){optimizado=!optimizado;if(optimizado)$(".cabecera_peq, .titulo_pagina_curso, .pie_blanco").hide();else $(".cabecera_peq, .titulo_pagina_curso, .pie_blanco").show();conmutarEstadoBoton("boton_optimizar",!optimizado)}var modoContinuo=false;var _vieneDeModoContinuo=false;var menu_lateral_topini=35;var _edadRecomendada=0;function scrollToSlide(e){blink.theme.scrollToSlide(e)}function posicionarMenuLateral(e){if(!e)e=false;var t=$('[id="transp'+activeSlide+'"]').position();var i=$("#contenedor_slides").position();if(t==null||i==null)return;if(e)$(".menu_lateral").animate({top:t.top-i.top},{duration:"fast",easing:"swing"});else $(".menu_lateral").css({top:t.top-i.top})}function posicionarBorrador(){if($(".libro2paginas").size()>0){var e=$(".libro_me").offset();e.top+=$(".libro_me").height()-80;e.left+=10}else if(esInfantil){var e=$("#t"+secuencia[activeSlide]+"contenidos_curso").offset();if(e!=null){e.top+=500;e.left+=820}}else{var e=$("#t"+secuencia[activeSlide]+"contenidos_curso").offset();if(e!=null){e.left-=120;e.top-=60;if(e.left<0)e.left=0}}if(e!=null)$("#canvasborrador:visible").offset(e)}function conmutarModoContinuo(){blink.theme.conmutarModoContinuo()}function printError(e){setTimeout(function(){_showAlert(e)},500)}var DragScroll;DragScroll={e:null,x:0,y:0,t:0,prevX:0,prevY:0,prevT:0,velX:0,velY:0,mouseDown:false,init:function(){var t=this;$(document).mousemove(function(e){t.getMousePosition(e);return false});$(document).mousedown(function(e){t.mouseDown=true});$(document).mouseup(function(){t.mouseDown=false;return false;$("html,body").animate({scrollTop:"-="+Math.floor(t.velY*1e3)},"slow")});$(document.body).css("overflow","hidden");$(document).disableSelection()},getMousePosition:function(e){this.e=e;if(e.which!=1)return;if($(this.e.target).hasClass("draggable"))return;this.x=this.e.screenX;this.y=this.e.screenY;this.t=(new Date).getTime();this.velX=(this.x-this.prevX)/(this.t-this.prevT);this.velY=(this.y-this.prevY)/(this.t-this.prevT);if(this.mouseDown&&(this.x!=this.prevX||this.y!=this.prevY))window.scrollBy(0,-(this.y-this.prevY));this.prevX=this.x;this.prevY=this.y;this.prevT=this.t}};function BlockMove(e){return true;e.preventDefault();return false}function getStandardUrlResourceFile(t){getAJAX("/LMS/ajax.php?op=files.getStandardUrlResource&url="+encodeURIComponent(t)+"&app=activity&app_id="+idclase,function(e){if(e.startsWith("OK")){t=e.substring(2)}},false,undefined,undefined,true);return t}function adjustUseruploadsUrl(e,t,i){var n=e;var a=e.indexOf(MEDIA_URL);var r=e.indexOf(FILE_RESOURCES_PATH);if(a!=-1&&r!=-1){n=MEDIA_URL+"/"+FILE_RESOURCES_SHORT_PATH+t+"/"+i+"/"+e.substring(r+FILE_RESOURCES_PATH.length)}return n}var lupaOff=true;function hideLupa(){if(!lupaOff)toggleLupa()}var waitLupaTimer;function waitLupa(){if($("#lupa_"+activeSlide).get(0)&&$("#lupa_"+activeSlide).css("visibility")=="hidden"){$("#lupa_"+activeSlide).css("visibility","visible").css("opacity","1")}else{waitLupaTimer=setTimeout("waitLupa()",500)}}function toggleLupa(e){if(lupaOff){loupe.defaultResopath="../images/";$(e).eq(activeSlide).each(function(){$(this).parent().css("background-image",'url("'+$(this).attr("src")+'" no-repeat)').width($(this).width());loupe.add($(this).get(0),{name:"lupa_"+activeSlide,visible:false})});loupe.toggle("lupa_"+activeSlide);waitLupa()}else{$('[id^="lupa_"]:visible').each(function(){loupe.remove(this)})}if(lupaOff){setPizarraOff(false);if(miniaturasInfantil)mostrarMiniaturasInfantil();$(".gometusado").hide()}else{$(".gometusado").show()}setTimeout(function(){$("[id$='_Switch']").hide()},100);lupaOff=lupaOff?false:true;conmutarEstadoBoton("boton_lupa",lupaOff);$("#boton_lupa").toggleClass("on")}function markAsModif(){if($('[name="pwdChange"]').val()=="0"){$('[name="pwdChange"]').val("1")}}function actualizarCamposFormulario(){blink.theme.actualizarCamposFormulario()}function enviarTicket(){if(window.openHelpPanel)if(window.openHelpPanel())return false;showMsgBox("","/LMS/msgbox.php?op=help.sendticket",560);return false}function editarUsuario(e,t){redireccionar("/LMS/registration.php?nextURL="+encodeURIComponent("../admin/admin.php?op=listadousuarios")+"&edituserid="+e+"&blinkdomain="+t)}function nuevoUsuario(e){var t="";if(typeof e!="undefined"){t="&utype="+e}redireccionar("/LMS/registration.php?nextURL="+encodeURIComponent("../admin/admin.php?op=listadousuarios")+"&newuser=1"+t)}function nuevoDominio(){showMsgBox("","/LMS/msgbox.php?op=domain.neweditdomain",560);return false}function invitarProfesor(){redireccionar("/LMS/registration.php?nextURL="+encodeURIComponent("../admin/admin.php?op=listadousuarios")+"&newuser=1&invitarprofesor=1")}function logoff(e){if(blink.isApp){blink.rest.logout()}else if(e=="1"&&$.browser.msie){window.close()}else{redireccionar("../LMS/index.php?logoff=1")}}function mostrarIndiceCurso(e,t,i){$("#capaTemas").height($(window).height()-133);if($("#indice:visible").get(0)){$(".home_curso_de").animate({"margin-left":"+="+$(".listado_temas").width()},"fast","swing",function(){$("#indice").fadeOut()})}else{if($("#divindicecurso").html()=="")getMsgBoxFromURL("/coursePlayer/capa_indice_curso.php?idcurso="+e+"&idclase="+t+"&editar="+i,undefined,"divindicecurso");$("#indice").fadeIn();$(".home_curso_de").animate({"margin-left":"-="+$(".listado_temas").width()},"fast","swing");$("#leccion"+t+" tr td.td_actividad").addClass("selected")}}function mostrarAnteriorActividad(){$("#leccion"+idclase).prev().prev().find("td.td_actividad").click()}function mostrarSiguienteActividad(e){idclaseToGo=e?e:idclase;$("#leccion"+idclaseToGo).next().next().find("td.td_actividad").click()}var _indiceCurso;_indiceCurso={offset:0,timer:null,interval:100,setOffset:function(e){this.offset=e;this.resetTick(false)},resetOffset:function(){this.offset=0;if(this.timer){clearTimeout(this.timer);this.timer=null}},resetTick:function(e){if(!this.timer||e)this.timer=setTimeout("_indiceCurso.tick()",this.interval)},tick:function(){if(this.offset>=0)pagUp(20,10);else pagDown(20,10);this.resetTick(true)}};function isInside(e,a){var r=null;$(e).each(function(){if(r)return;var e=$(this).offset();var t=$(this).width();var i=$(this).height();var n=a.x>=e.left&&a.x<=e.left+t&&a.y>=e.top&&a.y<=e.top+i;if(n){r=this}});return r}function indiceCursoRellenarNota(e,t,i,n){blink.theme.indiceCursoRellenarNota(e,t,i,n)}function doPrint(e,t){printw=window.open("/coursePlayer/clases2.php?idcurso="+e+"&idclase="+t+"&print=true","print","status=0,toolbar=0,width=966,height=660,scrollbars=yes")}function printPreview(){if(!modoContinuo)conmutarModoContinuo();$("div.caja_inner, div.caja_outer").each(function(){$(this).css("border","2px solid "+$(this).css("background-color"))});$("div").css({background:"none","background-image":"none !important"});$("#menu_div, .menu_gris, .cabecera_peq, .paginas_curso, .titulo_pagina_curso, .editar_ver, .pie_blanco, .cabecera_curso, .pie_curso, .corregir_quedan, .solucion_div, .player").hide();$(".headlibro").remove();$(".print").show();$(".contenidos").css("min-width","940px");$(".contenidos2, .contenidos3").width(940);$(".libro").height(448);$("div.circulo_gris:has(p:visible)").prepend('<img style="position:absolute; z-index:1;" src="../images/i/drop_izquierda2.png"/>');$("div.drop_ok").prepend('<img style="position:absolute; margin-left: -26px; z-index:1; " src="../images/i/drop_miniok.png"/>');$("div.drop_ko").prepend('<img style="position:absolute; margin-left: -26px; z-index:1; " src="../images/i/drop_miniko.png"/>');$("div.drop_ok p").css({"z-index":"1",position:"relative",color:"black"});$("div.drop_nada").each(function(e){$(this).prepend('<span style="color: black;">'+(e+1)+'</span><img style="position:absolute; margin-left: -23px; margin-top: -7px; z-index:3;" src="../images/i/drop_derecha2.png"/>')});$("div.clasificar_conjuntos div").prepend('<img style="position:absolute; left: 0px; z-index:1;" src="../images/i/clasificar_globo.png"/>');$("div.clasificar_conjuntos div ul").css({"z-index":"2",position:"relative"});$("div.clasificar_conjuntos div p").css({position:"relative"});$("div.page_border").css({background:"url(../../images/i/page_border.png) 0 0 no-repeat !important",height:"1370px",width:"940px"});$("div.page_inner").css({height:"1280px",width:"940px"});if($.browser.msie)$(".print_pie").css("margin-bottom","50px");window.print()}function mostrarGloboAyuda(e,t,i,n,a,r,o,s){blink.theme.mostrarGloboAyuda(e,t,i,n,a,r,o,s)}function mostrarRequiereOnline(e,t,i){blink.theme.mostrarRequiereOnline(e,t,i)}function mostrarModalDescargaSelectiva(e){blink.theme.mostrarModalDescargaSelectiva(e)}function mostrarBloqueoLicencia(e,t,i){blink.theme.mostrarBloqueoLicencia(e,t,i)}function _showAlert(e,t){if(mostrarMensajesPersonalizados()){t=t||textweb("tablettxt_button_retry");$(".generic-custom-error").showBlink().find("p").html(e).end().find(".generic-help-button").attr("id","offline-btn-reload").html(t).click(function(){$(".generic-custom-error").hideBlink()})}else if(blink.isApp){blink.rest.alert(e)}else{alert(e)}}function initAndroidApp(){$("#close_session").remove();$(".logo a").attr("href","#");$(".logo3 a").attr("href","#")}function getLabelModo(e){modos=new Array("ver","editar","standalone","embed","drm");if(e>=0&&e<modos.length)return modos[e];return modos[0]}function isModoOffline(e){return getLabelModo(e)=="standalone"||getLabelModo(e)=="drm"}function setModoVisualizacion(e){if(blink.theme&&blink.theme.setModoVisualizacion){return blink.theme.setModoVisualizacion(e)}modoactual=getLabelModo(e);$(".no_modo_"+modoactual).remove();for(m=0;m<modos.length;m++)if(modos[m]!=modoactual)$(".modo_"+modos[m]).filter(":not(.modo_"+modoactual+")").remove();for(m=0;m<modos.length;m++)if(modos[m]!=modoactual)$(".no_modo_"+modos[m]).filter(":not(.no_modo_"+modoactual+")").showBlink();$(".modo_"+modoactual).show()}function setModoBlocked(){$(".access_type_blocked").attr("disabled","disabled");$(".contenidos").find("a, input, textarea, button").attr("disabled","disabled");$(".contenidos").find("a, input, textarea, button").attr("href","javascript:void(0)").attr("onclick","javascript:void(0)");mostrarBloqueoLicencia("","none",false)}function setDisabledCKEditor(e,t){setTimeout("CKEDITOR.instances['"+e+"'].document.$.body.setAttribute('contenteditable', "+!t+")",500);if(t)$("#cke_"+e+" .cke_top").hide();else $("#cke_"+e+" .cke_top").show()}function checkStatusOffline(){setTimeout("statusOffline()",5e3)}function statusOffline(){$.getJSON("/drm:DRMstatus",function(e){var t=e["porcentaje"];$("#porcentaje_offline").attr("class","").addClass("porcentaje_"+t/10);if(t!=100)setTimeout("statusOffline()",5e3)})}function enviarInvitacion(e){if(confirm(textweb("reinvitar_1"))){getAJAX("/LMS/ajax.php?op=message.sendInvitation&idusuario="+e,standardAJAX)}}function dlgSyncroCourse(e){showMsgBox("","/LMS/msgbox.php?op=course.syncrocourse&idcurso="+e,770)}function mostrarTextoIncidencia(e){var t="/LMS/msgbox.php?op=log.mostrarIncidencias&idincidencia="+e;showMsgBox("",t,550)}function refrescaTooltip(e){e.each(function(){this.title=$(this).attr("tooltip");$(this).tooltip()})}function drmAccess(){if(!navigator.javaEnabled()){if(confirm(textweb("drmaccess_instalar_java"))){window.open("http://www.java.com/es/download/")}return false}return true}function getTime(){var e=new Date;return e.getTime()}function closeWindow(){window.open("","_self","");window.close()}function matchFilter(e,t,n){var a=true;if(e.length){if($("#filtros #"+e).hasClass("selected")){$("#filtros #"+e).removeClass("selected");$("li[id^=tema]").show();a=false}}if(a){$("#filtros a").removeClass("selected");if(e!=""){$("#filtros #"+e).addClass("selected")}jsonfilter=json_decode('{"'+t.replace(":",'":"')+'"}');$("li[id^=tema]").each(function(){filteri=$(this).attr("filter");if(t==""||!filteri)$(this).show();else{jsonfilteri=json_decode('{"'+filteri.replace(":",'":"')+'"}');attrs=["lang","role","loc","idtemaprev"];matchi=null;for(i=0;i<attrs.length;i++){at=attrs[i];if(jsonfilter[at]&&jsonfilteri[at]){matchi=_.indexOf(jsonfilteri[at].split(","),jsonfilter)!=-1;break}}if(matchi!=null){if(matchi)$(this).show();else{if(n)$(this).hide()}}}})}}var hasChangesInFields=false;function registerChanges(){$("input, select").change(function(){hasChangesInFields=true})}function checkRegisterChanges(e){if(hasChangesInFields)return e}function markRegisterChange(){hasChangesInFields=true}function resetRegisterChanges(){hasChangesInFields=false}function changeUserLicense(e){if(!e||e==0){return}showMsgBox("","/LMS/msgbox.php?op=credit.updateuserlicense&iduser="+e,550)}function prolongUserLicense(e,t){if(!e||e==0){return}if(!t||t==0){t=15}getAJAX("/LMS/ajax.php?op=user.prolonguserlicense&iduser="+e+"&days="+t,function(e){if(e.startsWith("OK"))_showAlert("Licencia actualizada hasta "+e.substr(2));else _showAlert("Ha ocurrido un error al actualizar la licencia")})}function getCoursesList(e,t,i,n,a,r,o,s,l,c){showMsgBox("","/LMS/msgbox.php?op=viewschoolcourses&idschool="+encodeURIComponent(e)+"&from_activation="+encodeURIComponent(t)+"&until_activation="+encodeURIComponent(i)+"&marsutype="+encodeURIComponent(n)+"&demotype="+encodeURIComponent(a)+"&dispositivetype="+encodeURIComponent(r)+"&comment="+encodeURIComponent(o)+"&userlicensetype="+encodeURIComponent(s)+"&idpublisher="+encodeURIComponent(l)+"&funcionalidad="+encodeURIComponent(c),550)}function getCoursesListByIDUser(e,t,i,n,a,r,o,s,l,c){showMsgBox("","/LMS/msgbox.php?op=viewschoolcoursesbyiduser&idschool="+encodeURIComponent(e)+"&from_activation="+encodeURIComponent(t)+"&until_activation="+encodeURIComponent(i)+"&marsutype="+encodeURIComponent(n)+"&demotype="+encodeURIComponent(a)+"&dispositivetype="+encodeURIComponent(r)+"&comment="+encodeURIComponent(o)+"&userlicensetype="+encodeURIComponent(s)+"&idpublisher="+encodeURIComponent(l)+"&funcionalidad="+encodeURIComponent(c),550)}function isValidDate(e,t,i,n,a,r){if(!n)n=0;if(!a)a=0;if(!r)r=0;var o=new Date(i,t-1,e,n,a,r);return o.getFullYear()==i&&o.getMonth()+1==t&&o.getDate()==e&&n==o.getHours()&&a==o.getMinutes()&&r==o.getSeconds()}function esFechaValida(e,t){var i="-";if(e.indexOf(i)==-1)i="/";e=e.split(i);if(t){t=t.split(":");return isValidDate(e[0],e[1],e[2],t[0],t[1])}return isValidDate(e[0],e[1],e[2])}function fechaHoy(){var e=new Date;var t=e.getDate();var i=e.getMonth()+1;var n=e.getFullYear();return""+(t<=9?"0"+t:t)+"-"+(i<=9?"0"+i:i)+"-"+n}function format_duracion(e){return e}function fechaMayor(e,t){if(e.length!=10||t.length!=10)return null;f1=""+e.substr(6)+e.substr(3,2)+e.substr(0,2);f2=""+t.substr(6)+t.substr(3,2)+t.substr(0,2);return f1>f2}function addBookToList(o,s){if($.trim($("#isbnadd").attr("value"))==""){if(s=="profesor")_showAlert("Debe indicar el ISBN o ID del libro.");else _showAlert("Debe indicar los ISBN o ID de libros separados por (,) o (;)");return}else{var e="";if(s=="centro"||s=="libros-demo")e="/LMS/ajax.php?op=course.addbooktoschool&idcentro="+o+"&pantalla="+s+"&isbn="+$("#isbnadd").attr("value");else if(s=="profesor")e="/LMS/ajax.php?op=course.addbooktoteacher&idprof="+o+"&isbn="+$("#isbnadd").attr("value");else e="/LMS/ajax.php?op=course.addbooktogroup&idgrupo="+o+"&isbn="+$("#isbnadd").attr("value");if(s!="grupo"||s=="grupo"&&confirm(textweb("confirm_add_course_to_group"))){getAJAX(e,function(i){if(i.startsWith("OK")){var e=i.substr(2);var t=e.split(",");var n=t.length;var a="";var r=s=="centro"||s=="libros-demo"?"idcentro":"idg";getAJAX("/LMS/msgbox.php?op=course.getlibrohtmlcursotinyicon&"+r+"="+o+"&idcurso="+e+"&pantalla="+s,function(e){if(i.startsWith("OK")){a=e.substr(2);$(a).appendTo("#div_libros");var t=parseInt($("#div_nlibros").html());t+=n;$("#div_nlibros").html(t);$("#isbnadd").val("")}})}else _showAlert(i.substr(5));$("#isbnadd").val("")})}}}function removeBookFromSchool(e,t){blink.theme.removeBookFromSchool(e,t)}function removeBookFromGroup(e,t){blink.theme.removeBookFromGroup(e,t)}function chooseOSInstallerCurso(e){showMsgBox("","/LMS/msgbox.php?op=utils.choose_os&idcurso="+e,msgBoxWidth,null,true)}function chooseOSInstallerApp(e){if(offline)mostrarAvisoOffline();else showMsgBox("","/LMS/msgbox.php?op=utils.choose_os&app="+e,msgBoxWidth,null,true)}function autocompleteCenter(i,n,e,t,a,r){if(e==undefined)e=400;if(t==undefined)t=50;if($("#"+i).length==0)return false;if(typeof a=="undefined"){a=false}if(typeof r!="function"){r=false}$("#"+i).change(function(){if($(this).val()=="")$("#"+n).val("")}).blinkcomplete({minLength:3,source:function(e,t){if($("#pais").val()!="00"){var i={data:{term:e.term,pais:$("#pais").val()}};if(a){i["data"]["includeDefaultCenter"]=1}blink.getJSON("/LMS/ajax.php?op=search.searchcentro&maxlist=10",t,i)}else{blink.getJSON("/LMS/ajax.php?op=search.searchcentro&maxlist=10",t,{data:{term:e.term}})}},getItemLine1:function(e){return e.value},getItemLine2:function(e){return e.address},getItemWidth:function(e){return t},open:function(e,t){$(".ui-autocomplete").css("z-index",4200);$(".ui-autocomplete").css("width",$("#"+i).outerWidth(true))},select:function(e,t){if(t.item.id!=0){$("#"+i).val(t.item.value);$("#"+n).val(t.item.id);if(r!=false){r(t.item)}}else{$("#"+i).val("")}return false}})}function autocompleteCountry(r,o,e,t,s,i){if(e==undefined)e=400;if(t==undefined)t=50;if($("#"+r).length==0)return false;if(typeof i!="function"){i=false}$("#"+r).change(function(){if($(this).val()=="")$("#"+o).val("")}).blinkcomplete({minLength:3,source:function(t,e){var i=Object.keys(s);var n=i.filter(function(e){return s[e].toLowerCase().includes(t.term.toLowerCase())});var a=[];if(n.length>0){n.map(function(e){a.push({id:e,label:s[e],value:s[e],img:"",address:""})})}else{a.push({id:0,value:'<span class="text-danger">'+textweb("tablettxt_no_results_found")+"</span>",label:"",img:"",address:""})}if(n.length==1&&a.length==1&&$("#"+o).val()!=a[0].id){$("#"+r).val(a[0].value);$("#"+o).val(a[0].id)}e(a)},getItemLine1:function(e){return e.value},getItemLine2:function(e){return e.address},getItemWidth:function(e){return t},open:function(e,t){$(".ui-autocomplete").css("z-index",4200);$(".ui-autocomplete").css("width",$("#"+r).outerWidth(true))},select:function(e,t){if(t.item.id!=0){$("#"+r).val(t.item.value);$("#"+o).val(t.item.id);if(i!=false){i(t.item)}}else{$("#"+r).val("")}return false}})}function detalleCredito(e){showMsgBox("","/LMS/msgbox.php?op=credit.mostrardetallecredito&id="+e,550)}function creditDetailsExcel(e){blink.theme.spinner.show();var t=false;if(e){blink.ajax("/LMS/ajax.php",openFileBase64,{data:{op:"credit.creditdetailsexcel",idCredit:e},async:false})}blink.theme.spinner.hide();return t}function accionMiembro(e,t){if(t=="rechazar"&&!confirm(textweb("new_edit_group_32")))return;getAJAX("/LMS/ajax.php?op="+t+"miembro&idusuario="+e+"&idgrupo="+$("#idgrupo").val(),standardAJAXFunc)}function checkBookIndexEndMode(){}function verCajaTexto(){var e=$(".caja_texto");if(e.attr("visible")=="false"){e.attr("visible",true).show();if($("textarea",e).attr("disabled")){$(".caja_texto div").hide();e.addClass("disabled")}}else{e.attr("visible",false).hide()}}function android_iframe_height_hack(){var e=navigator.userAgent||"";e=e.toLowerCase();if(e.indexOf("android")!=-1&&e.indexOf("version/")!=-1){var t=e.match("android ([0-9]+.[0-9]+)");if(t){t=parseFloat(t[1]);if(t<4.4){var i=parseInt($("#t0_iframe").css("height"));setInterval(function(){try{var e=parseInt(document.getElementById("t0_iframe").contentWindow.document.body.scrollHeight);if(e<=0)return;if(e<i)e=i;if(e!=parseInt($("#t0_iframe").css("height"))){$("#t0_iframe").css("height",e+"px")}}catch(e){}},500)}}}}function dlgNewDigitalBookLink(e){var t=blink.getReqParam(location.href,"idcurso");var i=blink.getReqParam(location.href,"idclase");e=e?"&callback="+e:"";showMsgBox("","/LMS/msgbox.php?op=activity.neweditdigitalbooklink"+(t?"&idcurso="+t:"")+"&idclase="+i+"&idelem="+e,770)}function editLinkDigitalBook(e){var t=blink.getReqParam(location.href,"idcurso");var i=blink.getReqParam(location.href,"idclase");showMsgBox("","/LMS/msgbox.php?op=activity.neweditdigitalbooklink"+(t?"&idcurso="+t:"")+"&idclase="+i+"&idelem="+e,770)}function editFileDigitalBook(e,t,i){var n=blink.getReqParam(location.href,"idcurso");var a=blink.getReqParam(location.href,"idclase");showMsgBox("","/LMS/msgbox.php?op=activity.editdigitalbookfile"+(n?"&idcurso="+n:"")+"&idclase="+a+"&idelem="+e+"&thumb="+t+"&tipoFichero="+i,770)}function editActiviyDigitalBook(e){var t=blink.getReqParam(location.href,"idcurso");var i=blink.getReqParam(location.href,"idclase");showMsgBox("","/LMS/msgbox.php?op=activity.editdigitalbookactivity"+(t?"&idcurso="+t:"")+"&idclase="+i+"&idelem="+e+"&tipoFichero=actividad",770)}function activarLinksLibroDigital(e){$("#canvasdiv0, #capa, .html_page").css("pointer-events",e?"none":"auto")}function dlgPublicationStatusReport(){showMsgBox("","/LMS/msgbox.php?op=editorial.publicationstatusreport",770)}function generarExcelCentrosDemo(){blink.theme.generarExcelCentrosDemo()}function marcarCursoDemoElegido(e){blink.theme.marcarCursoDemoElegido(e)}function borrarCursoDemo(e,t,i){blink.theme.borrarCursoDemo(e,t,i)}function marcarCursoPrescritoElegido(e){blink.theme.marcarCursoPrescritoElegido(e)}function borrarCursoPrescrito(e,t,i){blink.theme.borrarCursoPrescrito(e,t,i)}function mostrarErrorusuarios(e,t){alert(e);closeMsgBox();redireccionar(t)}function onCreateEditComunity(e,t){var i="/LMS/msgbox.php?op=group.addComunity";if(t)i+="&idComunity="+t;showMsgBox(e,i,580,null,true)}function busquedaClaustro(e,t,i,n){borrarValoresDefecto();if(!e)e="buscadorClaustro";var a=$("#"+e).attr("value")||"";if(n=="miclaustro"){redireccionar("/LMS/claustro.php?busqueda="+encodeURIComponent(a)+"&idclaustro="+i)}else if(n=="community"){redireccionar("/LMS/claustro.php?busqueda="+encodeURIComponent(a)+"&idgrupo="+t)}}function seguirComunidadMsg(t){getAJAX("/LMS/ajax.php?op=group.executejoincommunity&id="+t+"&privado=1",function(e){if(e.startsWith("OK"))redireccionar("/LMS/claustro.php?idgroup="+t);else standardAJAXFunc(e)})}function busquedaClase(e,t,i){var n="/LMS/clase.php";var a="idgrupo";if(i=="")i="clase";borrarValoresDefecto();if(!e)e="buscadorClase";var r=$("#"+e).attr("value")||"";if(i=="claustro"){n="/LMS/claustro.php";a="idgroup"}redireccionar(n+"?busqueda="+encodeURIComponent(r)+"&"+a+"="+t)}function imprimirClase(e,t,i){doPrint(e,t)}function quitarLibroPrescripcion(e,t,i,n){getAJAX("/LMS/ajax.php?op=eschPaperBookPrescriptions.quitarLibroPrescripcion&id="+e+"&nivel="+t+"&asignatura="+i+"&centro="+n,function(e){if(e.startsWith("OK")){location.reload()}else{alert("ERROR",e.substring(5))}})}function aceptarRechazarPrescripcion(e,i,t,n){function realizaLlamadaAjax(t){getAJAX("/LMS/ajax.php?op=eschPaperBookPrescriptions.cambiarEstadoLibro&id="+i+"&acc="+t,function(e){if(t=="OK"&&e.startsWith("OK")){$("#btn"+i).parent().parent().parent().addClass("selected")}else if(t=="KO"&&e.startsWith("OK")){location.reload()}else{alert("Error")}})}if(!$(e).prop("checked")){if(confirm(textweb("confirm_remove_book_prescriptions_course_selected"))){realizaLlamadaAjax("KO")}else{$(e).prop("checked","checked")}}else realizaLlamadaAjax("OK")}function confirmarPrescripcionCentro(e){if($(".listadomochila  .listrecords_item .checkbox-list").length>0&&!$(".listadomochila :checked").length>0){alert(textweb("error_sin_prescripciones"))}else{if(confirm(textweb("confirm_school_book_prescriptions"))){getAJAX("/LMS/ajax.php?op=eschPaperBookPrescriptions.confirmarPrescripcionCentro&id="+e,function(e){if(e.startsWith("OK")){location.reload()}else{alert("ERROR",e.substring(5))}})}}}function abrirPrescripcionCentro(e){getAJAX("/LMS/ajax.php?op=eschPaperBookPrescriptions.abrirPrescripcionCentro&id="+e,function(e){if(e.startsWith("OK")){location.reload()}else{alert("ERROR",respuesta.substring(5))}})}function sendPrescription(e){if(confirm(textweb("confirm_send_prescriptions")))getAJAX("/LMS/ajax.php?op=eschPaperBookPrescriptions.sendPrescription&id="+e,function(e){if(e.startsWith("OK")){alert(textweb("ask_prescriptions_ok"));location.reload()}else{alert(textweb("ask_prescriptions_error"))}})}function detallesLibroMochila(e,t,i,n){showMsgBox("","/LMS/msgbox.php?op=backpack.detallesMochila&id="+e+"&nvl="+t+"&asg="+i+"&idsch="+n,700)}function quitarLibroMochila(e,t,i,n){getAJAX("/LMS/ajax.php?op=backpack.quitarLibroMochila&id="+e+"&nivel="+t+"&asignatura="+i+"&centro="+n,function(e){if(e.startsWith("OK")){location.reload()}else{alert("ERROR",e.substring(5))}})}function aceptarRechazarLibro(e,i,n,a){function realizaLlamadaAjax(t){getAJAX("/LMS/ajax.php?op=backpack.cambiarEstadoLibro&id="+i+"&acc="+t,function(e){if(t=="OK"&&e.startsWith("OK")){$("#btn"+i).html(textweb("admin.global.editar"));$("#btn"+i).parent().parent().parent().addClass("selected");detallesLibroMochila(i,n,a)}else if(t=="KO"&&e.startsWith("OK")){location.reload()}else{alert("Error")}})}if(!$(e).prop("checked")){if(confirm(textweb("confirm_remove_course_selected")))realizaLlamadaAjax("KO");else{$(e).prop("checked","checked")}}else realizaLlamadaAjax("OK")}function confirmaMochila(e){if($(".listadomochila  .listrecords_item .checkbox-list").length>0&&!$(".listadomochila :checked").length>0){alert(textweb("error_sin_libros_mochila"))}else if(confirm(textweb("confirm_close_selection")))getAJAX("/LMS/ajax.php?op=backpack.confirmaMochila&id="+e,function(e){if(e.startsWith("OK")){location.reload()}else{alert("ERROR",e.substring(5))}})}function abrirMochila(e){getAJAX("/LMS/ajax.php?op=backpack.abrirMochila&id="+e,function(e){if(e.startsWith("OK")){location.reload()}else{alert("ERROR",respuesta.substring(5))}})}function pedirLicencias(e){if(confirm(textweb("confirm_ask_licenses")))getAJAX("/LMS/ajax.php?op=pedirLicencias&id="+e,function(e){if(e.startsWith("OK")){alert(textweb("ask_licenses_ok"));location.reload()}else{alert(textweb("ask_licenses_error"))}})}function cambiaVisibilidad(e,t){var i=false;if(t=="S"&&confirm(textweb("confirm_oculta_grupo")))i=true;if(!(t=="S")&&confirm(textweb("confirm_muestra_grupo")))i=true;if(i){getAJAX("/LMS/ajax.php?op=group.cambiaVisibilidad&id="+e,function(e){if(e.startsWith("OK")){location.reload()}else{alert(textweb("ask_licenses_error"))}})}}function gestionaLibrosProfesor(e){showMsgBox("","/LMS/msgbox.php?op=user.gestionaLibrosProfesor&id="+e,550)}function conectarModuloExterno(modulo,origen){blink.theme.spinner.show();var params=getUrlParameters();var bd=false;var idcentro=false;var ltistatus=false;var url="/LMS/ajax.php?op=externalIntegration.conectar&nombre="+modulo+"&origen="+origen;if(params&&params.hasOwnProperty("bd")){bd=params["bd"]}if(params&&params.hasOwnProperty("idcentro")){idcentro=params["idcentro"]}if(params&&params.hasOwnProperty("ltistatus")){ltistatus=params["ltistatus"]}url+=bd?"&bd="+bd:"";url+=idcentro?"&idcentro="+idcentro:"";url+=ltistatus?"&ltistatus="+ltistatus:"";blink.ajax(url,function(resp){if(resp.startsWith("OK")){blink.theme.spinner.hide()}else if(resp.startsWith("<script>")){resp=resp.substring(8,resp.length-11).trim();eval(resp)}},{withCredentials:true},{urlMode:"noDijest"})}function desconectarModuloExterno(e){blink.theme.spinner.show();getAJAX(WEBS+"/LMS/ajax.php?op=externalIntegration.desconectar&nombre="+e,function(e){if(e.startsWith("OK")){location.reload()}else{blink.theme.spinner.hide()}})}blink.domain=blink.domain||{};blink.domain.getDownloadingText=function(e,t){return e+" "+t+"%"};blink.domain.doLoginError=function(){_showAlert(textweb("login_campos_vacios"));return false};blink.domain.writeScriptOffline=function(e,t,i,n,a,r,o,s,l){var c="",u=new Date,d=$.datepicker.formatDate("dd-mm-yy",u),f="";if(s!==""&&$.isArray(s)){f=", 'estado_transparencias':'"+s.join(",")+"'"}c="actividades["+idclase+"] = {'idtema':'"+idtema+"','tipo':'"+evaltype+"','estado':"+e+",'avance':'"+t+"','nota':'"+i+"','clasificacion':'"+n+"','fecha':'"+d+"','tiempo':'"+a;_.each(o,function(e,t){c+="', 'clasificacion_eje"+t+"':'"+o[t]});c+="'"+f+",'fecha_modificacion':'"+d+"','fecha_timestamp':'"+r+"'};";return c};function generateAutocomplete(a,r,i,n,o,t,e){if(!a||$("#"+i).length===0||$("#"+n).length===0)return false;if(typeof t==="undefined"||!t)t=50;if(typeof o!=="function")o=false;$("#"+i).change(function(){if(!$(this).val().trim()){$("#"+n).val("")}}).blinkcomplete({minLength:typeof e!=="undefined"&&e?e:5,source:function(e,t){var i=typeof r==="object"&&r?r:{};var n={data:$.extend({term:e.term},i)};blink.getJSON(a,t,n)},getItemLine1:function(e){return e.value},getItemLine2:function(e){return e.text},getItemWidth:function(e){return t},open:function(e,t){$(".ui-autocomplete").css("z-index",50);$(".ui-autocomplete").css("width",$("#"+i).outerWidth(true))},select:function(e,t){if(t.item.id!=0){$("#"+i).val(t.item.value);$("#"+n).val(t.item.id);if(o!=false){o(t.item)}}else{$("#"+i).val("")}return false}});return true}if(!Array.prototype.indexOf){Array.prototype.indexOf=function(e){return $.inArray(this,e)}}if(!String.prototype.includes){String.prototype.includes=function(){"use strict";return String.prototype.indexOf.apply(this,arguments)!==-1}}if(!String.prototype.contains){String.prototype.contains=function(){return String.prototype.indexOf.apply(this,arguments)!==-1}}if(!Array.prototype.contains){Array.prototype.contains=function(e){return this.indexOf(e)!=-1}}if(!String.prototype.startsWith){String.prototype.startsWith=function(e){return this.match("^"+e)==e}}if(!String.prototype.endsWith){String.prototype.endsWith=function(e){return this.match(e+"$")==e}}if((!window.JSON||!JSON.stringify||!JSON.parse)&&window.YAHOO){if(!window.JSON)window.JSON={};window.JSON.stringify=window.YAHOO.lang.JSON.stringify;window.JSON.parse=window.YAHOO.lang.JSON.parse}Array.prototype.longerContent=function(){var e=trim(this[0]);for(var t=1;t<this.length;t++){if(trim(this[t]).length>e.length)e=this[t]}return e};Array.prototype.maxLength=function(){return this.longerContent().length};Array.prototype.max=function(){var e=this[0];var t=this.length;for(var i=1;i<t;i++)if(this[i]>e)e=this[i];return e};Array.prototype.exists=function(e){for(var t=0;t<this.length;t++){if(this[t]==e)return true}return false};Array.prototype.findIndex=function(e){for(var t=0;t<this.length;t++){if(this[t]==e)return t}return-1};Array.prototype.rotate=function(){var i=Array.prototype.push,n=Array.prototype.splice;return function(e){var t=this.length>>>0,e=e>>0;e=(e%t+t)%t;i.apply(this,n.call(this,0,e));return this}}();if(!Array.prototype.from){Array.prototype.from=function(){var t=Object.prototype.toString;var c=function(e){return typeof e==="function"||t.call(e)==="[object Function]"};var i=function(e){var t=Number(e);if(isNaN(t)){return 0}if(t===0||!isFinite(t)){return t}return(t>0?1:-1)*Math.floor(Math.abs(t))};var u=function(e){var t=i(e);return t>>>0};return function from(e){var t=this;var i=Object(e);if(e==null){throw new TypeError("Array.from requires an array-like object - not null or undefined")}var n=arguments.length>1?arguments[1]:void undefined;var a;if(typeof n!=="undefined"){if(!c(n)){throw new TypeError("Array.from: when provided, the second argument must be a function")}if(arguments.length>2){a=arguments[2]}}var r=u(i.length);var o=c(t)?Object(new t(r)):new Array(r);var s=0;var l;while(s<r){l=i[s];if(n){o[s]=typeof a==="undefined"?n(l,s):n.call(a,l,s)}else{o[s]=l}s+=1}o.length=r;return o}}}if(!Array.from){Array.from=function(){var t=Object.prototype.toString;var c=function(e){return typeof e==="function"||t.call(e)==="[object Function]"};var i=function(e){var t=Number(e);if(isNaN(t)){return 0}if(t===0||!isFinite(t)){return t}return(t>0?1:-1)*Math.floor(Math.abs(t))};var n=Math.pow(2,53)-1;var u=function(e){var t=i(e);return Math.min(Math.max(t,0),n)};return function from(e){var t=this;var i=Object(e);if(e==null){throw new TypeError("Array.from requires an array-like object - not null or undefined")}var n=arguments.length>1?arguments[1]:void undefined;var a;if(typeof n!=="undefined"){if(!c(n)){throw new TypeError("Array.from: when provided, the second argument must be a function")}if(arguments.length>2){a=arguments[2]}}var r=u(i.length);var o=c(t)?Object(new t(r)):new Array(r);var s=0;var l;while(s<r){l=i[s];if(n){o[s]=typeof a==="undefined"?n(l,s):n.call(a,l,s)}else{o[s]=l}s+=1}o.length=r;return o}}()}if(typeof Object.create!="function"){(function(){var t=function(){};Object.create=function(e){if(arguments.length>1){throw Error("Second argument not supported")}if(e===null){throw Error("Cannot set a null [[Prototype]]")}if(typeof e!="object"){throw TypeError("Argument must be an object")}t.prototype=e;return new t}})()}blink.String=function(){var t=function(e){if(!(this instanceof t))return new t(e);this._wrapped=""+e};t.prototype.value=function value(){return this._wrapped};t.prototype.trim=function(){if(String.prototype.trim){this._wrapped=this._wrapped.trim()}else{var e=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;this._wrapped=this._wrapped.replace(e,"")}this._wrapped=this._wrapped.replace(/ +(?= )/g,"");return this};t.prototype.removePunctuation=function(){this._wrapped=this._wrapped.replace(/([\.,\/#¡!$%\^&\*;:{}\-_~()¿?\[\]]+)/g," ");this.trim();return this};t.prototype.replaceEspaciosBlancos=function(){this._wrapped=this._wrapped.replace(/\s/g,"");this.trim();return this};t.prototype.lower=function(){this._wrapped=this._wrapped.toLowerCase();return this};return t}();blink.Url=function(){var t=function(e){var t={};if(e.length===0){return t}if(e[0]==="?"){e=e.substring(1)}var i;e.split("&").forEach(function(e){i=e.split("=");t[i[0]]=i[1]});return t};var i=function(e){var t="?",i=[];for(var n in e){i.push(n+"="+e[n])}return t+i.join("&")};var n=function(e){e.search=i(e.params);return e.href};var a=function(e){if(!(this instanceof a))return new a(e);var i=document.createElement("a");i.href=e;i.params=t(i.search);this.getParams=function(){return i.params};this.setParam=function(e,t){i.params[e]=t;return this};this.getParam=function(e){return i.params[e]};this.removeParam=function(e){delete i.params[e];return this};this.getUrl=function(){return n(i)}};return a}();function noenter(){return!(window.event&&window.event.keyCode==13)}function checkEnter(e){var t=window.event?window.event.keyCode:e.which;return t==13}function keyPressNumerico(e){var t=window.event?window.event.keyCode:e.which;var i=String.fromCharCode(t);reg=/\d/;return reg.test(i)||t>=48&&t<=57||t>=96&&t<=105||("|"+allowedSpecialCodes.join("|")+"|").indexOf("|"+t+"|")!=-1}function checkPressNumerico(e){var t=e.keyCode;var i=String.fromCharCode(t);reg=/\d/;return reg.test(i)||t>=48&&t<=57||t>=96&&t<=105||("|"+allowedSpecialCodes.join("|")+"|").indexOf("|"+t+"|")!=-1}function stripHTML(e,t){var i=/(<([^>]+)>)/gi;if(t==null)t="";if(e!==undefined){return e.replace(i,t)}}function mostrarMensajesPersonalizados(){return false}function escapeHtml(e){if(e!==undefined&&e!==""){return e.replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&#39;/g,"'").replace(/&nbsp;/g," ")}else return""}function escapeQuotes(e){if(!e)return"";return e.replace(/'/g,"&#39;").replace(/"/g,"&quot;")}function addSlashes(e){if(!e)return"";return e.replace(/'/g,"'").replace(/"/g,'"')}function compressXML(e){e=e.replace(/\n/gi,"");e=e.replace(/>(\s{2,})</gi,"><");return e}function trim(e,t){return ltrim(rtrim(e,t),t)}function ltrim(e,t){if(e==undefined)return"";t=t||"\\s";return e.replace(new RegExp("^["+t+"]+","g"),"")}function rtrim(e,t){if(e==undefined)return"";t=t||"\\s";return e.replace(new RegExp("["+t+"]+$","g"),"")}function clean(e){var t="\\t\\n\\r\\0\\x0B";e=e.replace(new RegExp("["+t+"]+","g"),"");e=trim(e);e=rtrim(e,".,");var i=/\s+/g;e=e.replace(i," ");return e}function cleanWhites(e){e=e.replace(/ /g,"");return e}function replaceAccents(e){var t={"à":"à","è":"è","é":"é"};var i=new RegExp(Object.keys(t).join("|"),"gi");return e.replace(i,function(e){return t[e]})}function limitarString(e,t){if(e.length>t)return e.substr(0,t)+"...";else return e}function pintaDosCifras(e){return(e<10?"0":"")+e}function isJSON(e){e=typeof e!=="string"?JSON.stringify(e):e;try{e=JSON.parse(e)}catch(e){return false}return typeof e==="object"&&e!==null}function json_encode(e){return JSON.stringify(e)}function json_decode(e,t){t=typeof t==="undefined"?true:t;if(!isJSON(e)&&t&&typeof Rollbar!=="undefined"){Rollbar.error("Decode de un JSON mal formado: "+e)}return JSON.parse(e)}function encode_utf8(e){return unescape(encodeURIComponent(e))}function decode_utf8(e){return decodeURIComponent(escape(e))}function getCookie(e){var t=document.cookie;var i=t.indexOf(" "+e+"=");if(i==-1){i=t.indexOf(e+"=")}if(i==-1){t=""}else{i=t.indexOf("=",i)+1;var n=t.indexOf(";",i);if(n==-1){n=t.length}t=decodeURIComponent(t.substring(i,n))}return t}function setCookie(e,t,i){var n=new Date;n.setDate(n.getDate()+i);var a=encodeURIComponent(t)+(i==null?"":"; expires="+n.toUTCString());document.cookie=e+"="+a}function isOrientationPortrait(){return $(window).height()>$(window).width()}function isOrientationLandscape(){return $(window).width()>$(window).height()}function rgb2hex(e){if(/^#[0-9A-F]{6}$/i.test(e))return e;e=e.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);var t=function(e){return("0"+parseInt(e).toString(16)).slice(-2)};return"#"+t(e[1])+t(e[2])+t(e[3])}function hex2rgb(e){var t=e>>16;var i=e>>8&255;var n=e&255;return[t,i,n]}function hex2dec(e){if(e.length==3)e=e.charAt(0)+e.charAt(0)+e.charAt(1)+e.charAt(1)+e.charAt(2)+e.charAt(2);return parseInt(e,16)}function isValidHex(e){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(e)}function _ago(e){cur_tm=(new Date).getTime();tm=new Date(e).getTime();dif=cur_tm-tm;lngh=[60,3600,86400,604800,2630880];for(v=lngh.length-1;v>=0&&(no=dif/lngh[v]/1e3)<=1;v--);if(v<0)v=0;no=Math.floor(no);x=no+" "+textweb("mensaje_"+(v+3));return x}function isValidSHA1(e){return!!e.match("[a-fA-F0-9]{40}")}function isInt(e){return Number(e)===e&&e%1===0}function isFloat(e){return Number(e)===e&&e%1!==0}function toggleClasses(e,t,i){t=t.replace(".","");i=i.replace(".","");var n=$(e);if(n.hasClass(t)){n.removeClass(t).addClass(i);return true}else if(n.hasClass(i)){n.removeClass(i).addClass(t);return true}else return false}function getCondicionAlumnosCorreccion(e){return'.item[data-tema="'+e+'"]'}function mostrarAlertaPersonalizada(t){try{var e=JSON.parse(t);if(e&&typeof e==="object"){t='<span class="customAlertTitle"> '+e.title+"</span>";t+='<span class="customAlertMessage"> '+e.message+"</span>"}}catch(e){return t}return t}function frecuencyRandJS(e,t,i){if(!e)return false;t=t==undefined?0:t;i=i==undefined?100:i;var n=Math.floor(Math.random()*(i-t+1))+t;if(n<=e)return true;else return false}function compareDates(e,t,i,n){var a=["<","<=",">",">=","=="];if(!a.includes(t))return false;var r=n!==undefined?n.split(" "):null;if(r){var o=parseInt(r[0]);var s=r[1];switch(s){case"day":i=i.setDate(i.getDate()+o);break;case"month":i=i.setDate(i.getMonth()+o);break;case"year":i=i.setDate(i.getFullYear()+o);default:i=i.setDate(i.getDate()+o)}}switch(t){case"<":return e<i;break;case"<=":return e<=i;break;case">":return e>i;break;case">=":return e>=i;break;case"==":return e==i;break;default:return false}return null}function registryDateTextWeb(e){var t=typeof OFFLINE_ENGINE!==undefined?true:false;function toAjax(){blink.ajax("/LMS/ajax.php?op=utils.registryDateTextWeb&param="+e,function(e){},{data:"",async:false},{urlMode:"noDijest"})}try{toAjax()}catch(e){setTimeout(function(){toAjax()},1e3)}}function showModalError(e,t,i){var n=$("#remote-alert-modal-green");var a='<ul><li><div class="number"><i class="fa fa-warning"></i></div><h4>';if(typeof e!=="undefined"&&e.trim()!==""){a+=e}a+="</h4></li></ul>";if(typeof t!=="undefined"&&t.trim()!==""){a+='<p><div class="text">'+t+"</div></p>"}blink.theme.showHelperModal(n,a);blink.theme.showMask("white");if(typeof i!=="undefined"&&i!==null&&i!==""){n.on("hidden.bs.modal",function(){i()})}}function textweb(e,t){var i=null;var n=null;if(window.supportsStyleTextwebOverload){if(window.currentStyle){i=currentStyle}else if(blink.courseInfo&&blink.courseInfo.originalStyleName){i=blink.courseInfo.originalStyleName}if(i){if(n=rawTextweb(i+"_"+e)){return n}}}return rawTextweb(e,t)}function rawTextweb(e,t){var i=typeof PROB_REGISTRY_USE_TEXTWEB!=="undefined"&&PROB_REGISTRY_USE_TEXTWEB>=0&&(typeof PROB_REGISTRY_USE_TEXTWEB_RANG!=="undefined"&&PROB_REGISTRY_USE_TEXTWEB_RANG!="");var n=i?frecuencyRandJS(PROB_REGISTRY_USE_TEXTWEB):false;if(n){var a=text_web[e]["DATE_LAST_USE"]=="0000-00-00 00:00:00"?new Date("1970"):new Date(text_web[e]["DATE_LAST_USE"]);var r=new Date;if(compareDates(a,"<",r,PROB_REGISTRY_USE_TEXTWEB_RANG)){registryDateTextWeb(e)}}var o=i&&(typeof text_web[e]!==undefined&&typeof text_web[e]==="object")&&text_web[e]["TEXT"]?text_web[e]["TEXT"]:text_web[e];if(typeof t!=="undefined"){o=vsprintf(o,t)}return o}function vsprintf(e,t){var n=/(%s)/;for(i=0;i<t.length;i++){var a=n.exec(e);if(a!==null&&a[1]==="%s"){e=e.substr(0,a.index)+t[i]+e.substr(a.index+a[1].length,e.length)}}return e}function checkFormatValid(e,t){var i=false;var n={url:/(https?|ftp):\/\/[^\s/$.?#].[^\s]*/g};if(typeof t!=="undefined"&&t!==null&&t!==""&&t in n){i=e.match(n[t])?true:false}return i}function formatoTitulosExcel(e,t){var n=e.split(/\s|-|_/),a="";for(i=0;i<n.length;i++){if(a.length+n[i].length>t)break;a=a+n[i]}return rtrim(a,/\s|-|_|,|\.|:|;/)}function changeToBytes(e){var t=false;if(typeof e!=="undefined"&&typeof e==="string"){var i=e.split(" ");if(i.length>1){var n=i[1];var a=parseFloat(i[0]);if(!isNaN(a)){switch(n){case"KB":t=a*1024;break;case"MB":t=a*1024*1024;break;case"GB":t=a*1024*1024*1024;break;case"TB":t=a*1024*1024*1024*1024;break}}}}return t}function setJsTitles(){$("[data-titlejs]:not(title)").each(function(){var e=$(this);if(this.offsetWidth<this.scrollWidth){e.attr("title",e.attr("data-titlejs"))}})}function finSeleccionarImagenSlide(e,t){var i="files.getfilemultimedia",n=encodeURIComponent(e),a=window.nameAppSeleccionarMultimedia||"slide",r=window.idAppSeleccionarMultimedia||window.idtransact,o="/LMS/ajax.php?op="+i+"&filename="+n+"&app="+a+"&appid="+r,s,l;if(t){s=MEDIA_URL+"/ctx/a/"+blink.activity.id+"/r/s/"+r+"/"+e.ruta;l=e.name}else if(typeof e=="string"){blink.ajax(o,function(e){var t="NEWURLS";if(e.startsWith("OK")&&e.length>2&&e.indexOf(t)!=-1){var i=e.substr(e.indexOf(t)+t.length),n=i.indexOf("|");s=i.substr(0,n);l=i.substring(i.lastIndexOf("/")+1)}},{async:false})}else{blink.log.warning("finSeleccionarImagenSlide: Error en la subida de la imágen")}l&&blink.theme.insertarImagenSlide({ruta:s,file:l});return closeMsgBox()}function orderAssociativeArray(r,o){if(typeof r==="undefined"&&!r){return false}if(typeof o==="undefined"&&!o){o="asc"}return function(e,t){if(!e.hasOwnProperty(r)||!t.hasOwnProperty(r)){return 0}var i=typeof e[r]==="string"?e[r].toLowerCase().removeAccents():e[r];var n=typeof t[r]==="string"?t[r].toLowerCase().removeAccents():t[r];var a=0;if(i>n){a=1}else if(i<n){a=-1}return o==="desc"?a*-1:a}}function isset(e){if(typeof e!=="undefined"){return true}else{return false}}function isEmptyJSON(e){for(var t in e){return false}return true}function dataURIToBlob(e){var t=atob(e.split(",")[1]),i=t.length,n=new Uint8Array(i),a=e.split(",")[0].split(":")[1].split(";")[0];for(var r=0;r<i;r++){n[r]=t.charCodeAt(r)}return new Blob([n],{type:a})}function openFileBase64(e){if(typeof e!=="undefined"&&e){try{var t=JSON.parse(e);if(!isEmptyJSON(t)){var i=$("<a>");var n=dataURIToBlob(t.data);var a=URL.createObjectURL(n);i.attr("href",a);$("body").append(i);i.attr("download",t.name);i[0].click();i.remove()}}catch(e){_showAlert(textweb("error_general_AJAX"));console.error(e)}return true}return false}var fullmaskmode=true;var openNewIframeTag="new://";var iframe={};function hideHTMLOverflow(){blink.theme.hideHTMLOverflow()}function restoreHTMLOverflow(){blink.theme.restoreHTMLOverflow()}function showMask(e,t){blink.theme.showMask(e,t)}function hideMask(){blink.theme.hideMask()}function resizeMask(){callOfflinePCParent("events.mask.onResize");var e=$(document.body).attr("scrollWidth")?$(document.body).attr("scrollWidth"):0;var t=$(document.body).attr("scrollHeight")?$(document.body).attr("scrollHeight"):0;if(fullmaskmode){$("#background").css({height:Math.max($(document).height(),t,$(window).height()),width:Math.max($.browser.msie?0:$(document).width(),e,$(window).width()),"margin-top":0})}else{var i=$(".cabecera_peq").height()+$(".menu_gris").height();$("#background").css({height:Math.max($(document).height(),t,$(window).height())-i,width:Math.max($.browser.msie?0:$(document).width(),e,$(window).width()),"margin-top":i})}}var abrirEnPopup=false;var windowPopup;var allowed_external_urls_iframe=["youtube.com/embed/","vimeo.com/"];var allowed_exts_iframe=["swf","png","jpeg","jpg","gif"];function allowUrlInIframe(e){if(!isURLAllowedByProtocol(e))return false;if(isBlinkHost(e)||isLocalHost(e)||isCacheHost(e))return true;for(var t=0;t<allowed_external_urls_iframe.length;t++){if(e.contains(allowed_external_urls_iframe[t]))return true}if(!isExternalURL(e))return true;if(allowed_exts_iframe.length>0){var i=new RegExp("\\.("+allowed_exts_iframe.join("|")+")$","i");if(deleteQuery(e).match(i))return true}return false}function shouldShowUrlInIframe(e){if(!allowUrlInIframe(e))return false;var t=getMediaType(e);return $.inArray(t,["image","flash","video","sound"])!=-1}function shouldOpenUrlNewIframe(e){return e.indexOf(openNewIframeTag)!==-1}function removeOpenNewIframeTag(e){return e.split(openNewIframeTag)[1]}function showIFrame(e,t,i,n,a,r,o,s){if(typeof s==="undefined"||typeof s!=="undefined"&&s){cerrarIframe()}if($(".body_clase:not(.edit) .navbar.libro").length>0)$(".body_clase:not(.edit) .navbar.libro").removeClass("popover_resources_active");callOfflinePCParent("events.popup.onBeforeShow");if(e!=null&&!r){if(offline&&e.match(/^https?:\/\//)){}else if(modoVisualizacion==2&&e.indexOf("/coursePlayer/webclass_html_.htm")!=-1){if(e.startsWith("/"))e=".."+e}else{if(e.indexOf("/coursePlayer/webclass_html_.htm")==-1)e=adjustURL(e,false)}if(e.indexOf("idalumno=")===-1&&blink.user.esPadre()&&typeof idalumno!=="undefined"&&idalumno){e=addParamUrl(e,"idalumno",idalumno)}e=getFinalUrl(e)}iframe.dims={w:t,h:i};resizeIframe();var l=$(window).height()-40;var c=$(window).width()-80;i=i?Math.min(i,l):l;t=t?Math.min(t,c):c;if(abrirEnPopup){windowPopup=window.open(e,"ActBlink","width="+t+",height="+i+",status=0");windowPopup.moveTo(0,0)}else if(e!=null&&!allowUrlInIframe(e)){openPopup(e)}else{showMask();var u={width:parseInt(t),height:parseInt(i)};var d=$("#class_iframe").hide();var f=$("#iframe_div").attr("style","").css(u);n?f.show():f.fadeIn();var p=getFinalPosition(u);var h=function(){if(!e){return}if(o&&o.fullscreen){$("body").addClass("iframe-shown");u.width="100%";u.height="100%"}d.css(u).attr("src",e).show().showBlink().on("load",function(e){try{if($("#class_iframe").contents().text()!=="ERROR"){if($("#iframe_div").data("isAnswerKey")==true&&blink.theme.adaptAnswerKeysIframe&&typeof blink.theme.adaptAnswerKeysIframe!=="undefined"){blink.theme.adaptAnswerKeysIframe();f.css("opacity",1)}$body=d.contents().find("body");if(a)d.contents().find("html").css("overflow","hidden");else $body.css({margin:0,padding:0});if($body.find(" > *").length==1&&$body.find(" > img").length){$body.css("text-align","center")}$body.find("#contenedor_slides").css("margin-left","-30px");$body.find(".cabecera_peq, .paginador_temas, .pie_blanco").hide();$body.find(".contenidos, .contenidos2, .contenidos3").css({width:"970px","min-width":"970px"});if(modoVisualizacionLabel==="standalone"){$body.find(".close-back-wrapper").remove()}}else{hideIFrame();showOKOrErrorMsg("Error",textweb("url_no_disponible"));e.preventDefault();e.stopImmediatePropagation()}}catch(e){}});blink.events.trigger("iframe:show:after")};var m={top:p.fintop,left:p.finleft,width:t,height:i,position:"fixed"};if($("#iframe_div").data("isAnswerKey")==true&&blink.theme.adaptAnswerKeysIframe&&typeof blink.theme.adaptAnswerKeysIframe!=="undefined"){$.extend(m,{opacity:0})}if(o&&o.behaviour=="video"){d.css("background-color","black")}if(e!=null&&getQueryParamValue("popup",e)){var g=getQueryParamValue("popup",e);if(parseInt(g)>1){f.find(".btn-close-iframe").addClass("inside-close-btn");if(parseInt(g)===2){m.width="100%";m.height="100%";m.top="0px";m.left="0px";f.find(".inside-close-btn").css("bottom","0px")}}}if(n){f.css(m);h()}else{f.animate(m,"fast","swing",function(){h()})}}}function resizeIframe(){var e=$("#iframe_div").hasClass("panel");var t=blink.windowWidth-80;var i=blink.windowHeight-(blink.isApp&&!blink.isOfflinePC?0:$(".navbar").css("display")=="none"?0:$(".navbar").innerHeight());iframe.dimsCalc={h:typeof iframe.dims!=="undefined"&&iframe.dims.h&&blink.isApp?Math.min(iframe.dims.h,i):i,w:typeof iframe.dims!=="undefined"&&iframe.dims.w?Math.min(iframe.dims.w,t):t};var n=iframe.dimsCalc;var a=$("#class_iframe").attr("src");if(a&&parseInt(getQueryParamValue("popup",a))===2){$("#iframe_div").css({width:"100%",height:"100%"})}else{var r={width:parseInt(n.w),height:parseInt(n.h)};var o=getFinalPosition(r);var s=e?500:r.width;var l={top:o.fintop,left:o.finleft,width:s,height:r.height};if($("#multimedia_iframe").children(".audio").length<=0){$("#iframe_div").css(l);$("#class_iframe").css(l);if($("#multimedia_iframe").length>0)$("#multimedia_iframe").css(l)}}if(typeof $(".navbar")[0]!=="undefined"){var c=window.getComputedStyle($(".navbar")[0],":after")}var u=$(".navbar").length>0?$(".navbar").css("display")=="none"?0:parseInt($(".navbar").css("height"),10):44;if(blink.isApp&&!blink.isOfflinePC)u=0;u=esMarsupial&&offline?0:parseInt($("#libro-digital").css("margin-top"))||u;if(!$(".modo_revision").hasClass("hidden")&&$("#libro-digital").length>0){u=0}if($("#t0_iframe").length>0){l.left=0;$("#t0_iframe").css(l);var d=($(".navbar").length>0&&$(".navbar").css("display")!="none"?parseInt($(".navbar").css("height"),10):u)+parseInt($("#libro-digital").css("margin-bottom"))+($(".modo_revision").hasClass("hidden")?0:$(".modo_revision").height());d+=typeof c!=="undefined"&&c!==null&&c.height!==null&&c.height!=="auto"?parseInt(c.height):0;if(blink.isIos){var f={top:0,left:"0px",width:"100%",height:r.height,"-webkit-overflow-scrolling":"touch","overflow-y":"scroll",position:"fixed"};var p={top:"0px",left:"0px",width:"100%",height:"100%"};$("#libro-digital").css(f);$("#t0_iframe").css(p)}else{$("#t0_iframe").height(getDocumentHeight()-d);$("#t0_iframe").width(getDocumentWidth())}if($(".navbar").length>0){blink.theme.setTopByHeight(".navbar","#t0_iframe")}$("#t0_iframe").css("top",parseInt($("#t0_iframe").css("top"),10)+($(".modo_revision").hasClass("hidden")?0:$(".modo_revision").height()))}if($("#iframe_div").data("isAnswerKey")==true&&blink.theme.adaptAnswerKeysIframe&&typeof blink.theme.adaptAnswerKeysIframe!=="undefined"){blink.theme.adaptAnswerKeysIframe()}}function getDocumentWidth(){return window.innerWidth?window.innerWidth:document.documentElement.clientWidth}function getDocumentHeight(){return window.innerHeight?window.innerHeight:document.documentElement.clientHeight}function hideIFrame(e){if(abrirEnPopup){if(typeof windowPopup!=="undefined"&&windowPopup)windowPopup.close()}else{if(_vieneDeModoContinuo){_vieneDeModoContinuo=false;conmutarModoContinuo()}blink.events.trigger("iframe:hide:before");removeItems(e);blink.events.trigger(true,"iframe:hide:after");callOfflinePCParent("events.popup.onAfterHide")}}function removeItems(e){hideMask();blink.theme.removeVideoJS($("#iframe_div"),true);if(typeof e!=="undefined"&&e!==null){blink.theme.removeVideoJS($("#"+e+"_multimedia"),true)}$("#iframe_div").removeClass("audio panel image scorm");$("#iframe_div, #iframe_div iframe, #multimedia_iframe, #class_iframe").stop(true).attr("style","display:none");$("#iframe_div iframe, #class_iframe").attr("src","about:blank");$(".btn-close-iframe").find("h4").remove();$("#multimedia_iframe").html("");$("body").removeClass("iframe-shown");getQueryParamValue("popup")==2&&blink.theme.buttonState.hidden(".close-back",true);$("#iframe_div").find(".btn-close-iframe").removeClass("inside-close-btn")}function getFinalPosition(e){return blink.theme.getFrameFinalPosition(e)}function cerrarIframe(e){$("#iframe_div").find(".btn-close-iframe").showBlink();$("#iframe_div").data("isAnswerKey",false);hideIFrame(e);return false}function setMsgBoxTitle(e){blink.theme.setMsgBoxTitle(e)}function showMsgBox(e,t,i,n,a,r){callOfflinePCParent("events.popup.onBeforeShow");if(t.indexOf("text:")!==0&&t.indexOf("template:")!==0){if(offline){}else t=adjustURL(t,false)}if(i==null)i="771";if(a==null)a=true;blink.theme.showMsgBox(e,t,i,n,a,r)}function showOKOrErrorMsg(e,t){blink.theme.showOKOrErrorMsg(e,t)}function showWarningMsg(e,t){blink.theme.showWarningMsg(e,t)}function showOKOrErrorAJAXMsg(e,t){if(e.startsWith("OK")){if(t)redireccionar(t);return}else if(e.startsWith("ERROR")){errormsg=e.substring(5);if(errormsg=="")errormsg=textweb("error_general_AJAX");_showAlert(errormsg)}}function closeMsgBox(){blink.theme.closeMsgBox()}function submitMsgBox(){$("#background").fadeOut("slow");getMsgBoxFromURL(document.forms["dlgForm"].action)}function openPopup(e,t){e=getFinalUrl(e);var i=window.open(e,t);i&&i.focus();return i||false}function maxZIndex(e){e=e||"*";var t=0;$(e).each(function(){if($(this).css("zIndex")!=="auto"&&$(this).css("zIndex")>t){t=$(this).css("zIndex")}});return t}$(document).ready(function(){if($("#libro-digital").length>0){if(blink.isSafari===true&&typeof esWeb!=="undefined"&&esWeb===true){$("html").height("100%");$("body").height("100%");$("#libro-digital").height("100%")}}});function addSound(e){var t=e.indexOf("_");var i=e.substring(2,t);editorNameMultimedia=e;var n=getFileAppDataFromEditorName(e);var a=n[0];var r=n[1];seleccionarMultimedia(idcurso,i,"finSeleccionarSonido",null,"sound",null,a,r)}function addVideo(e){var t=e.indexOf("_");var i=e.substring(2,t);editorNameMultimedia=e;var n=getFileAppDataFromEditorName(e);var a=n[0];var r=n[1];seleccionarMultimedia(idcurso,i,"finSeleccionarVideo",null,"video",null,a,r)}function addVideo2(e){var t=e.indexOf("_");var i=e.substring(2,t);editorNameMultimedia=e;var n=getFileAppDataFromEditorName(e);var a=n[0];var r=n[1];seleccionarMultimedia(idcurso,i,"finSeleccionarVideo2",null,"video",null,a,r)}function addFile(e,t){var i=e.indexOf("_");var n=e.substring(2,i);editorNameMultimedia=e;var a=getFileAppDataFromEditorName(e);var r=a[0];var o=a[1];if(blink.isApp){if(typeof app!=="undefined"&&app.version>=4.02){var t="finSeleccionarArchivo&inputGroup="+n+"&idAppSeleccionarMultimedia="+idclase,s="/LMS/ajax.php?op=uploadFile.upload&app_id="+idclase+"&idcurso="+idcurso+"&idclase="+idclase+"&activitytype=activity&activityID="+idclase+"&prefijoSeleccionMultimedia="+n+"&callback="+t+"&ref="+encodeURIComponent(null);blink.rest.saveImage(s,n,t)}else{_showAlert(textweb("error_version_app"))}}else{seleccionarMultimedia(idcurso,n,t?t:"finSeleccionarArchivo",null,"",null,r,o)}}function borrarSonidoFondo(){closeMsgBox();document.f.elements[prefijoSeleccionMultimedia+"_snd1v"].value="";document.getElementById(prefijoSeleccionMultimedia+"_snd1v_info").innerHTML="Sin sonido fondo";marcarHaCambiado(getIDSlideFromPrefijo(prefijoSeleccionMultimedia))}var soundOff=false;var funcPlay;var _useNativePlayer=true;var AudioArray=Array();try{var tryAudio=new Audio;_useNativePlayer=tryAudio.canPlayType&&"no"!=tryAudio.canPlayType("audio/mpeg")&&""!=tryAudio.canPlayType("audio/mpeg")}catch(e){_useNativePlayer=false}var buttonPlaying=0;function stopButtonPlaySoundPressed(){buttonPlaying=0;$("#mp3floatingplayer").hide()}function buttonPlaySoundPressed(e,t){if(buttonPlaying==e){stopButtonPlaySoundPressed()}else{if(blink.isApp&&!blink.isOfflinePCApp&&!blink.isWinRTApp){if(t.startsWith("../"))t=t.substr(2);if(!t.startsWith("/")&&!t.match(/^https?:\/\//)){t="/"+t}blink.rest.audio(t)}else{var i=$(".migas:visible");if(i.length>0){var n=$("#mp3floatingplayer");while(n.parent().attr("id")&&n.parent().attr("id").contains("mp3")){n=n.parent()}var a=i.prev().attr("id");if(!a||!a.contains("mp3")){n.detach().insertBefore(i)}}writeAudioPlayer("mp3floatingplayer",t,true);pauseBackgroundSound();buttonPlaying=e}}}function playSound(e,t){if(t){document.getElementById("mp3player").style.display="block"}try{var i=document.getElementById("mp3player_main");funcPlay=function(){_playSound(e,i)};setTimeout("funcPlay()",1e3)}catch(e){}}var lastBackgroundSound=null;function replayBackgroundSound(){if(lastBackgroundSound){playBackgroundSound(lastBackgroundSound)}return false}function playBackgroundSound(e){if(soundOff)return false;lastBackgroundSound=e;if(_useNativePlayer){for(var t=0;t<AudioArray.length;t++){if(AudioArray[t].urlobj==e){try{AudioArray[t].audioobj.currentTime=0}catch(e){}AudioArray[t].audioobj.play();return}}var i=new Audio;i.src=e;i.load();i.play();AudioArray.push({urlobj:e,audioobj:i})}else{return false}}function pauseBackgroundSound(){if(_useNativePlayer){for(var e=0;e<AudioArray.length;e++){AudioArray[e].audioobj.pause()}}}function pausePlayingAudio(){$("audio").each(function(){if(this.paused===false||this.currentTime!=0){this.pause();this.currentTime=0}})}function _playSound(e,t){if(!soundOff){try{t.SetVariable("player:jsUrl",e);t.SetVariable("player:jsPlay","")}catch(e){}}}function setVolumen(e){}function setSoundOn(e){soundOff=false;conmutarEstadoBoton("boton_sonido",true);if(e){setSessionAttribute("SONIDO","true")}setVolumen(100)}function setSoundOff(e){soundOff=true;conmutarEstadoBoton("boton_sonido",false);if(e)setSessionAttribute("SONIDO","false");if(_useNativePlayer){pauseBackgroundSound()}setVolumen(0)}function switchSound(e){soundOff?setSoundOn(e):setSoundOff(e);return false}function createAudioButtons(){blink.theme.createAudioButtons()}function writeAudioPlayerButton(e,t,i){return blink.theme.writeAudioPlayerButton(e,t,i)}function writeAudioPlayerButtonInfantil(e){blink.theme.writeAudioPlayerButtonInfantil(e)}var audioPlayerObj=null;var audioPlayerEnabled=true;function writeAudioPlayer(e,t,i,n,a){var r=e=="div_div_menu"?"2000":"420",o=e.startsWith("t")?e+"_multimedia":e,s=$("#"+o),l=!!i,n=n&&n.toString().replace(/\W/g,"_"),c=blink.theme;$("#iframe_div").find(".btn-close-iframe").hideBlink();if(!n){n="oldaudio"+Math.floor(Math.random()*1e3+1)}if(n){var u=""+'<audio id="'+n+'" class="video-js vjs-default-skin audio" controls>'+'<source src="'+t+'" type="audio/mp3"/>'+"</audio>";s.html(u).css("z-index",r).show();var d=c.audio.videojs(n,l);d.on("play",function(){c.audio.restartPlayers(this);c.audio.playing=this.id();c.video.playing=undefined}).on("ready",function(){audioPlayerEnabled=true;var e=this;this.play();if(blink.isIos||blink.isAndroid||blink.isApp){setTimeout(function(){e.addClass("vjs-has-started");e.hasStarted(true)},1)}else{e.addClass("vjs-has-started");e.hasStarted(true)}}).on("ended",function(){var e=true;if(typeof a!=="undefined"){e=a}if(e){hideIFrame()}});c.stopPropagationOnTouchstartButtons(d);blink.events.once("iframe:hide:before",function(){s.html("").hide();sonido_ultimo_id_abierto=0});blink.events.trigger(true,"multimedia:created");return d}if(!audioPlayerEnabled){return}audioPlayerEnabled=false}$(document).ready(function(){blink.events.on("iframe:hide:before",function(){audioPlayerObj&&audioPlayerObj.manualClose()})});function writeDocPlayer(e,t,i,n){var a=t.substring(t.lastIndexOf("/")+1);var r="../images/i/"+(a.indexOf(".zip")!=-1?"zip":"documentos")+".png";$("#"+e+"_multimedia").html((!n?"<a href='"+t+"' target='_blank'>":"")+"<img style='float:right;width:100%;max-height:"+i+"px;' src='"+r+"' "+"name='"+e+"_img1' id='"+e+"_img1' title='"+(!n?"Click to download ":"")+a+"'/>"+(!n?"</a>":""))}function writeImgPlayer(e,t,i,n,a,r,o){blink.theme.writeImgPlayer(e,t,i,n,a,r,o)}function writeOtherPlayer(e,t,i){$("#"+e+"_multimedia").html("<iframe frameborder='0' style='z-index:1;height:"+i+"px;width:100%;' scrolling='no' src='"+t+"' "+"name='"+e+"_img1' id='"+e+"_img1'/>");autozoomElement(e+"_img1")}function writeGeogebraPlayer(e,t,i){var n=e.startsWith("t")?e+"_multimedia":e;var a=800;var r=600;var o=$("#"+n).parent().parent().width();if(o==0)o=a;var s=o;if(i)s=i;$("#"+n).html("<div id='"+e+"_ggb'>"+"<script>"+"var params_"+e+' = {"appName": "classic",'+'"id": "'+e+'_ggb",'+'"showStartTooltip":true,'+'"showResetIcon":true,'+'"showAnimationButton": false,'+'"showFullscreenButton": true,'+'"enableFileFeatures":false,'+'"recalculateEnvironments":true,'+'"width": '+o+","+'"height": '+s+","+'"filename":"'+t+'"};'+"params_"+e+".appletOnLoad = function(api) {"+'blink.events.trigger("geogebraObject:loaded_'+e+'");'+"}; "+"if (!ggbApp) {var ggbApp = [];}"+'ggbApp["'+e+'"] = new GGBApplet("5.0", params_'+e+", true);"+'window.addEventListener("load", function() {'+'ggbApp["'+e+'"].setHTML5Codebase("../libs/geogebra/HTML5/5.0/web3d/");'+'ggbApp["'+e+'"].inject("'+e+'_ggb");'+"});"+"<\/script>"+"</div>");$("#"+n).show()}function createVideoButtons(){blink.theme.createVideoButtons()}function writeVideoPlayerButton(e,t,i,n){return blink.theme.writeVideoPlayerButton(e,t,i,n)}function writeVideoPlayerButtonInfantil(e){panel_videos=class_video.parents(".curso").find(".panel_videos");url=class_video.filter("img").attr("alt");idplayervideo=e.attr("id");if(panel_videos.html().indexOf(url)==-1){panel_videos.append('<div class="player_infantil"><a id="playervideo_'+idplayervideo+'" href="javascript:buttonPlaySoundPressed(\''+idplayervideo+"','"+url+"');\"><p>"+(true?"&nbsp;":idplayervideo)+"</p></a></div>");class_video.remove()}}function writeVideoPlayer(e,t,i,n,a,r,o,s){var l=e.startsWith("t")?e+"_multimedia":e,c=$("#"+l),o=o&&o.toString().replace(/\W/g,"_")+"-player",u=blink.theme.video,d=t.split("."),f=d[d.length-1];if(!o){o="oldvideo"+Math.floor(Math.random()*1e3+1)}if(o){var p=u.getMarkUp(o,t,c),h=!!a;if(c.find(".no-connection-video").length){c.append(p).show()}else{c.html(p).show()}if(!s||typeof s==="undefined"||s==""){$("#"+e+"_imagen_portada_video").val("")}var m=u.videojs(o,{autoplay:h,poster:s}).on("play",function(){if(f==="mov"&&blink.isFirefox){this.pause();this.reset();showModalError(textweb("error_format_mov"),"",function(){cerrarIframe()})}u.restartPlayers(this);u.startPlayerManually(this);u.playing=this.id();blink.theme.audio.playing=undefined});blink.theme.stopPropagationOnTouchstartButtons(m);return m}}function writeFlashPlayer(e,t,i){i=i||389;var n=e.startsWith("t")?e+"_multimedia":e;var a=n+"_aux";$("#"+n).html('<div id="'+a+'"></div>');swfobject.embedSWF(t,a,"100%",i,"9","",{},{allowfullscreen:"true",allowscriptaccess:"always",wmode:"transparent",bgcolor:"ffffff"});$("#"+n).show()}function addImage(e){var t=e.indexOf("_");var i=e.substring(2,t);editorNameMultimedia=e;var n=getFileAppDataFromEditorName(e);var a=n[0];var r=n[1];seleccionarMultimedia(idcurso,i,"finSeleccionarImagenEditor",null,"image",null,a,r)}function addPosterImage(e){var t=e.indexOf("_");var i=e.substring(2,t);editorNameMultimedia=e;var n=getFileAppDataFromEditorName(e);var a=n[0];var r=n[1];seleccionarMultimedia(idcurso,i,"finSeleccionarImagenPortadaVideo","borrarImagenPortadaVideo","image",null,a,r)}function addImageGallery(e){var t=e.indexOf("_");var i=e.substring(2,t);editorNameMultimedia=e;var n=getFileAppDataFromEditorName(e);var a=n[0];var r=n[1];seleccionarMultimedia(idcurso,i,"finSeleccionarImagenGaleria",null,"image",null,a,r)}function getPhotoSwipeDOM(){var e=blink.theme.styles[blink.activity.originalStyleName],t=e?new e:new blink.theme.styles["basic"];return t&&t.getPhotoSwipeDOM()}var galleryManager;function initPhotoSwipeFromDOM(e){var t=function(e){this.galleryDOMElements=[];this.galleryList=[];this.init(e)};t.prototype={parseThumbnailElements:function(e){var t=e.getElementsByTagName("figure"),i=t.length,n=[],a,r,o,s,l,c;for(var u=0;u<i;u++){a=t[u];if(a.nodeType!==1){continue}l=$(a).find("img");s={w:l.attr("width")?l.attr("width"):l.get(0).naturalWidth,h:l.attr("height")?l.attr("height"):l.get(0).naturalHeight};c={src:l.get(0).getAttribute("src"),w:parseInt(s.w,10),h:parseInt(s.h,10)};if(a.children.length>1){c.msrc=a.children[0].getAttribute("src");c.title=a.children[1].innerHTML}c.el=a;n.push(c)}return n},closest:function closest(e,t){return e&&(t(e)?e:this.closest(e.parentNode,t))},createPhotoSwipe:function(e,t,i){var n=t.getAttribute("data-pswp-uid"),o=document.querySelectorAll(".pswp")[parseInt(n)-1],a,r,s=[];s=this.parseThumbnailElements(t);r={index:e,galleryUID:n,getThumbBoundsFn:function(e){var t=s[e].el.getElementsByTagName("img")[0],i=window.pageYOffset||document.documentElement.scrollTop,n=t.getBoundingClientRect();var a={x:n.left,y:n.top+i,w:n.width};var r=o.parentElement.getBoundingClientRect();a.x-=r.left;a.y-=r.top;return a},pinchToClose:false,closeOnScroll:false,closeOnVerticalDrag:false,escKey:false,closeEl:false,tapToClose:false,clickToCloseNonZoomable:false,closeElClasses:[],fullscreenEl:true,zoomEl:false,shareEl:false,modal:false,closeOnScroll:false,history:false,getDoubleTapZoom:function(e,t){}};if(i){r.showAnimationDuration=0}a=new PhotoSwipe(o,PhotoSwipeUI_Default,s,r);a.listen("updateScrollOffset",function(e){var t=o.getBoundingClientRect();e.x+=t.left;e.y+=t.top});a.listen("launchZoom",function(){if(a.options.modal){a.options.modal=false;a.ui.showControls();a.options.barsSize.bottom=45;a.options.barsSize.top=45;o.style.position="absolute"}else{a.options.modal=true;a.ui.hideControls();a.options.barsSize.bottom=0;a.options.barsSize.top=0;o.style.position="fixed";$(o).one("tap",function(e){e.preventDefault();e.stopPropagation();a.shout("launchZoom")})}a.updateSize(true)});return a},addGallery:function(e){var t=this.galleryDOMElements.length+1;e.setAttribute("data-pswp-uid",t);this.galleryDOMElements.push(e);this.galleryList.push(this.createPhotoSwipe(t,e,true))},closeAllGalleries:function(){var i=this;_.each(this.galleryList,function(e,t){i.closeGallery(t+1)})},closeGallery:function(e){this.galleryList[e-1].close()},initGallery:function(e){this.galleryList[e-1].init()},updateGallery:function(e){this.galleryDOMElements[e-1]=$("[data-pswp-uid="+e+"]").get(0);this.galleryList[e-1]=this.createPhotoSwipe(e,this.galleryDOMElements[e-1],true)}};t.prototype.init=function(e){var t=e?e:".bck-gallery-images";var i=t instanceof jQuery?t:document.querySelectorAll(t);if(i.length){for(var n=0,a=i.length;n<a;n++){this.addGallery(i[n])}}};return new t(e)}function getFileAppDataFromEditorName(e){tipoelem="slide";idelem=idtransact;if(idtransact==undefined){if(e.indexOf("contestar_")==0){tipoelem="message_body";idelem=e.substr("contestar_".length)}else{tipoelem="activity";idelem=blink.getReqParam(location.href,"idclase")}}return new Array(tipoelem,idelem)}function cargarImagen(e,t,i){if(e=="")e="unica";var n=document.images[e+"_img1"];tmp_img=new Image;tmp_img.onload=function(){if(!i){n.width=this.width;n.height=this.height}n.src=t};try{tmp_img.src=t}catch(e){}if(e!="unica")$("#"+e+"_img1v").val(t)}function cambiarTamanoImagen(e,t,i){var n=document.getElementById(e+"_img1");if(n){n.width=imgsizearray[e].width*t/100;n.height=imgsizearray[e].height*t/100;$("#"+e+"_imagezoom").val(imgsizearray[e].width*t/100)}if(i)marcarHaCambiado(getIDSlideFromPrefijo(e))}function registrarTamanoImagen(e,t,i){var n=document.getElementById(t+"_imagezoomaux");if(e.width==0||!n){setTimeout('registrarTamanoImagen(document.getElementById("'+t+'_img1"), "'+t+'", '+i+")",500);return}primeravez=typeof imgsizearray[t]=="undefined";imgsizearray[t]={width:e.width,height:e.height};if(i!=""&&i!=0&&primeravez){n.selectedIndex=10-Math.round(i*10/e.width);cambiarTamanoImagen(t,Math.round(i*10/e.width)*10,false)}}function borrarImagenFondo(){closeMsgBox();setBackgroundImage("",prefijoSeleccionMultimedia);document.f.elements[prefijoSeleccionMultimedia+"_img_bg"].value="";marcarHaCambiado(getIDSlideFromPrefijo(prefijoSeleccionMultimedia))}function borrarImagenPortadaVideo(){closeMsgBox();var e=$(".bck-video-player[data-edit-poster=true]");if(e.length>0){$(".bck-video-player[data-edit-poster=true]").removeAttr("data-video-poster")}else{blink.theme.video.setPoster(prefijoSeleccionMultimedia,"")}marcarHaCambiado(getIDSlideFromPrefijo(prefijoSeleccionMultimedia))}function deshabilitarMenuContextual(e){if(e.length>0){$(e).attr("oncontextmenu","return false")}}function getHost(e){var t=document.createElement("a");t.href=e;return t.hostname}function removeHost(e){if(e.match(/^https?:\/\//))e=e.substr("https://".length);var t=e.indexOf("/");if(t!=-1)e=e.substr(t);else e="/"+e;return e}function isCacheHost(e){if(!e){return false}var t="";var i="";if(WEB_CACHE){t+=i+WEB_CACHE;i=","}if(WEBS_CACHE){t+=i+WEBS_CACHE;i=","}var n;var a;if(t&&(n=t.split(","))){a=n.map(function(e){return getHost(e)});return a.indexOf(e)!=-1}return false}function isBlinkHost(e){if(!e)return false;return e==getHost(WEB)||e==getHost(WEBS)}function isBlinkUrl(e){return isBlinkHost(getHost(e))}function isLocalHost(e){if(typeof e=="undefined")e=location.hostname;return e=="localhost"||e=="127.0.0.1"}function isLocalUrl(e){return isLocalHost(getHost(e))}function isOutsideHost(e){return e&&e!=location.hostname}function isOutsideURL(e){return isOutsideHost(getHost(e))}function isExternalHost(e){return e&&!isLocalHost(e)&&!isBlinkHost(e)&&!isCacheHost(e)&&isOutsideHost(e)}function isExternalURL(e){return isExternalHost(getHost(e))}function esContenidoEditorial(e){if(!String.prototype.includes){String.prototype.includes=function(){"use strict";return String.prototype.indexOf.apply(this,arguments)!==-1}}return e.includes("accesoContenidoEditorial")}function getProtocol(e){var t;if(e){var i=e.match(/^([a-z]+):\/\//i);if(i){t=i[1]}}if(!t){t=location.protocol;t=t.match(/[a-z]+/i)[0]}return t.toLowerCase()}function isURLAllowedByProtocol(e){return getProtocol()!="https"||getProtocol(e)=="https"}function removeAppParams(e){var t=["appBundleVersion","app","device","offlinePort","modo","bd","IDSESSIONDIRECT"];e=e.replace("?","?&");for(var i=0;i<t.length;i++){var n=t[i];var a=new RegExp("&"+n+"=[^&]+");e=e.replace(a,"")}e=e.replace("?&","?");return e}function getFragment(e){var t=e.indexOf("#");return t==-1?"":e.substr(t+1)}function deleteFragment(e){var t=e.indexOf("#");return t==-1?e:e.substr(0,t)}function deleteQuery(e){var t=e.indexOf("?");return t==-1?e:e.substr(0,t)}function getExt(e,t){e=deleteQuery(e);var i=e.lastIndexOf(".");if(i==-1)return null;var n=e.substring(i+1);if(t)return n.toLowerCase();else return n}function addAppParams(e){if(!blink.isApp)return e;e=e.replace(/^http:\/\/(localhost|127.0.0.1)(\:[0-9]+)?/,offlineServer);if(!isBlinkHost(getHost(e)))return e;var t=getFragment(e);if(t)e=deleteFragment(e);e+=e.indexOf("?")==-1?"?":"&";if(!e.match(/[&|?]appBundleVersion=/))e+="appBundleVersion="+blink.appVersion;if(!e.match(/[&|?]app=/))e+="&app="+blink.appName;if(!e.match(/[&|?]device=/))e+="&device="+blink.appDevice;if(!e.match(/[&|?]offlinePort=/))e+="&offlinePort="+blink.appPort;if(!e.match(/[&|?]modo=/))e+="&modo=4";if(!e.match(/[&|?]bd=/))e+="&bd="+BLINKDOMAIN;if(!e.match(/[&|?]IDSESSIONDIRECT=/))e+="&IDSESSIONDIRECT="+userToken;if(t)e+="#"+t;return e}function addParamUrl(e,t,i){var n=getFragment(e);if(n)e=deleteFragment(e);if(blink.getReqParam(e,t)){var a=new RegExp("(\\?|&)"+t+"=[^&]+");e=e.replace(a,"$1"+t+"="+i)}else{e+=e.indexOf("?")==-1?"?":"&";e+=t+"="+encodeURIComponent(i)}return e+(n?"#"+n:"")}function removeParams(e,t){var i=t.split("?")[0],n,a=[],r=t.indexOf("?")!==-1?t.split("?")[1]:"";function rmParam(e){for(var t=a.length-1;t>=0;t-=1){n=a[t].split("=")[0];if(n===e){a.splice(t,1)}}}if(r!==""){a=r.split("&");if(Array.isArray(e)){for(var o=0;o<e.length;o++){rmParam(e[o])}}else{rmParam(e)}}i=i+"?"+a.join("&");return i}function getFinalUrl(t){if(blink.isApp&&esContenidoEditorial(t)){var e=blink.getReqParam(t,"urla");var i=blink.getReqParam(t,"urlp");var n=e;if(blink.user.esProfesor()&&i!="")n=i;if(n!=""){blink.ajax("/"+decodeURIComponent(n),function(e){if(e!="ERROR"){t="/coursePlayer/webclass_html_.htm?marsupial=1&idcurso="+idcurso+"&idclase="+blink.getReqParam(t,"idclase")+"&extraAbsoluto=/"+decodeURIComponent(n)}},{type:"GET",async:false},{urlMode:"noDijest"})}}if(t.indexOf("idalumno=")===-1&&blink.user.esPadre()&&typeof idalumno!=="undefined"&&idalumno)t=addParamUrl(t,"idalumno",idalumno);if(blink.isApp&&blink.appVersion>=4.1)return t;if(!window.offline)return t;if(needBeOnlineUrl(t))t=getOnlineUrl(t);if(!blink.isApp)return t;if(canUseProxyUrl(t))return getProxyUrl(t);else return addAppParams(t)}function canUseProxyUrl(e){return blink.appVersion>=4&&((isBlinkUrl(e)||isLocalUrl(e))&&!esContenidoEditorial(e))}function getProxyUrl(e){if(canUseProxyUrl(e)){if(isBlinkUrl(e)){e=removeHost(e);e=offlineServer+e}e=removeAppParams(e)}else{blink.log.error("Pedida una url proxy cuando no debe ser "+e)}return e}var onlinePaths=[["/admin/admin.php",true],["/LMS/busqueda.php",true],["/coursePlayer/accesoContenidoEditorial.php",false],["/coursePlayer/accesoContenidoEditorial2.php",false],["/LMS/index.php",false],["/LMS/webinars.php",true],["/modules/Calendar2/feeds/ExternalCalendarFeed.php",true],["/LMS/allstudents.php",true]];function needBeOnlineUrl(e){for(var t in onlinePaths){if(e.indexOf(onlinePaths[t][0])!=-1){return true}}return false}function getOnlineUrl(e){for(var t in onlinePaths){if(e.indexOf(onlinePaths[t][0])!=-1){return adjustOnlineURL(e,onlinePaths[t][1])}}blink.log.warning("Pedida una url online cuando no debe ser "+e)}function canUseOfflineUrls(){return window.offline&&(!blink.isApp||valid_modes==3||blink.appVersion>=4&&!blink.isOfflinePCApp&&valid_modes!=1)}function isCurrentUrl(e){var t=location.href;var i,n;e=adjustURLSeleccion(e)}var offline_allowed=["curso2","clases2","librodigital_html","clase","claustro","alumnos","students","teachers","fichaalumno","mensajes","registration","avisolegal","faqs","contactus","aboutus","webclass.html","termsofuse","policyprivacy","calendario","desktop","Module_output","mensajes_hiloforo","ventana_chat","attendances_view","epubviewer.html"];function redireccionar(e,t,i,n){n|=!canUseOfflineUrls();n|=(e.contains("/coursePlayer/clases2")||e.contains("/coursePlayer/curso2"))&&e.match(/(&|\?)editar=1/)!=null;n|=e.contains("/LMS/alumnos");if(t===undefined){t=true}if(loadpagewithajax){loadPageWithAJAX(e);return}if(e.indexOf("idalumno=")===-1&&blink.user.esPadre()&&typeof idalumno!=="undefined"&&idalumno){e=addParamUrl(e,"idalumno",idalumno)}if(offline&&(!blink.isApp||blink.appVersion<4.1)){if(needBeOnlineUrl(e)){e=getOnlineUrl(e);if(i){blink.rest.openUrl("fullscreen",e)}else{goToHref(e)}return}var a=false;for(var r=0;r<offline_allowed.length&&!a;r++){a=e.indexOf("/"+offline_allowed[r]+".php")!=-1}if(!a){mostrarAvisoOffline();return false}if(n){if(t)e=adjustURLSeleccion(e);e=e.contains("/LMS/alumnos")?adjustURL(e,t,true):adjustOnlineURL(e);if(!e.match(/^https?:\/\//))e=(offlineServer?offlineServer:"..")+"/"+e}else{e=adjustURL(e,t,true);if(!e.match(/^https?:\/\//))e=(offlineServer&&!window.location.pathname.contains("marsupial")?offlineServer:"..")+"/"+e}}else if(t){e=adjustURLSeleccion(e)}if(blink.isApp&&(i||i===undefined)){var o=["coursePlayer/clases2","coursePlayer/webclass","LMS/mensajes_hiloforo"],s=location.href,l,c;for(var u=0;u<o.length;u++){if(e.contains(o[u]))l=u;if(s.contains(o[u]))c=u}var d=l===c,f=l!==undefined;if(!d&&f&&i){blink.rest.openUrl("targetBlank",e);return}if(!d&&f){blink.rest.openUrl("fullscreen",e);return}else if(e.contains("portal/")){var p=e.contains("termsofuse")?"targetBlank":"viewer";blink.rest.openUrl(p,e);return}else if((blink.isOfflinePCApp||blink.appVersion>=3)&&e.contains("coursePlayer/curso2")){blink.rest.openUrl("fullscreen",e);return}else if(e.contains("LMS/fichaalumno")){blink.rest.openUrl("fullscreen",e);return}}if(i){blink.rest.openUrl("fullscreen",e)}else{goToHref(e)}}function gotoMyLibrary(){redireccionar(blink.user.getMyLibraryURL())}function goToHref(e){if(false&&typeof window.isRedirecting!=="undefined"&&window.isRedirecting&&!blink.isApp){return false}location.href=getFinalUrl(e);window.isRedirecting=true&&!blink.isApp;return true}function adjustURLSeleccion(e){if(window.seleccion){found=false;if(e.indexOf("?")!=-1){urlnew=e.substring(0,e.indexOf("?")+1);var t=e.substring(e.indexOf("?")+1).split("&");p=window.seleccion.substring(0,window.seleccion.indexOf("="));for(var i=0;i<t.length;i++){if(t[i].indexOf(p+"=")==0){found=true}urlnew+=t[i]+(i<t.length-1?"&":"")}}if(!found)e+=(e.indexOf("?")==-1?"?":"&")+window.seleccion;else e=urlnew}return e}function adjustURL(e,t,i){if(blink.isApp&&blink.appVersion>=4.1){if(t){e=adjustURLSeleccion(e)}if(e.indexOf("/")==0)return prefijoURL+e;else if(e.indexOf("://")==-1)return"../"+e;return e}else if(canUseOfflineUrls()){if(e.indexOf("drm:DRM")!=-1||needBeOnlineUrl(e))return e;var n="";if(i!=1&&e.indexOf("../")!=0)n="../";e=n+blink.getLocalURL(e)}else{if(t){e=adjustURLSeleccion(e)}if(e.indexOf("/")==0)return prefijoURL+e;else if(e.indexOf("://")==-1)return"../"+e}return e}function adjustOnlineURL(e,t){if(t===undefined)t=true;if(e.startsWith("../"))e=e.substr(2);if(!e.match(/^https?:\/\//))e=(t?WEBS:WEB)+e;return e}function getQueryParamValue(e,t){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var i=new RegExp("[\\?&]"+e+"=([^&#]*)"),t=typeof t!=="undefined"&&t?t:location.search,n=i.exec(t);return n==null?"":decodeURIComponent(n[1].replace(/\+/g," "))}function isYoutubeUrl(e){return!!e.match(/(youtube\.com.*?(embed|watch)|youtu\.be)/i)}function isVimeoUrl(e){return!!e.match(/(vimeo.com|player.vimeo.com\/video)\/[0-9]+/i)}function isOnlineServiceUrlVideo(e){return isYoutubeUrl(e)||isVimeoUrl(e)}function getYoutubeID(e){var t=new RegExp('(?:youtube(?:-nocookie)?.com/(?:[^/]+/.+/|(?:v|e(?:mbed)?)/|.*[?&]v=)|youtu.be/)([^"&?/ ]{11})',"i");var i=e.match(t);return i?i[1]:null}function getOriginalYoutubeUrl(e){if(!isYoutubeUrl(e))return e;if(e.contains("/watch"))return e;var t=getYoutubeID(e);if(!t)return e;return"https://www.youtube.com/watch?v="+t}function adaptUrlToEmbed(e){if(isYoutubeUrl(e)){if(e.indexOf("/embed/")!=-1){return e.replace("http://","https://")}else{var t=getYoutubeID(e);if(t){e="https://www.youtube.com/embed/"+t}}}else if(isVimeoUrl(e)){e=e.replace("http://","https://")}return e}function procesarURL(e){e=e.replace(/^\.\.\//,"/");if(e.indexOf("www")===0){e="http://"+e}else if(e.indexOf("://")===-1){e=WEB+e}return e}function goPage(e){if(e=="perfil"||window.userRegister==1||BLINKDOMAIN=="wallstreet"){if(e=="clase")url="/LMS/clase.php";else if(e=="alumnos")url="/LMS/alumnos.php";else if(e=="claustro")url="/LMS/claustro.php";else if(e=="ficha")url="/LMS/fichaalumno.php";else if(e=="mensajes")url="/LMS/mensajes.php";else if(e=="perfil")url="/LMS/registration.php";else if(e=="cursos_alumno")url="/LMS/students.php";else if(e=="cursos_padre")url="/LMS/parents.php";else if(e=="cursos_profesor")url="/LMS/teachers.php";else if(e=="allstudents")url="/LMS/allstudents.php";else if(e=="teacherassignments")url="/LMS/teacherassignments.php";else if(e=="desktop")url="/LMS/desktop.php";else if(e=="calendar")url="/LMS/calendario.php";else if(e=="community")url="/LMS/claustro.php?idgrupo=";else if(e=="librero")url="/admin/admin.php?op=listadolibrero";else if(e=="blkAnalytic")url="/LMS/analytics2.php";else if(e=="groupRubrics")url="/LMS/rubricas.php";else if(e=="groupChecklists")url="/LMS/checklists.php";if(blink.user.esAlumno()&&!blink.isOfflinePC&&blink.isApp){var t=window.location;var i=/[^/\\&\?]+\.\w{3}(?=([\?&].*$|$))/;var n=i.exec(t);var a="/LMS/"+n[0];if((n[0]=="allstudents.php"||n[0]=="fichaalumno.php"||n[0]=="curso2.php")&&e=="cursos_alumno"){blink.rest.closeWindow();return}else if(url==a||a=="/LMS/busqueda.php"&&(url=="/LMS/students.php"||url=="/LMS/students_.htm")){location.reload(true)}else if(a!=="/LMS/students_.htm"&&a!=="/LMS/students.php"){blink.rest.openUrl("replace",url)}else{redireccionar(url,!blink.isApp)}}else{redireccionar(url,!blink.isApp)}}else{showModalError(textweb("globo_perfil_profe1"),textweb("register_not_complete"))}return false}function goHash(e){redireccionar("/themes/tmpux/launch.php#"+e,!blink.isApp)}blink.goToActivity=function(idcourse,idactivity,page,from_related){var from_related=from_related||false;blink.getActivity(idcourse,idactivity).done(function(obj){if(!obj)return;if((!blink.isApp||blink.appVersion>=4.01)&&obj.activityType!==TIPOS_CLASES.WEB){var _mode=(blink.currentPage.name==="TOC"||blink.currentPage.name==="webclass")&&obj.type!=="libro"&&blink.isApp?"fullscreen":"replace",isPDF=obj.type==="pdf",_url=isPDF?obj.fileurl:obj.url;if(isPDF){_mode="fullscreen"}if(blink.activity.currentStyle&&blink.activity.currentStyle.customTargetLink){var customTarget=blink.activity.currentStyle.customTargetLink(obj);if(customTarget&&typeof customTarget[obj.type]!=="undefined"){_mode=customTarget[obj.type]}}if(obj.type==="libro"&&blink.isApp&&!blink.isOfflinePCApp){blink.rest.openPDF(_mode,obj.url,page,from_related)}else{blink.rest.openUrl(_mode,_url)}return}eval(obj.onclickTitle)})};function irClase(r,o,e,s,t,l,c,u){abrirEnPopup=typeof t!=="undefined"?t:false;if(e!=undefined&&e!="")idcurso=e;blink.getActivity(idcurso,r).done(function(e){var t=false,i=(s!=undefined&&s!==""?"&IDSec="+s+"&numSec="+(s+1):"")+(editar?"editar=1&":"")+(o!=undefined&&o!=""?"&idalumno="+o:"");if(e){var n=e.url;t=e.reviewInFullScreen;if(e.sin_enlace_revision){return}}else{var n="/coursePlayer/clases2.php?idclase="+r;if(typeof l!="undefined"&&l==8){n="/coursePlayer/librodigital_html.php?idclase="+r}if(idcurso)n+="&idcurso="+idcurso}if(n.indexOf("redireccionar(")!==-1){splittedUrlClase=n.split("'");n=splittedUrlClase[1]}if(n.indexOf("?")<0)n+="?";n+=i+"&popup="+(t?t:"1");if(c&&typeof c!="undefined")n+=c;if(blink.isApp&&!blink.isOfflinePCApp&&!u){if(!canUseOfflineUrls())blink.rest.openUrl("viewer",WEBS+n);else blink.rest.openUrl("viewer",offlineServer+"/"+adjustURL(n,false,true))}else{var a={fullscreen:t};if(typeof u=="undefined"||u==false){showIFrame(n,0,0,true,!blink.theme.isAdaptative(),false,a,false)}else{redireccionar(n)}}});return false}function diagIrClase(e,t,i,n,a,r,o,s,l){var c="";if($("#select_attempt").length>0){var u=$("#select_attempt").val();if(u&&u!="")c+="&attempt="+u}if(window.idgrupo){c+="&_idgrupo="+idgrupo}if(l){c+="&idtransp="+l}if(o){c+="&showStudentsArrows=1";if(s){c+="&navigationMode="+s}}return irClase(e,t,i,n,a,r,c)}function irFichaAlumno(e,t){var i="/LMS/fichaalumno.php?idalumno="+e;if(t)i+="&"+t;if(blink.isApp&&(blink.user.esProfesor()||blink.user.esPadre())){blink.rest.connection(function(e){if(!e){_showAlert(textweb("tablettxt_require_connection"))}else{var t=!location.href.contains("fichaalumno");redireccionar(i,undefined,t,true)}})}else if(blink.isApp&&BLINKDOMAIN=="wallstreet"&&blink.user.esAlumno()){blink.rest.openUrl("replace",i)}else{redireccionar(i)}}function irClaseDesdeNombre(e){urlclase="/coursePlayer/clases2.php?idcurso="+idcurso+"&nombreclase="+e+(idalumno!=undefined&&idalumno!=""?"&idalumno="+idalumno:"");if(offline){urlclase=adjustURL(urlclase,false);urlclase=top.location.href.substring(0,top.location.href.lastIndexOf("/")+1)+urlclase}if(blink.isOfflinePCApp)urlclase+="#layout=fullscreen";location=urlclase}function irIndiceCurso(){top.history.go(-1)}function esHomeCurso(){return location.href.indexOf("curso2")>-1}function getUrlParameters(){var e=decodeURIComponent(window.location.search.substring(1));if(!e){return{}}if(e.startsWith("&")){e=e.substring(1)}e=e.replace(/&/g,",");e=e.split(",");e=e.map(function(e){return e?'"'+e.replace(/['"]+/g,"").replace(/=/,'":"').trim()+'"':null});e=e.filter(function(e){return e!==null&&e!==""&&e!=='"'&&e.search(":")>=0});e=e.join(",");e="{"+e+"}";return e?JSON.parse(e,function(e,t){return e===""?t:decodeURIComponent(t)}):{}}function checkConnectionBeforeGoToURL(t){if(!t){console.warn("Error - checkConnectionBeforGoToURL: No valid URL");return false}return blink.rest.connection(function(e){if(!e||typeof e=="object"&&e.connected!=1){_showAlert(textweb("tablettxt_require_connection"));return false}redireccionar(t)})}(function(a){var e="2.0",t=false,i=$.browser.msie&&parseInt($.browser.version,10)=="7",n=$.browser.msie&&parseInt($.browser.version,10)<=7,r=$.browser.msie&&parseInt($.browser.version,10)<=8,o=$.browser.msie&&parseInt($.browser.version,10)=="9",s=navigator.userAgent.indexOf("Trident/")>-1&&parseInt($.browser.version,10)=="11",l=navigator.userAgent.indexOf("Edge")>-1,c=n||r||o||s||l,u=n;var d=false;var f=0;var p="";var m="";var g="";var b=navigator.userAgent.toLowerCase();if(navigator&&b){var y=b.match(/blinklearning ?app[^0-9]*([0-9]+\.*[0-9]+)/i);if(y&&y.length>1){var e=parseFloat(y[1]);if(e>0){d=true;f=e}}}if(!d){if(getQueryParamValue("appBundleVersion")>0){d=true;f=getQueryParamValue("appBundleVersion");p=getQueryParamValue("app");m=getQueryParamValue("device");g=getQueryParamValue("offlinePort");if(f<3.3){setCookie("appBundleVersion",f);setCookie("app",p);setCookie("device",m);setCookie("offlinePort",g)}window.app={port:g,name:p,device:m,version:f}}else if(getCookie("appBundleVersion")>0){d=true;f=getCookie("appBundleVersion");p=getCookie("app");m=getCookie("device");g=getCookie("offlinePort");window.app={port:g,name:p,device:m,version:f}}else if(isLocalHost()){var w="/rest/version";$.ajax({url:w,dataType:"script",async:false,statusCode:{200:function(){if(typeof app=="undefined")return;if(app&&app.version>0){d=true;f=app.version;p=app.name;m=app.device;g=app.port;if(f<3.3){setCookie("appBundleVersion",f);setCookie("app",p);setCookie("device",m);setCookie("offlinePort",g)}}}}})}}if(!r)r=document.documentMode&&document.documentMode<=8?true:false,a.version=e;a.isIE7=i;a.isIE7orlower=n;a.isIE8orlower=r;a.isIE9=o;a.isIE11=s;a.isEdge=l;a.isIE=c;a.browserNotSupported=u;a.isPhantom=b.contains("phantomjs");a.isApp=d;a.appVersion=parseFloat(f);a.appName=p;a.appDevice=m;a.appPort=g;a.isBrowser=!d;a.isIpad=p=="ipadapp"||b.contains("ipad");a.isIphone=b.contains("iphone");a.isAndroid=p=="androidapp"||b.contains("android");a.isWinRT=p=="winrt"||m=="winrt";var k=["blinkoffline"];a.isOfflinePC=k.indexOf(p)!=-1;a.isElectron=function(){try{if(typeof require!="undefined"&&require("electron").remote)return true;else return false}catch(e){return false}}();a.isChromebook=m=="chromebook";a.isIos=a.isIpad||a.isIphone;a.isRetina=function(){var e="(-webkit-min-device-pixel-ratio: 1.5),\t            (min--moz-device-pixel-ratio: 1.5),\t            (-o-min-device-pixel-ratio: 3/2),\t            (min-resolution: 1.5dppx)";if(window.devicePixelRatio>1)return true;if(window.matchMedia&&window.matchMedia(e).matches)return true;return false}();a.isTablet=a.isIpad||a.isAndroid||a.isWinRT;a.hasTouch="ontouchstart"in window||navigator.MaxTouchPoints>0||navigator.msMaxTouchPoints>0;a.supportsPointerEvents=!$.browser.msie;window.hideCanvasElement=!a.supportsPointerEvents;a.isAndroidApp=a.isAndroid&&a.isApp;a.isIpadApp=a.isIpad&&a.isApp;a.isIphoneApp=a.isIphone&&a.isApp;a.isIosApp=(a.isIpad||a.isIphone)&&a.isApp;a.isWinRTApp=a.isWinRT&&a.isApp;a.isOfflinePCApp=a.isOfflinePC&&a.isApp;a.isChromebookApp=a.isChromebook&&a.isApp;a.isTabletApp=a.isAndroidApp||a.isIosApp||a.isWinRTApp;a.isChrome=(b.contains("chrome")||a.isIos&&b.contains("crios"))&&(!b.contains("opr")&&!b.contains("edg"));a.isOpera=b.contains("chrome")&&b.contains("opr");a.isFirefox=b.contains("firefox")||a.isIos&&b.contains("fxios");a.isSafari=b.contains("safari")&&!b.contains("chrome")&&!b.contains("crios")&&!b.contains("fxios")&&!b.contains("opr");a.isNewEdge=b.contains("edg")&&b.contains("chrome");a.isChromium=b.contains("chrome")&&!a.isChrome;a.iOSversion=function(e){if(a.isIos){var t=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);if(t){if(typeof e!=="undefined"&&e)return parseInt(t[1],10);else return[parseInt(t[1],10),parseInt(t[2],10),parseInt(t[3]||0,10)]}}return false};a.isIosGreaterThan=function(e,t){t=typeof t!=="undefined"&&t==true?true:false;if(a.isIos){ver=a.iOSversion();if(ver){if(t){return ver[0]>=e}return ver[0]>e}}return false};a.isAndroidChrome=!a.isApp&&b.contains("chrome")&&b.contains("android");if(a.isAndroidChrome){var e=b.match(/chrome\/([0-9]+)/);if(!e||parseInt(e[1])<40){a.isAndroidChrome=false}}if(d){var S;if(isLocalHost())S=location.hostname;else if(a.isWinRT)S="localhost";else S="127.0.0.1";offlineServer="http://"+S+":"+(g?g:"8080")}function splitURL(e){var t=/^(?:([A-Za-z]+):)?(\/{0,3})([0-9.:\-A-Za-z]+)(?::(\d+))?(?:\/([^?#]*))?(?:\?([^#]*))?(?:#(.*))?$/;var i=t.exec(e);var n=["url","scheme","slash","host","port","path","query","hash"];return i}a.contexts=[];a.escapeJS=function(e){var t=document.createElement("div");t.appendChild(document.createTextNode(e));return t.innerHTML};a.getReqParam=function(e,t,i){var n=splitURL(e);paramsstring=n[6]||"";var a=paramsstring.split("&");for(var r=0;r<a.length;r++){var o=a[r].split("=");if(o.length==2&&o[0]==t){var s=decodeURIComponent(o[1]);return i===true?this.escapeJS(s):s}}return""};function inQueryParms(e,t){var i=_.find(e,function(e){return t.startsWith(e+"=")});return!!i}function codifyURL(e,t){if(e==="webclass_html_.htm?")return e+t;ext="htm";var i=["video","image","flash","doc","sound","geogebra"];var n=getMediaType(e);var a=getExt(e,true);if(i.indexOf(n)!=-1||["html"].contains(a))return e;if(e.indexOf(".json")!=-1)ext="json";else if(e.indexOf(".js")!=-1)ext="js";else if(e.indexOf("executeexportexcel")!=-1)ext="xlsx";else if(e.indexOf("popup")!=-1)e=e.replace("&popup=1","");return e.replace(".php","").replace(/[\.\?=&]/g,"_")+"."+ext+(t?"?"+t:"")}a.getLocalURL=function(e){var t=splitURL(e);if(t[1]!="http"&&t[1]!="https")t=splitURL("localhost"+(e.startsWith("/")?e:"/"+e));var i=t[5].split(/\/+/g),n=i.pop(),a=i.join("/"),r=t[6]||"";var o=r.split("&"),s=o.length;query_string="";for(var l=0;l<s;l++){var c=o[l].toLowerCase(),u=false;if(c.startsWith("as=")||c.startsWith("modo=")||n=="curso2.php"&&c.startsWith("idtema=")||(n=="clases2.php"||n=="curso2.php")&&c.startsWith("editar="))u=true;if(n=="clases2.php"&&(c.startsWith("popup=")||c.startsWith("numsec="))||(n=="curso2.php"||n.indexOf("scormAPI")!=-1)&&(c.startsWith("idalumno=")||c.startsWith("popup=")||c.startsWith("numsec="))){u=true;query_string+=o[l]+"&"}if(n=="clases2.php"&&(c.startsWith("idcurso=")||c.startsWith("idclase=")||c.startsWith("idalumno="))){query_string+=o[l]+"&"}if(n=="librodigital_html.php"){u=!inQueryParms(["idcurso","idclase"],c);query_string+=o[l]+"&"}if(n=="webclass.html.php"||n=="webclass_html_.htm"||n=="epubviewer.html.php"){u=true;query_string+=o[l]+"&"}if(n=="clases2.php"&&c.startsWith("rtmm=")){u=true;query_string+=o[l]+"&"}if(n=="clases2.php"&&c.startsWith("rtagi=")){u=true;query_string+=o[l]+"&"}if(n.indexOf(".php")!=-1&&c.startsWith("_")&&c.indexOf("=")!=-1){u=true;query_string+=o[l]+"&"}if(n=="alumnos.php"&&c.startsWith("idgrupo=")){query_string+=o[l]+"&"}if(u){o.splice(l,1);l--;s--}}o.sort();var d=typeof t[7]!=="undefined"?"#"+t[7]:"";var f=a+"/"+codifyURL(n+"?"+(o.join("&")||""),query_string)+d;return f};var x=false;a.doTick=function(e){var t=$(e);v=$(e).attr("nota");aprobado=$(e).attr("aprobado")=="true";status=2;if(!v)return;if(v=="-")status=0;else if(v&&v.indexOf("*")!=-1)status=1;if(x){$.data(e,"cache-html",t.html());if(status==0)img="../images/tick_white.png";else img="../images/tick_"+(aprobado?"1":"0")+(status==2?"end":"")+".png";t.html('<img src="'+img+'">')}else{var i=t.data("cache-html");t.html(i)}};a.showTicks=function(){x=!x;conmutarEstadoBoton("boton_ticks",!x);$(".td_progreso, .td_progreso_subtema").each(function(){a.doTick(this)})};var I=null,A=null,C=null;function makeMouseEvent(e){if(!a.isTablet)return e;var t=e.changedTouches[0];return{type:"mousedown",which:1,pageX:t.pageX,pageY:t.pageY,screenX:t.screenX,screenY:t.screenY,clientX:t.clientX,clientY:t.clientY}}function clickDraggable(e){var t=$(e.target),i=t.closest(".draggable");function cancelDraggableSelect(){i.css("opacity","1");I=null}if(!i.size())return;if(A){cancelDraggableSelect();clearTimeout(A)}A=setTimeout(cancelDraggableSelect,1500);i.css("opacity","0.50");C=a.makeMouseEvent(e);I=i.get(0)}function clickDroppable(e){if(!I)return;var t=makeMouseEvent(e),i=$(I),n=i.position();_onStartDragDraggable(I,t);var a=t.pageX-C.pageX+n.left,r=t.pageY-C.pageY+n.top;i.animate({left:a,top:r},"fast",function(){_onEndDragDraggable(this,t)});I=null}a.initPC=function(){};a.initAndroid=function(){document.addEventListener("touchstart",function(e){return true;if(I){var t=e.changedTouches[0],i={type:"mousedown",which:1,pageX:t.pageX,pageY:t.pageY,screenX:t.screenX,screenY:t.screenY,clientX:t.clientX,clientY:t.clientY};_onStartDragDraggable(I,i);_onEndDragDraggable(I,i);var n=$(I);n.css("position","absolute").animate({left:i.pageX,top:i.pageY},"fast");I=null}e.stopPropagation();return false});document.addEventListener("touchmove",function(e){return true;e.preventDefault();return false})};a.loadObject=function(l,e){var c="obj_"+l+e;function finishLoadingObject(){if(l=="group"){var i=20;var n=50;var a=50;var r=400;function rnd_snd(){return Math.random()*2-1+(Math.random()*2-1)+(Math.random()*2-1)}function rnd(e,t){return Math.round(rnd_snd()*t+e)}var o,e=document.getElementsByTagName("head")[0].style,t="transformProperty WebkitTransform OTransform msTransform MozTransform".split(" ");for(var s=0;s<t.length;s++)if(e[t[s]]!==undefined)o=t[s];$("#"+c).find("img").css("border","5px solid #eeeeee").css("position","absolute").offset({left:0,top:0}).css("border-radius","8px").each(function(e){var t=Math.floor((Math.random()-.5)*a);deg2=(e-10)*1;$(this).offset({left:n+rnd(0,i),top:n+rnd(0,i)}).css("zIndex",r+Math.floor(Math.random()*10));$(this).get(0).style[o]="rotate("+t+"deg)"})}}var t=$('<div class="obj" id="'+c+'"></div>').load("/obj/getHTML.php?t="+l+"&id="+e,finishLoadingObject).appendTo(document.body).blinkDraggable().show();return t};a.viewClass=function(e,t,i,n,a){var r=false;getAJAX("/LMS/ajax.php?op=content.checkIncompatibleDevice&idcontent="+e+"&content_type=Clase",function(e){if(!e.startsWith("OK")){msgIncompatibleDevice();r=true}},false,undefined,undefined,true);if(r)return;if(n=="1"){if(blink.isApp&&a=="1"){blink.rest.openUrl("fullscreen",t);return}redireccionar(t,undefined,undefined,a)}else{if(blink.isOfflinePC){redireccionar(t+(t.indexOf("?")==-1?"?":"&")+"popup=1"+(typeof i!=undefined&&i==1?"&previa=1":""),undefined,true,a)}else{if(blink.isApp){blink.rest.openUrl("fullscreen",t)}else{ventana=window.open(t+(t.indexOf("?")==-1?"?":"&")+"popup=1"+(typeof i!=undefined&&i==1?"&previa=1":""),"actividad","menubar=0,resizable=1,scrollbars=1,width=1040,height=730,top=0,left=0");ventana.focus()}}}getAJAX("/LMS/ajax.php?op=activity.countclassview&idclase="+e,nullAJAXFunc)};a.editClass=function(e,t){location.href=t;getAJAX("/LMS/ajax.php?op=activity.countclassview&idclase="+e,nullAJAXFunc)};a.getAutocompleteItem=function(e,t,i,n){if(!n)n=50;var a="";if(!i){if(e)a='<img src="'+e+'" style="width:20px;margin:0 10px 0 0;">';return"<a>"+a+"<span>"+limitarString(t,n)+"</span></a>"}if(!e){return'<a style="height:40px;"><b>'+limitarString(t,n)+'</b><br><span style="color:#999999;">'+limitarString(i,n)+"</span></a>"}if(e)a='<img src="'+e+'" style="float:left;margin-right:10px;max-width:40px; max-height:40px;">';return'<a style="height:40px;">'+a+"<span><b>"+limitarString(t,n-5)+"</b><br>"+limitarString(i,n-5)+"</span></a>"};jQuery.fn.adjustTextarea=function(){return this.each(function(){$(this).css("overflow-y","hidden").keyup(function(){var e=$(this),t=e.attr("scrollHeight");if(t>e.height()){var i=e.css("line-height");e.height(t+(isNaN(i)?parseInt(e.css("font-size")):i))}})})};jQuery.fn.blinkGesture=function(n){return this.each(function(e){if(!a.hasTouch)return;this.ongesturestart=function(e){};this.ongesturechange=function(e){e.preventDefault();this.style.webkitTransition="";var t=Math.max(1+(e.scale-1)*2,.3);this.style.webkitTransform="scale("+t+") rotate("+e.rotation+"deg)"};this.ongestureend=function(e){var t=Math.max(1+(e.scale-1)*2,0),i=true;if(t<.8){if(n.callback)i=n.callback()}if(i){this.style.webkitTransition="-webkit-transform 0.3s";this.style.webkitTransform="scale("+1+") rotate("+0+"deg)"}}})};jQuery.fn.blinkDraggable=function(i){var n=$("[id^=blinkdraggable]").length;return this.each(function(e){if(this.id==undefined||this.id=="")this.id="blinkdraggable"+(e+n);if(a.hasTouch&&$.fn.touch){$(this).touch({animate:false,sticky:false,dragx:true,dragy:true,rotate:true,resort:false,scale:false})}var t={revert:function(){_onEndDragDraggable(this);return $(this).hasClass("draggablereturnorigin")},start:function(e,t){_onStartDragDraggable(this)},drag:function(e){_onDragDraggable(this)},stop:function(e,t){_onStopDragDraggable(this);blink.events.trigger("onStopDragDraggable")},containment:"document",scroll:true};$(this).draggable($.extend(t,i)).mousedown(function(e){_savePosition(this);e.stopPropagation()}).css("cursor","pointer")})};a.setDigitalWhiteboardMode=function(e){if(e){h=$(window).height()-38-88;$("html").css("overflow","hidden");$(document.body).css("overflow","hidden").children().not("#menubar, script, #cabecera").prependTo(document.body).wrapAll('<div id="digital_whiteboard" style="width:100%;float:left;height:'+h+'px;overflow:auto;" class="digital_whiteboard"></div>');$(window).resize(function(){$("#digital_whiteboard").height($(window).height()-$("#menubar").height())});$(window).resize()}};a.currentPage={name:"notset",setName:function(e){this.name=e}};a.currentPage.reloadPage=function(){window.location.href=window.location.href};a.currentPage.getButtons=function(){return"[]"};a.currentPage.refresh=function(){};a.currentPage.setContexts=function(){if(blink.contexts)blink.rest.setContexts(blink.contexts)};a.currentPage.setButtons=function(){if(blink.buttons)blink.rest.setButtons(blink.buttons)};a.currentPage.enterEditMode=function(){location=blink.Url(location.href).setParam("editar",1).getUrl()};a.currentPage.enterViewMode=function(){location=blink.Url(location.href).setParam("editar",0).getUrl()};blink.currentPage.setInfoLibroHeight=function(){};a.pages={};a.pages.messages={closeThread:function(t){getAJAX("/LMS/ajax.php?op=message.closemessagethread&idmsg="+t,function(e){if(e.startsWith("OK")){blink.theme.ocultarHilo(t)}else _showAlert(textweb("error_general_AJAX"))})}};a.modules={};a.defined=function(e){return typeof e!="undefined"};a.checkConnection=function(t,i){if(blink.isOfflinePC||blink.isApp){blink.rest.connection(function(e){if(parseInt(e)){t&&t()}else{i&&i()}})}else{t&&t()}};a.log={level:2,debug:function(e){if(this.level>=2)console.debug(e)},info:function(e){if(this.level>=3)console.info(e)},warning:function(e){if(this.level>=1)console.warn(e)},error:function(e,t){if(this.level>=0){console.error(e);if(t&&t.message)console.error(t.message);if(t&&t.stack){console.error(t.stack)}else if(e.stack){console.error(e.stack)}else{console.trace()}}}};if(!window.console||!console.error||!console.warn||!console.info||!console.debug||!console.trace){a.log.level=-1}a.events={list:{},trigger:function(){var e,t=false,i=1;if(typeof arguments[0]==="boolean"){t=arguments[0];e=arguments[1];i=2}else{e=arguments[0]}if(!this.list[e]){if(!t)return;this.list[e]={callbacks:[]}}this.list[e].unique=t;var n=[];for(var a=i;a<arguments.length;a++){n.push(arguments[a])}for(var a=0;a<this.list[e].callbacks.length;a++){this._run(this.list[e].callbacks[a],n);if(this.list[e].callbacks[a].once){this.list[e].callbacks.splice(a,1);a--}}if(this.list[e].unique){this.list[e].callbacks=[];this.list[e].params=n}},_run:function(e,t){var i,n;i=e.func;n=e.context;if(n===undefined)n=i;setTimeout(function(){i.apply(i,t)},0)},on:function(e,t,i){this._register(e,t,i,false)},once:function(e,t,i){this._register(e,t,i,true)},_register:function(e,t,i,n){var a=e.split(" ");if(a.length>1){for(var r=0;r<a.length;r++){this._register(a[r],t,i,n)}return}var o={func:t,context:i,once:n};if(!this.list[e]){this.list[e]={callbacks:[o]}}else{if(this.list[e].unique){this._run(o,this.list[e].params)}else{this.list[e].callbacks.push(o)}}},off:function(e,t){if(t===undefined){this.list[e]=[]}else if(this.list[e]){for(var i=0;i<this.list[e].length;i++){if(this.list[e][i].func===t){this.list[e].splice(i,1)}}}}};var M=function(e){return e+":"+window.RELEASE_UID};a.sessionStorage={isAvailable:function(){return typeof sessionStorage!=="undefined"},set:function(e,t){if(!this.isAvailable()){return}sessionStorage.setItem(M(e),json_encode(t))},get:function(e){if(!this.isAvailable()){return}return json_decode(sessionStorage.getItem(M(e)))}};a.localStorage={isAvailable:function(){var e="test";try{localStorage.setItem(e,e);localStorage.removeItem(e);return true}catch(e){return false}},set:function(e,t){if(!this.isAvailable()){return}localStorage.setItem(e,json_encode(t))},get:function(e){if(!this.isAvailable()){return}return json_decode(localStorage.getItem(e),false)},remove:function(e){if(!this.isAvailable()){return}localStorage.removeItem(e)}};a.domain={getDownloadingText:function(e,t){return e+" "+t+"%"},doLoginError:function(){_showAlert(textweb("login_campos_vacios"));return false},writeScriptOffline:function(e,t,i,n,a,r,o,s,l,c,u,d,f,p,h,m){f=f||false;pendiente_revisar=f?", 'pte_revisar':'1'":"";p=p||false;p=p?", 'game_score':"+p:"";h=h||false;h=h?", 'game_token':"+h:"";m=m||false;m=m?", 'custom_activity_status':"+m:"";var g="",v=new Date,b=$.datepicker.formatDate("dd-mm-yy",v),y="";if(actividades[idclase]){notas=blink.domain.fillScormGrades(d,n)}else{notas=d}if(s!==""&&$.isArray(s)){y=", 'estado_transparencias':'"+s.join(",")+"'"}g="if(typeof actividades === 'undefined'){var actividades = Array();}";g+="actividades["+idclase+"] = {'idtema':'"+idtema+"','tipo':'"+evaltype+"','estado':"+e+",'avance':'"+t+"','nota':'"+i+"','notas':"+JSON.stringify(notas)+pendiente_revisar+p+h+m+",'clasificacion':'"+n+"','fecha':'"+b+"','tiempo':'"+a;_.each(o,function(e,t){g+="', 'clasificacion_eje"+t+"':'"+o[t]});g+="'"+y+",'fecha_modificacion':'"+b+"','fecha_timestamp':'"+r+"'};";return g},fillScormGrades:function(e,t){var i;if(esWeb&&e[1]===""&&e[2]===""&&e[3]===""&&e[4]===""){i={0:t}}else{i=e}return i},showTooltipOnGradebook:function(){return true},showSlidesGradebook:function(){return true},showPendingReview:function(d){$(".tema").each(function(e,t){var i=$(t);var n=i.attr("data-tema");var a=0;if(typeof d[n]!="undefined"){var r=d[n];for(var o in r){$("#act-pterevisar-"+o).hideBlink();if($(".subtema[data-subtema="+o+"]").length){for(var s in r[o]){var l=parseInt(r[o][s]);if(l){var c=blink.domain.showSlidesGradebook()?"icon-score-pdte":"icon-score-pdte-act";$("#act-pterevisar-"+o).showBlink().html('<span class="'+c+'"> </span> ').attr("data-tema",o).parent().addClass("revisable");a+=l;var u=$('.subtema[data-subtema="'+o+'"] .item');u=u.filter(function(){return $(this).data("nota")=="P"});$("#act-pterevisar-"+o).attr("data-alumno",$(u[0]).attr("data-alumno"))}}}}}i.find(".top .pending_activities_gbs").remove();if(a){i.find(".top").append('<span class="pending_activities_gbs"></span>')}});$('.item[data-nota="P"] a').click(function(){alumnos_correccion.alumno_actual=$(this).parent().attr("data-alumno");getAlumnosCorreccion($(this).parent().attr("data-tema"))})},showGradebookDropDowns:function(){return true},goToLegalNotes:function(e){redireccionar("/portal/avisolegal.php"+(typeof e!=="undefined"&&e?"?blinklang="+e:""),undefined,true)},goToContactUs:function(){redireccionar("/LMS/index.php?section=1#contacto",undefined,true)},goToFAQS:function(){redireccionar("/portal/faqs.php",undefined,true)},showCommentPopover:function(){return false},openActivity:function(t,i,n,a,r,o,s,l){var e=blink.theme.getStyleGradebook(),c=e&&e.canOpenActivity();if((!blink.isApp||blink.isApp&&blink.appVersion>=4.1)&&c){blink.rest.connection(function(e){if(!e&&(blink.user.esProfesor()&&typeof i!=="undefined"&&i!=blink.user.getID())){_showAlert(textweb("tablettxt_require_connection"))}else{return diagIrClase(t,i,n,a,r,o,s,l)}})}},showCreditMessageBox:function(t){blink.rest.connection(function(e){if(!e){_showAlert(textweb("tablettxt_require_connection"))}else{return showMsgBox("","/LMS/msgbox.php?typemsg=musthavecredit&idcourse="+t,550)}})},goToShopUrl:function(t){blink.rest.connection(function(e){if(!e){_showAlert(textweb("tablettxt_require_connection"))}else{return blink.rest.openUrl("targetBlank",t)}})},allowNavegationConcatenateGradebook:function(){return true},showActivitiesNoTriedOnFichaAlumno:function(){return true},countPendingNote:function(){return true},calculateRealSessionTime:function(){return},validarProgresoSlide:function(e){return e.tieneRespuestas()||e.getClassification()!=-1},showLinesMatching:function(e){return typeof isPhone!=="undefined"&&isPhone?false:typeof e!=="undefined"&&e.usarLineas},useAriaDragAndDrop:function(){return true},useAriaImageDragAndDrop:function(){return true},resizeInputFillBlanks:function(e,t,i){return false},showWiris:function(e){return false},allowCKEdShowCaption:function(){return true},allowSelectiveDownload:function(){return true},allowEditHomeworksFromCalifications:function(){return true}};a.checkServerFromUX=a.checkServerFromUX||function(){return false};a.checkFromUX=a.checkFromUX||function(e){if(blink.user.getUserTheme()!="tmpux"){return}var t=false;if(!t&&a.checkServerFromUX()){t=a.checkServerFromUX()}if(!t&&(blink.getReqParam(location.href,"_fromUX")==1||blink.getReqParam(location.href,"_fromUX")==2)){t=blink.getReqParam(location.href,"_fromUX")}if(!t&&a.localStorage.get("_fromUX_"+a.user.getID())){t=a.localStorage.get("_fromUX_"+a.user.getID())}if(t){a.localStorage.set("_fromUX_"+a.user.getID(),t);if(typeof e!=="undefined"){e(t)}return true}return false}})(blink);$(document).ready(function(){setJsTitles()});(function(e){e.activity=e.activity||{};var t=e.activity;t.state={ONLINE:1,REVISION:3};t.type={WEB:7};t.getFirstSlideIndex=function(){return window.secuencia[window.activeSlide]};t.divide=function(e){showMsgBox(null,"/LMS/msgbox.php?op=activity.divideActivity&idclase="+e)}})(blink);(function(e){var c={hashs:[],getHash:function(e,t){return sha1(e+JSON.stringify(t))},getNum:function(){return this.hashs.length},register:function(e){this.hashs[e]=1},unregister:function(e){delete this.hashs[e]},exists:function(e){return this.hashs[e]!==undefined}};e.isAJAXInProgress=function(){return c.getNum()>0};e.ajax=function(e,n,a,r){if(!a)a={};if(a.success||a.error||a.complete||a.statusCode){blink.log.error("Sólo se puede obtener respuesta ajax a través del parámetro callback");return}if(n===undefined)n=standardAJAX;var t={form:null,responseContainer:null,waitingElement:"#waitingImage",animation:false,changeCursor:false,urlMode:"auto"};r=$.extend(t,r||{});var i={type:"POST",async:true};a=$.extend(i,a||{});if(r.responseContainer&&!$(r.responseContainer).attr("id")){blink.log.error("Por el momento, responseContainer necesita un id como atributo");return}if(OFFLINE_ENGINE&&r.urlMode!="noDijest"){if(window.offline&&r.urlMode!="canOffline"&&(e.contains("ajax.php")||e.contains("msgbox.php"))){e=adjustOnlineURL(e)}else{e=adjustURL(e,false)}}if(isCacheHost(getHost(e))&&a.dataType!="script"){e=removeHost(e);e=adjustOnlineURL(e)}e=addAppParams(e);a.url=e;if(!blink.isApp){var o=typeof anti_csrf_token==="undefined"?"":anti_csrf_token;a.headers=$.extend(a.headers,{anti_csrf_token:o})}if(isOutsideURL(e)){a.crossDomain=true;if(a.async){if(isBlinkUrl(e)&&!OFFLINE_ENGINE){a.xhrFields={withCredentials:true}}}else{blink.log.error("Imposible hacer llamada síncrona a host externo "+e)}}if(r.form){if(a.data){blink.log.error("No se puede realizar petición ajax con formularios y datos");return}a.data=$(r.form).serialize()}if(window.onBeforeUnloadCalled&&a.async){blink.log.warning("Realizando llamada ajax asíncrona antes de cerrar pestaña")}var s=c.getHash(a.url,a.data);if(c.exists(s)){blink.log.warning("Llamada AJAX '"+a.url+"' en progreso. Abortar");return}c.register(s);blink.events.trigger("ajax:begin",a,r);if(r.changeCursor)document.body.style.cursor="wait";if(r.waitingElement)blink.theme.setWaitingAjax(r.waitingElement);if(r.responseContainer)blink.theme.setWaitingAjax(r.responseContainer);$("#msgdiv").html("");resetPingTimer();var l=false;return $.ajax($.extend(a,{success:function(e,t,i){if(r.sendAllCallbackParams){l={jqXHR:i,textStatus:t}}if(r.back){l={backFunction:r.back}}if(r.responseContainer)setAndExecute($(r.responseContainer).attr("id"),e);if(n)l?n(e,l):n(e);blink.events.trigger("ajax:success",a,r,e)},error:function(e,t,i){if(r.sendAllCallbackParams){l={jqXHR:e,textStatus:t}}if(r.back){l={backFunction:r.back}}if(n)l?n("ERROR",l):n("ERROR");blink.events.trigger("ajax:error",a,r)},complete:function(e,t){c.unregister(s);if(r.changeCursor)document.body.style.cursor="default";if(r.waitingElement)blink.theme.clearWaitingAjax(r.waitingElement);blink.events.trigger("ajax:complete",a,r)}}))};e.getJSON=function(e,t,i,n){if(!i)i={};i.dataType="json";return blink.ajax(e,function(e){if(e=="ERROR"){n&&n.onError&&n.onError()}else if(typeof e=="string")t(JSON.parse(e));else t(e)},i,n)};e.getScript=function(e,t,i){var n={async:false};t=$.extend(n,t||{});t.dataType="script";return blink.ajax(e,null,t,i)}})(blink);function getAJAX(e,t,i,n,a,r){jQuery.type(i)==="string"&&(i="#"+i);var o=n?"#"+n:null;var s=a=="cursor";var l={form:i,responseContainer:o,changeCursor:s};if(!s&&a)l.waitingElement="#"+a;blink.ajax(e,t,{async:!r},l)}function nullAJAXFunc(){}function standardAJAX(e){standardAJAXFunc(e,false)}function standardAJAXPopup(e){standardAJAXFunc(e,true)}function standardAJAXFunc(msg,msgbox){if(msg=="RELOAD"){if(msgbox)closeMsgBox();location.reload();return}if(msg.startsWith("GO")){if(msgbox)closeMsgBox();redireccionar(msg.substr(3));return}if(msg=="OK"){if(msgbox)closeMsgBox();return}if(msg.startsWith("OK")){var okmsg=msg.substring(2);showOKOrErrorMsg("OK",okmsg);return}if(msg.startsWith("ERROR")){errormsg=msg.substring(5);if(errormsg==""){blink.rest.connection(function(e){if(e==0){errormsg=textweb("tablettxt_require_connection")}else{errormsg=textweb("error_general_AJAX")}showOKOrErrorMsg(msg,errormsg)})}else{showOKOrErrorMsg(msg,errormsg)}}if(msg.startsWith("WARNING")){errormsg=msg.substring(7);if(errormsg=="")errormsg=textweb("warning_general_AJAX");showWarningMsg(msg,errormsg)}if(msg.startsWith("JSCRIPT")){jscript=msg.substring(7);eval(jscript)}}function loadScript(e,t,i,n,a,r,o){_crossDomain=o!=undefined?o:false;_url=e;_finished=false;if(r==undefined)r="script";if(modoVisualizacionLabel=="drm"){a=false;if((_url.indexOf("scormAPI_new.js.php")!==-1||_url.indexOf("seguimientoCurso.js.php")!==-1)&&_url.indexOf("idalumno=")!==-1||blink.isApp&&blink.activity.esdeber){_url="/include/"+adjustURL(e)}else{_url="/localdata/include/"+adjustURL(e)}}if(modoVisualizacionLabel!="standalone"&&modoVisualizacionLabel!="embed"){try{_asyncSCORM=t?_crossDomain:false;if(t&&n)showMask("white");function _finishAJAX(e){if(t&&n)hideMask();_finished=true;if(i)i(e)}if(isCacheHost(getHost(_url))){_url=removeHost(_url);_url=adjustOnlineURL(_url)}var s={url:_url,dataType:r,async:_asyncSCORM,crossDomain:_crossDomain};if(isCacheHost(getHost(_url))&&modoVisualizacionLabel!="drm"&&isOutsideURL(_url)&&isBlinkUrl(_url)&&!OFFLINE_ENGINE){s.xhrFields={withCredentials:true}}var l=$.ajax(s).done(function(e){_finishAJAX(e)}).fail(function(e,t,i){_finishAJAX(e)});if(_asyncSCORM){setTimeout(function(){if(l)l.abort();if(_asyncSCORM&&n)hideMask();if(!_finished){if(a)_showAlert(textweb("error_loading_scorm_1"));connected=false}},6e3)}}catch(e){blink.log.error("loadScript: ",e)}}}function loadPageWithAJAX(e){e=addAppParams(e);$(document.body).load(e)}function setAndExecute(divID,innerHTML){resetPingTimer();var div=document.getElementById(divID);if(div){div.innerHTML=innerHTML;var x=div.getElementsByTagName("script");for(var i=0;i<x.length;i++){eval(x[i].text)}}}(function(B){B.pages.catalog={};var C=B.pages.catalog;C.requestSample=function(e){showMsgBox("","/LMS/msgbox.php?op=course.requestsample&idcourse="+e,"560")};var scriptURI,searchURL,page,mode=0,panel=null,universe=1,order=1,f_group1=0,f_group2=0,f_group3=0,f_group4=0,grpby,onlynew;C.setInitParams=function(e,t,i,n,a,r,o,s,l,c,u,d,f){if(o==undefined)o="";if(s==undefined||s=="undefined")s="";if(l==undefined||l=="undefined")l="";if(c==undefined||c=="undefined")c="";if(u==undefined||u=="undefined")u="";if(d==undefined||d=="undefined")d="";if(f==undefined||f=="undefinded")f="";scriptURI=e+"?";searchURL=i;page=t;mode=n;panel=a;universe=r;order=o;f_group1=s;f_group2=l;f_group3=c;f_group4=u;grpby=d;onlynew=f};C.loadPage=function(e){for(i=0;i<=e;i++)if($("#page"+i).size()==0)$('<div id="page'+i+'" class="cursos_small_icon"></div>').insertAfter($("#page"+(i-1))).load(scriptURI+searchURL+"&icons=1&s="+i+"&m="+mode+"&u="+universe);$("#catalog_pages").width($("#catalog_pages").children().size()*panel.pageStep+100)};C.gotoPage=function(e){if(panel)panel.gotoPage(e);else redireccionar(scriptURI+searchURL+"&s="+e+"&m="+mode+"&u="+universe+"&o="+order+"&fg1="+f_group1+"&fg2="+f_group2+"&fg3="+f_group3+"&fg4="+f_group4+"&onlynew="+onlynew)};C.getPage=function(){if(panel)return panel.activePage;else return page};C.prevPage=function(e){C.gotoPage(C.getPage()-1)};C.nextPage=function(e){C.gotoPage(C.getPage()+1)};C.changeMode=function(e){redireccionar(scriptURI+searchURL+"&s=0&m="+e+"&u="+universe+"&o="+order+"&fg1="+f_group1+"&fg2="+f_group2+"&fg3="+f_group3+"&fg4="+f_group4+"&grp="+grpby+"&onlynew="+onlynew)};C.changeUniverse=function(e,t){var i=scriptURI+searchURL+"&resetbusqueda=1&s=0&m="+mode+"&u="+e+"&o="+order;if(t!=undefined){i+="&onlynew=1"}redireccionar(i)};C.changeOrder=function(e){redireccionar(scriptURI+searchURL+"&s=0&m="+mode+"&u="+universe+"&o="+e+"&fg1="+f_group1+"&fg2="+f_group2+"&fg3="+f_group3+"&fg4="+f_group4+"&grp="+grpby+"&onlynew="+onlynew)};C.changeGroupBy=function(grpby){var current_fgvalue=blink.getReqParam(location.href,"fg"+grpby);var current_grp=parseInt(blink.getReqParam(location.href,"grp"));var groupdata="&grp="+grpby;if(current_grp==grpby)groupdata="";if(current_fgvalue!="")eval("f_group"+grpby+"='';");redireccionar(scriptURI+searchURL+"&s=0&m="+mode+"&u="+universe+"&o="+order+"&fg1="+f_group1+"&fg2="+f_group2+"&fg3="+f_group3+"&fg4="+f_group4+groupdata+"&onlynew="+onlynew)};C.changeGroupFilter=function(e,t){if(e==1)params_group="&fg1="+t+"&fg2="+f_group2+"&fg3="+f_group3+"&fg4="+f_group4;else if(e==2)params_group="&fg1="+f_group1+"&fg2="+t+"&fg3="+f_group3+"&fg4="+f_group4;else if(e==3)params_group="&fg1="+f_group1+"&fg2="+f_group2+"&fg3="+t+"&fg4="+f_group4;else if(e==4)params_group="&fg1="+f_group1+"&fg2="+f_group2+"&fg3="+f_group3+"&fg4="+t;redireccionar(scriptURI+searchURL+"&s=0&m="+mode+"&u="+universe+"&o="+order+params_group+"&onlynew="+onlynew)};C.changeOnlyNew=function(e){var t=scriptURI+searchURL+"&s=0&m="+mode+"&u="+universe+"&o="+order+f_group1+"&fg2="+f_group2+"&fg3="+f_group3+"&fg4="+f_group4+(e?"&onlynew=1":"");redireccionar(t)}})(blink);(function(e){e.modules.contact={};var t=e.modules.contact;t.sendContactForm=function(e,t){if(!verificarSelect(["device"]))return false;if(!verificarVacios(["name","email","country","center","locale"]))return false;if($("#type").val()=="1"||$("#type").val()=="6")if(!verificarVacios(["telefono"]))return false;if(!verificarEmail(["email"]))return false;if($("#acepto").size()>0&&e.aceptocondiciones.checked==false){_showAlert(text_web.registro_42);e.aceptocondiciones.focus();return false}var i="/LMS/ajax.php?op=help.contacto";getAJAX(i,function(e){if(e.startsWith("OK")){_showAlert(e.substring(2));if(t)redireccionar(t);if(!t)closeMsgBox()}else _showAlert("Error")},e);return true}})(blink);(function(r){r.pages.courseIndex={};var e=r.pages.courseIndex;e.loadSeguimientoCurso=function(e,t){t=t||"";r.trackCourse={};r.trackCourse.gradoavancecurso=0;r.trackCourse.gradoavancetemas=new Array;r.trackCourse.gradoavancetransparencias=new Array;r.trackCourse.gradotipotransparencias=new Array;r.trackCourse.gradoavanceintentos=new Array;r.trackCourse.numacttem=new Array;r.trackCourse.lastact=0;r.trackCourse.lastchange=0;var i="/include/javascript/seguimientoCurso.js.php?idcurso="+e;if(t!="")i+="&idalumno="+t;loadScript(i,true,function(){if(typeof actividades!=="undefined"&&actividades){var e=$(".td_actividad").size();var t=0;for(id_clase in actividades){if(parseInt(id_clase)>0){if(actividades[id_clase]!=null){reg=actividades[id_clase]}else{reg={estado:-1,nota:0}}if(reg["estado_transparencias"]){r.trackCourse.gradoavancetransparencias[id_clase]=reg["estado_transparencias"]}var i=0;if(r.trackCourse.gradoavancetransparencias[id_clase]&&r.trackCourse.gradoavancetransparencias[id_clase].length){i=r.trackCourse.gradoavancetransparencias[id_clase].split("1").length-1;r.trackCourse.gradoavancetransparencias[id_clase]=r.trackCourse.gradoavancetransparencias[id_clase].split(",")}r.trackCourse.gradotipotransparencias[id_clase]=reg["tipo_transparencias"]&&reg["tipo_transparencias"].length?reg["tipo_transparencias"].split(","):[];r.trackCourse.gradoavanceintentos[id_clase]=reg["intentos"]&&reg["intentos"].length?reg["intentos"].split(","):reg["intentos"];indiceCursoRellenarNota(id_clase,reg["estado"],reg["nota"],window.maxClasificacion||10);addavance=0;if(reg["estado"]==0&&i>0)addavance+=.5;if(reg["estado"]==1||reg["estado"]==2)addavance+=1;if(reg["estado"]>0)t+=1;if(reg["idtema"]){a=reg["idtema"];valtem=0;if(r.trackCourse.gradoavancetemas[a]!==undefined)valtem=r.trackCourse.gradoavancetemas[a];valtem+=addavance;r.trackCourse.gradoavancetemas[a]=valtem;if(r.trackCourse.numacttem[a]===undefined)r.trackCourse.numacttem[a]=0;r.trackCourse.numacttem[a]+=1}if(blink.theme.isAdaptative()&&blink.user.esAlumno()&&reg["fecha_modificacion"]){if(!r.trackCourse.lastact||moment(r.trackCourse.lastchange,"YYYY-MM-DD HH:mm:dd").isBefore(moment(reg["fecha_modificacion"],"YYYY-MM-DD HH:mm:dd"))){r.trackCourse.lastact=id_clase;r.trackCourse.lastchange=reg["fecha_modificacion"]}}}}}if(window.ntotacts==undefined){var n=$(".reviewsection .td_actividad").size();ntotacts=e-n}r.trackCourse.gradoavancecurso=ntotacts>0?100*(t/ntotacts):0;for(var a in r.trackCourse.gradoavancetemas){if(parseInt(a)==a){if(r.trackCourse.gradoavancetemas[a]==r.trackCourse.numacttem[a]){matchFilter("","idtemaprev:"+a,false)}if(window.temasnact&&temasnact[a]!=undefined)r.trackCourse.numacttem[a]=temasnact[a];r.trackCourse.gradoavancetemas[a]=100*(r.trackCourse.gradoavancetemas[a]/r.trackCourse.numacttem[a])}}r.events.trigger("loadSeguimientoCurso")},false,false)}})(blink);(function(e){e.messages=e.messages||{};e.messages.poll={};var t=e.messages.poll;t.vote=function(e){var t=$(e),i=t.data("poll-id"),n=t.data("option");getAJAX("/LMS/ajax.php?op=BlinkCore.messagepoll_vote&pollid="+i+"&vote="+n,function(e){if(e.startsWith("OK")){t.closest(".js-message-wrapper").replaceWith(e.substring(2))}else standardAJAXFunc(e)},false)};t.reply=function(e,t){e.preventDefault();var i=$(t),n=i.closest(".js-reply-wrapper"),a=i.closest(".js-message").find(".reply-wrapper"),r=a.find("textarea");n.hide();a.slideDown();r.focus();var o=a.offset().top;mainNavOpen&&(o-=100);$("html, body").animate({scrollTop:o},400)};t.openReplies=function(e,t){e.preventDefault();var i=$(t);currentContent=i.html(),nextContent=i.data("alt-text"),showed=i.data("showed"),replies=i.closest(".js-message").find(".js-message-wrapper"),hiddenDerivedList=$(".listado_derivados.hidden");i.data("alt-text",currentContent).html(nextContent);if(hiddenDerivedList){var n=hiddenDerivedList.find(".js-message-wrapper");n.hide();hiddenDerivedList.removeClass("hidden");n.slideUp("slow")}if(showed){replies.slideDown("slow")}else{replies.slideUp("slow")}i.data("showed",!showed)}})(blink);(function(c){"use strict";var t="/rest/";var r=2.8;var i=false;var n=[];$(document).ready(function(){i=true;for(var e=0;e<n.length;e++){n[e].call(window)}});var u={location:function(e,t){if(typeof t=="undefined")t={};var i=a(e,t);if(blink.isWinRTApp&&blink.appVersion<2.9){window.external.notify(i)}else{goToHref(i)}},form:function(e,t){var i=o(e);var n=$("#rest_form_aux");if(!n.size()){n=$("<form />").attr("method","post").attr("id","rest_form_aux").css({width:0,height:0,position:"absolute"});$("body").append(n)}n.html("").attr("action",i);for(var a in t){var r=$("<input />").attr("type","hidden").attr("name",a).val(t[a]);n.append(r)}n.submit()},ajax:function(n,e,t){var i=s(n);e=e?l(e):[];var a=$.extend({},{url:i,data:e,dataType:"json",crossDomain:true,error:function(e,t,i){blink.log.error("Error al ejecutar API Rest por ajax "+n+": "+i+" ("+t+")")}},t);var r=a.type||"get";var o=a.complete||a.success;if(window.location.protocol=="https:"&&r=="get"&&o){u.image(n,e);return}$.ajax(a)},image:function(e,t){if(!t)t={};t.nocache=Math.random();var i=o(e,t);(new Image).src=i}};var s=function(e){if(!i)window.blink.log.error("Llamando a funciones de la rest antes de iniciarse");return f(offlineServer+t+e)};var d=function(e){var t=[];var i;for(var n in e){t.push(n+"="+window.encodeURIComponent(e[n]))}return t.join("&")};var o=function(e,t){var i=s(e);if(t){t=l(t);i+="?"+d(t)}return i};var a=function(e,t){var i;if(blink.isWinRTApp&&blink.appVersion<2.9){t=l(t);t["protocol"]=e;return window.JSON.stringify(t)}else if(blink.appVersion>=r){return o(e,t)}else{var n;if(e=="openUrl"){n=t["mode"];i=t["url"]}else{n=e;i="";if(t){for(var a in t){i=t[a];break}}}i=f(i);return n+"://"+i.replace("://","//")}};var l=function(e){for(var t in e){e[t]=f(e[t])}return e};var f=function(e){if(typeof e=="string"){if(e.startsWith("{"))return e;if(e.startsWith("../"))e=e.substr(2);if(e.match(/^https?:\/\//)||deleteQuery(e).match(/\.php$/)){e=addAppParams(e)}}return e};var e={};e.onReady=function(e){n.push(e)};e.alert=function(e,t){if(blink.isOfflinePCApp){window.alert(e)}else if(blink.isAndroidApp){window.Android.showToast(e)}else{if(blink.appVersion>=2.8)e=base64_encode(e);var i={msg:e};if(t)i["title"]=t;u.location("alert",i)}};e.ibooks=function(e){u.location("ibooks",{path:e})};if(!blink.isOfflinePCApp){e.flash=function(){msgIncompatibleDevice()};if(blink.appVersion>=3.8){e.audio=function(e,t,i){if(i){return blink.theme.rest.audio(e,t)}u.image("audio",{url:e})};e.video=function(e,t,i){if(isOnlineServiceUrlVideo(e)){blink.rest.openUrl("viewer",adaptUrlToEmbed(e))}else{if(i){return blink.theme.rest.video(e,t)}u.image("video",{url:e})}};e.image=function(e){u.image("image",{url:e})}}else{e.audio=function(e){u.location("media",{url:e})}}}e.updateoffline=function(e,t,i){closeMsgBox();callOfflinePCParent("events.rest.onBeforeUpdateOffline");showMask(null,true);if(e){if(i){e=adjustOnlineURL(e,false)}else{e=adjustURL(e,false,true);if(e.startsWith("../"))e=e.substr(2);else if(!e.startsWith("http")&&!e.startsWith("/"))e="/"+e}var n={url:e,section:t};u.location("updateoffline",n)}else{u.location("updateoffline")}};e.updateofflineWithoutReload=function(){u.image("updateofflineWithoutReload")};e.openUrl=function(e,t,i){if(t.indexOf("page://")!==-1){blink.rest.goToPageFromToc(t.split("page://")[1]);return}var n=false;if(shouldOpenUrlNewIframe(t)){t=removeOpenNewIframeTag(t);n=true}t=getFinalUrl(t);if(i===undefined){i=blink.getReqParam(t,"allowOrientationChange")==1}t=t.replace(/[&|?]allowOrientationChange=[0-1]/,"");var a={mode:e,url:t};if(i){a["allowOrientationChange"]=1}if(blink.isOfflinePCApp){switch(true){case isExternalURL(t)||t.contains("popup=1")||t.contains("marsupial=1")||n:openPopup(t);break;case e==="targetBlank":window.open(t,"_blank");break;default:u.location("openUrl",a)}return}a.mode=a.mode==="targetBlank"?"fullscreen":a.mode;u.location("openUrl",a)};e.saveImage=function(e,t,i){e=getFinalUrl(e);var n={script:e,inputGroup:t,callback:i};u.image("saveImage",n)};e.openUrlInExternalWindow=function(e){e=getFinalUrl(e);var t={url:e};u.location("openUrlInExternalWindow",t)};e.openPDF=function(e,t,i,n){t=getFinalUrl(t);var n=n||false,a={mode:e,url:t,page:i!==undefined?i:-1,from_related:n};if(blink.isOfflinePCApp){return}u.location("openPDF",a)};e.photo=function(){u.location("photo")};e.closeWindow=function(){u.image("closeWindow")};e.logout=function(){u.location("logout")};e.login=function(e,t){var i={userToken:e,userId:t};u.location("login",i)};e.setParam=function(e,t,i){var n={name:e,value:t};u.ajax("setParam",n,{success:i})};e.getParam=function(e,i,n){var t={name:e};var a=i;if(typeof i=="function"){a=function(e){var t=e&&e.value&&e.value!==null?e.value.toString():n;i(t)}}u.ajax("getParam",t,{success:a})};e.delParam=function(e,t){var i={name:e};u.ajax("delParam",i,{success:t})};e.showWebView=function(e){u.image("showWebView",{state:JSON.stringify(e)})};e.setContexts=function(e){u.image("setContexts",{contexts:JSON.stringify(e)})};e.setButton=function(e){u.image("setButton",{button:JSON.stringify(e)})};e.setButtons=function(e){for(var t=0;t<e.length;t++){this.setButton(e[t])}};e.changeValueButton=function(e,t,i){var n=false,a=0;if(typeof e!=="undefined"&&typeof t!=="undefined"&&typeof i!=="undefined"&&blink.buttons&&blink.isApp){for(a;a<blink.buttons.length;a++){if(blink.buttons[a].id===e&&typeof blink.buttons[a][t]!=="undefined"){blink.buttons[a][t]=i;n=true;break}}if(n){this.setButton(blink.buttons[a])}}return n};e.connection=function(i){u.ajax("connection",{},{success:function(e){var t=e&&e.connected!==undefined?e.connected:-1;i(t)},error:function(){i(-1)}})};e.exit=function(){window.onBeforeUnloadCalled=true;if(blink.isOfflinePCApp||blink.appVersion<3.91){showCurso()}else if(blink.isAndroidApp){u.ajax("exit",{},{error:function(){}})}else{u.location("exit")}};e.searchWordInDictionary=function(e){u.image("searchWordInDictionary",{search:JSON.stringify(e)})};e.audioRecorderWindow=false;e.closeAudio=function(e){if(c.isApp&&!c.isOfflinePCApp){u.image("closeAudio");return}};e.saveAudio=function(e,t,i,n,a,r){if(c.isWinRTApp){alert(textweb("audiorecorder.not_suported"));return}if(c.isOfflinePC){showMsgBox(false,"template:audiorecorder",false,{name:e,callback:a,id:n,maxsecs:i,script:t,idActivity:r});return}var o={name:e,callback:a,id:n,maxsecs:i,script:t,idActivity:r};if(c.isApp&&!c.isOfflinePCApp){u.image("saveAudio",o);return}var s="BlinkAudioRecorder",l=openPopup("about:blank",s);l&&l.blur();window.focus();c.ajax("/LMS/ajax.php?op=audioRecorder.getURL",function(e){if(e!=="ERROR"){var t=json_decode(e),i=t&&t.URL;if(i){i+="&"+d(o);openPopup(i,s);l&&l.focus();return}}l&&l.close();alert(textweb("error_general_AJAX"))})};e.elementsStatus=function(){u.ajax("status",{},{success:function(e){blink.selectiveDownload.updater.load(e)},error:function(){blink.selectiveDownload.updater.doLong();return false}})};e.downloadElement=function(e,t,i){u.ajax("offlinePackageDownload?elemId="+e+"&elem="+t+"&downloadType="+i,{},{success:function(e){blink.rest.elementsStatus()},error:function(){return false}})};e.stopDownloadElement=function(e,t){u.ajax("offlinePackageDownloadStop?elemId="+e+"&elem="+t,{},{success:function(e){blink.rest.elementsStatus()},error:function(){return false}})};e.pauseDownloadElement=function(e,t){u.ajax("offlinePackagePauseDownload?elemId="+e+"&elem="+t,{},{success:function(e){blink.rest.elementsStatus()},error:function(){return false}})};e.resumeDownloadElement=function(e,t){u.ajax("offlinePackageContinueDownload?elemId="+e+"&elem="+t,{},{success:function(e){blink.rest.elementsStatus()},error:function(){return false}})};e.deleteElement=function(e,t){u.ajax("offlinePackageUninstall?elemId="+e+"&elem="+t,{},{success:function(e){blink.rest.elementsStatus()},error:function(){return false}})};e.goToTab=function(e,t){if(blink.isApp&&!blink.isOfflinePCApp&&!blink.isWinRTApp&&blink.appVersion>4.12){var i={tabid:e,callback:t};u.ajax("goToTab",i)}};c.restApp=e})(blink);(function(o){"use strict";o.rest={};var e=o.rest;e.pageBack="";e.exit=function(){showCurso()};e.connection=function(e){e(-1)};e.tarea=function(e,t){var i=e.split("-");var n=i.length==2?parseInt(i[1]):0;if(!t)t=window.idcurso;e="/coursePlayer/clases2.php?"+(t?"idcurso="+t+"&":"")+"idclase="+i[0]+"&modo="+window.modoVisualizacion+"&popup=1";if(n>0)e+="&numSec="+n;openPopup(e)};e.openUrl=function(e,t,i){if(t.indexOf("page://")!==-1){this.goToPageFromToc(t.split("page://")[1]);return}var n=false;if(shouldOpenUrlNewIframe(t)){t=removeOpenNewIframeTag(t);n=true}if(e==="replace"){redireccionar(t)}else if(shouldShowUrlInIframe(t)&&!n){showIFrame(t)}else{openPopup(t)}};e.showWebView=function(e){blink.log.debug("showWebView - not implemented: "+e);return};e.openUrlInExternalWindow=function(e){openPopup(e)};e.openPDF=function(e,t,i){blink.log.debug("openPDF - not implemented: "+t+","+e);return};e.goToPageFromToc=function(p,h){if(typeof bpdf!="undefined"){var m=bpdf.webViewer.getCurrentPageNumber(),h=h||false}blink.theme.spinner.show();blink.getCourse(window.idcurso).done(function(e){var t=e,s,l=0,c,u="",d="",f=0;if(blink.activity.currentStyle&&blink.activity.currentStyle.shouldHideTOCFromPine&&blink.activity.currentStyle.shouldHideTOCFromPine()){d="&_from_related=1"}if(h){var n=window.idclase,a,r=0,o;$.each(t.units,function(e,t){$.each(t.subunits,function(e,t){if(t.type=="libro"){if(o==undefined){o=parseInt(t.offset)||0}else{if(o>=i){o==i}}var i=parseInt(t.offset)||o+r;if(t.id==n){u="&_prevpage="+(m+i);return false}if($.type(t.pags)=="array"){a=t.pags.length}else if($.type(t.pags)=="string"){a=parseInt(t.pags)}else if($.type(t.pags)=="number"){a=t.pags}r+=a}})})}$.each(t.units,function(e,t){$.each(t.subunits,function(e,t){if(t.type=="libro"){if(c==undefined){c=parseInt(t.offset)||0}else{if(c>=i){c==i}}var i=parseInt(t.offset)||c+l;if($.type(t.pags)=="array"){s=t.pags.length}else if($.type(t.pags)=="string"){s=parseInt(t.pags)}else if($.type(t.pags)=="number"){s=t.pags}l+=s;if(p>i&&p<=i+s){var n="/coursePlayer/librodigital_html.php?idcurso="+window.idcurso+"&idclase="+t.id+u+d;if(blink.isTabletApp){blink.rest.openPDF(window.idclase?"replace":"viewer",n,p-i);blink.theme.spinner.hide()}else{if(t.id==window.idclase){var a=p-i;bpdf.webViewer.setCurrentPageNumber(a);blink.lateralToc.hide();blink.theme.spinner.hide();if(h){blink.theme.buttonState.hidden("#tool-back",false);$("#tool-back").click(function(){bpdf.webViewer.setCurrentPageNumber(m);blink.theme.buttonState.hidden("#tool-back",true)})}}else{var r=t.id;var o=window.idcurso;blink.localStorage.set("user"+blink.user.getID()+"_clase"+r+"_curso"+o+"_eBookActualPage",p-i);redireccionar(n)}}f++;return false}}})});if(f==0){$(".no-exists").removeClass("hidden");_showAlert(textweb("relatedPage_wrong"))}blink.theme.spinner.hide()})};e.panel=function(e,t,i){if(!i||typeof i==="undefined"){i=false}$("#iframe_div").data("isAnswerKey",i);showIFrame(e,500,400,true,null,null,null,false);$("#modal-backdrop").hideBlink();$("#iframe_div").addClass("panel").draggable({containment:"parent"});$(".btn-close-iframe").find("a").on("tap",function(e){cerrarIframe()}).before("<h4></h4>").end().find("h4").text(t)};e.saveAudio=function(e,t,i,n,a,r){if(!o.isApp){showMsgBox(false,"template:audiorecorder",false,{name:e,callback:a,id:n,maxsecs:i,script:t,idActivity:r});return}blink.restApp.saveAudio(e,t,i,n,a,r)};e.isDictionaryAvailable=function(){return blink.dictionary!==undefined&&blink.dictionary.isAvailable()};e.searchWordInDictionary=function(e){if(!this.isDictionaryAvailable()){alert(text_web.seguridad_3);return}var n="BlinkDict",a=openPopup("about:blank",n);a&&a.blur();window.focus();blink.ajax((window.IN_DEVELOPMENT?"":window.WEBS)+"/coursePlayer/dictionary.php?q="+encodeURIComponent(e),function(e,t){if(t&&t.jqXHR.status===200){var i=json_decode(e);if(i&&i.url){openPopup(i.url,n);a&&a.focus();return}}a&&a.close();if(t&&t.jqXHR.status===403){alert(textweb("error_general_AJAX"));return}else if(t&&t.jqXHR.status===404){alert(textweb("tablettxt_word_not_found"));return}else if(t&&t.jqXHR.readyState===0){alert(textweb("tablettxt_require_connection"));return}else{standardAJAXFunc(e);return}},{method:"GET"},{urlMode:"noDijest",sendAllCallbackParams:true,animation:true})};e.setParam=function(e,t,i){return false};e.getParam=function(e,t,i){return false};e.delParam=function(e,t){return false};e.elementsStatus=function(){return false};e.downloadElement=function(e,t,i){return false};e.stopDownloadElement=function(e,t){return false};e.pauseDownloadElement=function(e,t){return false};e.resumeDownloadElement=function(e,t){return false};e.deleteElement=function(e,t){return false};e.goToTab=function(e,t){return false}})(blink);(function(e){"use strict";var a=function(){try{_loadSCORMData()}catch(e){r(e)}createAudioButtons();createVideoButtons();t()};var t=function(){$("#loadingScorm").hide();var e=$("#t0_iframe").attr("src_wrk");if(e)$("#t0_iframe").attr("src",e)};var r=function(e){window.scormFailed=true;blink.log.error("Error en blink.scorm.init()",e)};var i=function(e,t){if(window.editar||["embed","standalone"].contains(window.modoVisualizacionLabel)){$(document).ready(function(){a()})}else if(!window.shouldLoadScorm){$(document).ready(function(){a()})}else{var i=function(e){if(e&&e.mode!=undefined){try{processJsonScormData(e)}catch(e){r(e)}}$(document).ready(function(){a();if(window.scormFailed&&!editar){_showAlert(textweb("scorm_1"))}})};if(blink.user.esAnonimo()||!window._permitirFinishClass){i(null)}else{var n="/include/javascript/scormAPI_new.js.php"+"?idcurso="+(e?e.idcurso:window.idcurso)+"&idclase="+(e?e.idclase:window.idclase)+(window.idalumno?"&idalumno="+window.idalumno:"");loadScript(n,t?false:true,i,window.offline,true,"json")}}};e.initScorm=i})(blink);(function(e,o){"use strict";e.TemplateCache={templates:{},get:function(e){var t=this.templates[e];if(!t){t=$(e).html();this.set(e,t)}return t},set:function(e,t){this.templates[e]=t},render:function(e,t,i,n){$(i).html(this.fetch(e,t,n))},fetch:function(e,t,i){var n=null;if(i!==undefined){n={};for(var a in i){n[a]=this.get(i[a]);o.parse(n[a])}}var r=this.get(e);o.parse(r);return o.render(r,t,n)},DropDown:function(e,t,i,r,o){if(r===undefined){r=false}if(o===undefined){o=false}var n=function(e,t){var i=[];for(var n in e){if(e.hasOwnProperty(n)){var a=[];a["key"]=n;a["text"]=e[n];a["selected"]=e[n]===t;i.push(a)}}if(o){i.reverse()}if(r){var a=[];a["key"]="";a["text"]="";a["selected"]=t==="";i.unshift(a)}return i};var a={name:e,options:n(t,i)};return a}}})(window.blink,window.Mustache);(function(a){a.tools={DRAW:1,HIGHLIGHT:2,BRUSH:4,NOTE:8,ERASER:16};var u=a.tools;u.startw=40;u.starth=40;u.endw=200;u.endh=200;u.mmToPx=function(e){return e};u.pxToMm=function(e){return e};u.closeNotesOnEvent=function(e){if($(e.target).parents(".nota").size()==0)blink.tools.closeNotes()};u.getIndiceFromID=function(e,t){if(e){for(var i=0;i<e.length;i++){if(e[i].ID==t)return i}}return-1};u.getCanvasIndexFromID=function(e){var t=e.indexOf("_");if(t==-1)return-1;return e.substring(4,t)};u.updateNotes=function(){$(".digitalnote").each(function(){var e=this.id.substr(10);var t=u.getCanvasIndexFromID(e);var i=u.getIndiceFromID(notesArray[t],e);if(i!=-1)notesArray[t][i].txt=$(this).val()})};u.updateNote=function(e){u.updateNotes();if(!window.hayCorreccionesProfesorSinGrabar&&checkModoCorreccion()&&idalumno&&esProfesor)window.hayCorreccionesProfesorSinGrabar=1};u.closeNotes=function(){a.theme.toolsCloseNotes()};u.deleteNote=function(e){var t=u.getCanvasIndexFromID(e);if(t==-1)return;var i=u.getIndiceFromID(notesArray[t],e);$("#"+e).fadeOut("slow",function(){$(this).parent(".nota_pos").remove()});notesArray[t].splice(i,1);if(!window.hayCorreccionesProfesorSinGrabar&&checkModoCorreccion()&&idalumno&&esProfesor)window.hayCorreccionesProfesorSinGrabar=1};u.getNewID=function(e){var t=-1;var i=window.notesArray[e];if(!i)i=[];for(var n=0;n<i.length;n++){var a=i[n];if(!a||!a.ID)continue;var r=a.ID;var o=r.indexOf("_");if(o==-1)return 0;var s=parseInt(r.substring(o+1));if(s>t)t=s}return t+1};u.onEndDrag=function(e,t,i,n){var a=t.target.id.substring(4);var r=u.getCanvasIndexFromID(a);if(r==-1)return;var o=this.getIndiceFromID(e[r],a);u.readUI(e[r],o,i)};u.allocateInContainment=function(e,t){var i=e.parent(),n=e.closest(".canvas-wrapper"),a=u.endw,r=u.startw,o=a,s=n.width()-o,l,c;if(t){l=i.position().left<s?"initial":0;c=e.offset().top<a/2?"initial":r*-1}else{l=c="initial"}e.css({right:l,bottom:c})};u.readUI=function(e,t,i){e[t].x=parseInt(u.pxToMm(i.position.left));e[t].y=parseInt(u.pxToMm(i.position.top))};u.urlify=function(e){var t=/((?:(http|https|Http|Https|rtsp|Rtsp):\/\/(?:(?:[a-zA-Z0-9\$\-\_\.\+\!\*\'\(\)\,\;\?\&\=]|(?:\%[a-fA-F0-9]{2})){1,64}(?:\:(?:[a-zA-Z0-9\$\-\_\.\+\!\*\'\(\)\,\;\?\&\=]|(?:\%[a-fA-F0-9]{2})){1,25})?\@)?)?((?:(?:[a-zA-Z0-9][a-zA-Z0-9\-]{0,64}\.)+(?:(?:aero|arpa|asia|a[cdefgilmnoqrstuwxz])|(?:biz|b[abdefghijmnorstvwyz])|(?:cat|com|coop|c[acdfghiklmnoruvxyz])|d[ejkmoz]|(?:edu|e[cegrstu])|f[ijkmor]|(?:gov|g[abdefghilmnpqrstuwy])|h[kmnrtu]|(?:info|int|i[delmnoqrst])|(?:jobs|j[emop])|k[eghimnrwyz]|l[abcikrstuvy]|(?:mil|mobi|museum|m[acdghklmnopqrstuvwxyz])|(?:name|net|n[acefgilopruz])|(?:org|om)|(?:pro|p[aefghklmnrstwy])|qa|r[eouw]|s[abcdeghijklmnortuvyz]|(?:tel|travel|t[cdfghjklmnoprtvwz])|u[agkmsyz]|v[aceginu]|w[fs]|y[etu]|z[amw]))|(?:(?:25[0-5]|2[0-4][0-9]|[0-1][0-9]{2}|[1-9][0-9]|[1-9])\.(?:25[0-5]|2[0-4][0-9]|[0-1][0-9]{2}|[1-9][0-9]|[1-9]|0)\.(?:25[0-5]|2[0-4][0-9]|[0-1][0-9]{2}|[1-9][0-9]|[1-9]|0)\.(?:25[0-5]|2[0-4][0-9]|[0-1][0-9]{2}|[1-9][0-9]|[0-9])))(?:\:\d{1,5})?)(\/(?:(?:[a-zA-Z0-9\;\/\?\:\@\&\=\#\~\-\.\+\!\*\'\(\)\,\_])|(?:\%[a-fA-F0-9]{2}))*)?(?:\b|$)/gi;var i=e.replace(t,function(e){var t=e;if(!e.match(/^http[s]?\:\/\//)){t="http://"+e}return"<a href=\"javascript:blink.rest.openUrl('fullscreen','"+t+"')\">"+e+"</a>"});return i};u.htmltoTexarea=function(e){return e.replace(/<br\/>/g,"\r\n")};u.drawNote=function(e,t,i,n){a.theme.toolsDrawNote(e,t,i,n)}})(blink);(function(f){f.toolsNew={};var e=function(){this.name="search";this.isReady=false;this.documents=Array()};e.prototype.add=function(e){this.documents.push(e);this.searchEngine.add({id:e.id,title:e.title,body:e.body,tags:e.tags})};e.prototype.loadIndexFromCourseID=function(i,n,e,a){var r=this;var t=function(e){var t=r.loadIndexFromJSON(i,json_encode(e),a);n&&n(t,e)};var o=function(e){n&&n(false)};var s=idGrp="";var l=getUrlParameters();if(typeof idGrpPlanning!="undefined"||l["_idgrplanning"]){idGrp=typeof idGrpPlanning!="undefined"?idGrpPlanning:l["_idgrplanning"];s="&idgrupo="+idGrp}var c=typeof l["editar"]!=="undefined"?l["editar"]:0;if(e){var u=window.WEBS+"/coursePlayer/curso_json.php?idcurso="+i+"&_completo=true"+s;u+=c==1?"&editar=1":"";f.getJSON(u,t,{method:"GET"},{urlMode:"noDijest",onError:o})}else{var d=f.getCourse(i,true,false,idGrp,c);if(d){d.fail(o).done(t)}}};e.prototype.loadIndexFromJSON=function(e,t,i){var n=lunr(function(){String.prototype.startsWith=function(e,t){t=t||0;return this.indexOf(e,t)===t};try{this.use(lunr[window.IDIOMA.toLowerCase()])}catch(e){}this.pipeline._stack=this.pipeline._stack.filter(function(e){return!e.label.startsWith("stopWordFilter")});this.field("title",{boost:10});this.field("body");this.field("tags");this.ref("id")});n.pipeline.remove(n.stopWordFilter);this.searchEngine=n;var a=json_decode(t),r=1,o=1,s=this;var l=function(e){var t="";var i="";if(e.hasOwnProperty("indexTags")&&e.indexTags&&e.hasOwnProperty("tags")&&e.tags){t+=i+e.tags;i=" "}if(e.hasOwnProperty("keywords")&&e.keywords){t+=i+e.keywords;i=" "}return t};_.each(a.units,function(a){var e=false;if(a.planning&&typeof f.groupPlanning!="undefined"&&f.groupPlanning.checkGroupPlanning(a.planning.startDate,a.planning.endDate)&&f.user.esAlumno(true)){return}if(i){s.add({title:a.title,body:a.description||"",href:"javascript:void(0)",id:a.id,disabled:!a.resources.length&&!a.subunits.length,tags:l(a),isResouce:false,isActivity:false,isSlide:false})}_.each(a.resources,function(e){s.add({title:e.title,body:e.description||e.summary&&e.summary.text[0]||"",href:e.url,id:e.id,onclickTitle:!f.isApp?e.onclickTitle:"",tags:l(e),isResource:true,isActivity:false,isSlide:false})});_.each(a.subunits,function(n){if(typeof n.planning!="undefined"&&n.planning&&f.groupPlanning.checkGroupPlanning(n.planning.startDate,n.planning.endDate)&&f.user.esAlumno(true)){return}s.add({title:n.title,subtitle:textweb("slide_search_1")+" "+a.title,body:n.description||n.summary&&n.summary.text[0]||"",href:n.url,onclickTitle:!f.isApp?n.onclickTitle:"",id:n.id,tags:l(n),isResource:false,isActivity:true,isSlide:false});_.each(n.sections,function(i){_.each(i.slides,function(e){var t=typeof window.MAX_CHAR_SEARCH_SLIDES!=="undefined"&&n.title.length>window.MAX_CHAR_SEARCH_SLIDES?limitarString(n.title,window.MAX_CHAR_SEARCH_SLIDES):n.title;s.add({id:o++,body:e.texto,href:n.url+"&numSec="+e.numSec,title:i.title,subtitle:textweb("slide_search_1")+" "+a.title,description:textweb("slide_search_2")+" "+t,page:textweb("slide_search_3")+" "+i.page,isResource:false,isActivity:false,isSlide:true})})})})});this.isReady=true;return true};e.prototype.search=function(e){if(!this.isReady)return false;e=this.prepareText(e);var t=this.searchEngine.search(e);var i=this;return _.map(t,function(t){return _.find(i.documents,function(e){return e.id==t.ref})})};e.prototype.prepareText=function(e){var t=e.split(" ");t=t.filter(function(e){return e.length>2});return t.join(" ")};f.toolsNew.searchTool=e;var t=function(){this.name="search";this.isReady=false;this.documents=Array()};t.prototype=new e;t.prototype.loadIndexFromJSON=function(e,t,n){var i=lunr(function(){this.field("tags");this.ref("id")});i.pipeline._stack=[];this.searchEngine=i;var a=json_decode(t),r=1,o=this;_.each(a.units,function(e){var t=n?n(e.number):false;var i=e.description;_.each(e.subunits,function(e){o.searchEngine.add({id:r++,title:e.title,body:e.description,href:e.url,isResource:false,id:e.id,tags:i});o.add({id:r++,title:e.title,body:e.description,href:e.url,isResource:false,id:e.id,tags:i})})});this.isReady=true;return true};f.toolsNew.contextualSearchTool=t;var i=function(){function rangyTool(){this.name="rangy"}rangyTool.prototype.init=function(){this.enable=false;this.activeCssClass="color-"+colorSelected.substr(1);this.toolType;rangy.init();this.highlighter=new Array;var n=this;_.each(f.activity.getPrefijos(),function(i){$(document).ready(function(){n.highlighter[i]=rangy.createHighlighter();$(n.getRootNode(i)).on("mouseup",function(){if(n.enable){var e=$.trim(window.getSelection().toString()).length;if(n.toolType=="highlight"&&e>0){n.saveSelection(i,n.activeCssClass,n.toolType)}else{if(n.toolType=="note"&&e==0){var t=rangy.getSelection().expand("character",{wordOptions:{includeTrailingSpace:true}});n.saveSelection(i,n.toolType,n.toolType,t);if(n.toolType=="note"&&e==0)console.log("guardo nota")}}}})})});$(document).on("mouseenter",".highlight",function(){var e=$(this);if(!e.data("bs.popover")){n.initPopover(this)}});$(document).on("click",function(e){if(!$(e.target).data("bs.popover")&&$(e.target).closest(".popover").length==0){f.popovers&&f.popovers.hideAll()}});$(document).on("shown.bs.popover",function(e){f.popovers&&f.popovers.hideAll([$(e.target)])});$(document).on("click",".js-delete-highlight",function(){n.removeHighlight($(this).data("prefix"));$(".highlight").popover("destroy")})};rangyTool.prototype.setActivation=function(e,t){this.enable=e;if(t)this.toolType=t;if(e){f.events.trigger("rangy:enable")}else{f.events.trigger("rangy:disable")}};rangyTool.prototype.getActivation=function(e){return this.enable};rangyTool.prototype.setStatus=function(e,t){this.deserialize(e,t)};rangyTool.prototype.getStatus=function(e){var t=this.serialize(e);return t};rangyTool.prototype.setColor=function(e){this.activeCssClass="color-"+e};rangyTool.prototype.getColor=function(){return this.activeCssClass.substr(6)};rangyTool.prototype.loadClass=function(e,t,i){var n={ignoreWhiteSpace:true,tagNames:["span","a"],elementProperties:{className:"highlight rangy"}};var a={ignoreWhiteSpace:false,tagNames:["*"],elementProperties:{className:"rangy"}};var r;switch(i){case"highlight":r=n;break;case"note":r=a;break}this.highlighter[e].addClassApplier(rangy.createClassApplier(t,r))};rangyTool.prototype.saveSelection=function(e,t,i,n){if(!_.has(this.highlighter[e].classAppliers,t)){this.loadClass(e,t,i)}var a={containerElementId:this.getRootNode(e).id};if(n)a.selection=n;this.highlighter[e].highlightSelection(t,a);var r=rangy.getSelection();r.collapseToEnd()};rangyTool.prototype.serialize=function(e){return this.highlighter[e].serialize()};rangyTool.prototype.deserialize=function(n,a){var r=this;$(document).ready(function(){var e=a.split("|");for(var t=e.length,i;t-- >0;){var i=e[t].split("$");if(!_.has(r.highlighter[n].classAppliers,i[3])){r.loadClass(n,i[3],"highlight")}}r.highlighter[n].deserialize(a)})};rangyTool.prototype.getRootNode=function(e){return $("#"+e+"left").get(0)};rangyTool.prototype.removeHighlight=function(e){this.highlighter[e].unhighlightSelection()};rangyTool.prototype.initPopover=function(e){var t=$(e).closest(".slide-wrapper").data("prefix");var i={content:'<button class="btn btn-default js-delete-highlight" data-prefix="'+t+'">Delete Highlight</button>',container:"body",toggle:"popover",placement:"top auto",trigger:"click",html:true};f.popovers&&f.popovers.register($(e).popover(i))};return rangyTool}();f.toolsNew.rangyTool=i;var n=function(){function maskTool(e){this.name="mask";this.ready=false;this.options=e}maskTool.prototype.showMask=function(){if(!this.ready){var e=$(window).width()/2,t=$(window).height()/2;var i={opacity:.5};var n={autoHide:true,minWidth:100,minHeight:100,handles:"all"};var a=this.options&&this.options.containment||document.body;$('<div id="maskToolObj" style="width:'+e+"px;height:"+t+'px;background-color:#CCC;z-index:100;"></div>').appendTo(a).center().blinkDraggable($.extend(i,this.options)).resizable($.extend(n,this.options));this.ready=true}$("#maskToolObj").show()};maskTool.prototype.hideMask=function(){$("#maskToolObj").hide()};return maskTool}();f.toolsNew.maskTool=n;var a=function(){function fontSize(){this.name="fontSize";this.user;this.$container=$("html");this.DEFAULT=10;this.MIN=10;this.MAX=19;this.GAP=3}fontSize.prototype.init=function(){this.user=f.user.getID();this.apply(this.get()||this.DEFAULT)};fontSize.prototype.apply=function(e){this.$container.css("font-size",e+"px");this.save(e)};fontSize.prototype.setDefault=function(e){this.DEFAULT=e};fontSize.prototype.setMin=function(e){this.MIN=e};fontSize.prototype.setMax=function(e){this.MAX=e};fontSize.prototype.set=function(e){var t;if(e===undefined){t=this.DEFAULT}else if(e<0){t=this.MIN}else if(e>100){t=this.MAX}else{t=e*.1+this.MIN}this.apply(t)};fontSize.prototype.get=function(){idcontent=typeof window.idcurso!="undefined"?window.idcurso:0;return f.localStorage.get("user-"+this.user+"-"+idcontent+"-fontsize")};fontSize.prototype.save=function(e){idcontent=typeof window.idcurso!="undefined"?window.idcurso:0;f.localStorage.set("user-"+this.user+"-"+idcontent+"-fontsize",e)};fontSize.prototype.getValue=function(e){return 10*(e-this.MIN)};fontSize.prototype.gapClick=function(){var e=this.$container.css("font-size"),t=parseInt(e)+this.GAP;t>this.MAX?this.apply(this.MIN):this.apply(t)};fontSize.prototype.tapHold=function(){var e=$("#boton_tamano_letra_apps");e.trigger("taphold")};return fontSize}();f.toolsNew.fontSize=new a})(window.blink);(function(e){"strict mode";var t=1;var i=2;var n=2;var a=4;var r=4;var o=8;var s=16;var l=32;var c=64;var u=128;var d=256;var f=512;var p=-1;var h=-1;function getUserType(){return window.userType?parseInt(window.userType):0}function getUserCurrentType(){return window.userCurrentType?parseInt(window.userCurrentType):0}function esTipoUsuario(e,t){if(t){return getUserCurrentType()==e}else{var i=getUserType()&e;return i>0}}var m={getID:function(){return p},setID:function(e){p=e||p},getExternalID:function(){return h},setExternalID:function(e){h=e||h},esSAdmin:function(e){return esTipoUsuario(l,e)},esProfesor:function(e){return esTipoUsuario(n,e)},esAlumno:function(e){return esTipoUsuario(r,e)},esPadre:function(e){return esTipoUsuario(o,e)},esEditor:function(e){return esTipoUsuario(f,e)},esEditorial:function(e){return esTipoUsuario(s,e)},esAdmin:function(e){return esTipoUsuario(t,e)},esAnonimo:function(){return!getUserType()},usandoPerfilProfesor:function(){return esTipoUsuario(n,true)},usandoPerfilPadre:function(){return esTipoUsuario(o,true)},getMyLibraryURL:function(){var e=window.myLibraryURL;if(window.location.href.indexOf("editar=1")!=-1){e+="&editar=1"}return e},getUserTheme:function(){var e={1:"default",2:"responsive",3:"tmpux"};e["0"]=e[window.defaulThemeDomain];return e[window.userIDTheme]}};e.user=m})(blink);(function(e){e.utils=e.utils||{};var t=e.utils;t.getWidthInput=function(e){if(e.length==0){return 0}var t=window.parent||window;var i=t.$("#tester-width");i.html(e);return i.width()},t.getScrollbarWidth=function(){var e=$("<div></div>").appendTo("body").css({width:100,visibility:"hidden"});var t=e.get(0).offsetWidth;e.css("overflow","scroll");var i=$("<div></div>").appendTo(e).css("width","100%");var n=i.get(0).offsetWidth;e.remove();return t-n},t.attachImageEvents=function(){$("img").unbind("error.loaderrorimg");$("img").bind("error.loaderrorimg",function(){var e=$(this);if(($("#mensajes").length>0||$(".mis_mensajes").length>0)&&e.attr("alt")){var t=e.parent("div"),i=e.attr("alt"),n=base64_encode(i),a=3.446,r=parseInt((n.charCodeAt(0)-"0".charCodeAt(0))*a),o=parseInt((n.charCodeAt(1)-"0".charCodeAt(0))*a),s=parseInt((n.charCodeAt(2)-"0".charCodeAt(0))*a);e.remove();t.css({display:"table","background-color":"rgb("+r+","+o+","+s+")",color:"white","text-align":"center","border-radius":"4px","margin-right":"15px",width:"60px",height:"60px"});t.append("<p>"+i.charAt(0).toUpperCase()+"</p>");t.find("p").css({display:"table-cell","font-size":"50px","vertical-align":"middle"})}else if(e&&e.attr("src")&&e.attr("src").indexOf("images/common/load_error.png")==-1){e.attr("src_old",e.attr("src"));e.attr("src","../images/common/load_error.png")}})};t.imgOnError=function(e){var t=$(e);if(($("#mensajes").length>0||$(".mis_mensajes").length>0)&&t.attr("alt")){var i=t.parent("div"),n=t.attr("alt"),a=base64_encode(n),r=3.446,o=parseInt((a.charCodeAt(0)-"0".charCodeAt(0))*r),s=parseInt((a.charCodeAt(1)-"0".charCodeAt(0))*r),l=parseInt((a.charCodeAt(2)-"0".charCodeAt(0))*r);t.remove();i.css({display:"table","background-color":"rgb("+o+","+s+","+l+")",color:"white","text-align":"center","border-radius":"4px","margin-right":"15px",width:"60px",height:"60px"});i.append("<p>"+n.charAt(0).toUpperCase()+"</p>");i.find("p").css({display:"table-cell","font-size":"50px","vertical-align":"middle"})}else if(t&&t.attr("src")&&t.attr("src").indexOf("images/common/load_error.png")==-1){t.attr("src_old",t.attr("src"));t.attr("src","../images/common/load_error.png")}};t.cleanTextareaCKEDITOR=function(e){var t=function(){return e.find("[contenteditable=false][tabindex=-1]")},i=function(){return e.find("span").filter(function(){return $(this).css("background-image").indexOf("/handle.png")!=-1})},n=i(),a=t();if(n.length>0){n.remove()}if(a.length>0){a.children().unwrap();a=t();if(a.length>0&&a.children().length==0){a.remove()}}},t.resizeTimepicker=function(){if($(".timepicker-hours").length!==0){$(".timepicker-hours tbody").html('<tr>\t\t\t\t<td class="hour">00</td><td class="hour">01</td><td class="hour">02</td>\t\t\t\t<td class="hour">03</td><td class="hour">04</td><td class="hour">05</td>\t\t\t</tr>\t\t\t<tr>\t\t\t\t<td class="hour">06</td><td class="hour">07</td><td class="hour">08</td>\t\t\t\t<td class="hour">09</td><td class="hour">10</td><td class="hour">11</td>\t\t\t</tr>\t\t\t<tr>\t\t\t\t<td class="hour">12</td><td class="hour">13</td><td class="hour">14</td>\t\t\t\t<td class="hour">15</td><td class="hour">16</td><td class="hour">17</td>\t\t\t</tr>\t\t\t<tr>\t\t\t\t<td class="hour">18</td><td class="hour">19</td><td class="hour">20</td>\t\t\t\t<td class="hour">21</td><td class="hour">22</td><td class="hour">23</td>\t\t\t</tr>');$(".timepicker td").css({height:"40.33px","line-height":"30.33px",width:"40.33px"});$(".timepicker .timepicker-picker td span").css({width:"30px",height:"30px","line-height":"30px"});$(".timepicker .timepicker-picker td").css({"padding-top":"6px"})}};t.avoidInvalidDate=function(e){var t=new Date;var i=t.getHours()+":"+t.getMinutes();$(e).on("dp.change",function(){var e=$(this).data("date");if(e==="Invalid date"){e=i;$(this).data("DateTimePicker").setValue(e)}i=e})};t.validarFormatoHora=function(e){var t=/^(0?[0-9]|1\d|2[0-3]):([0-5]\d)$/;if(e.match(t)){return true}else{return false}};t.validarFormatoFecha=function(e){var t=/^(0?[1-9]|[12][0-9]|3[01])[\/](0?[1-9]|1[012])[/\\/](19|20)\d{2}$/;if(e.match(t)){return true}else{return false}};t.comprobarFechas=function(e,t){var i=new Date(e);var n=new Date(t);if(i.getTime()>n.getTime()){return false}else{return true}};t.getTimeDateHourEvento=function(e,t,i){var n=$(e).attr("value");if(blink.isIos||blink.isAndroid){n=moment(n).format("DD/MM/YYYY")}var a;if($(i).is(":checked"))a="";else a=$(t).attr("value");var r="";var o="";if(n.length){var s=n.split("/");if(s.length!=3||s[0].length!=2||s[1].length!=2||s[2].length!=4||!blink.utils.validarFormatoFecha(n)){_showAlert("\x3c!--{textweb name='module_calendar_newedit_10' escape='quotes'}--\x3e");$(e).focus();return false}r=s[2]+"-";if(s[1].length==1)r+="0";r+=s[1]+"-";if(s[0].length==1)r+="0";r+=s[0]}else{return""}if(a.length){var s=a.split(":");if(s.length<1||s.length>2||s[0].length>2||(s.length==2&&s[1].length>2||!blink.utils.validarFormatoHora(a))){_showAlert("\x3c!--{textweb name='module_calendar_newedit_11' escape='quotes'}--\x3e");$(t).focus();return false}if(s[0].length==1)o="0";o+=s[0]+":";if(s.length==1){o+="00"}else{if(s[1].length==1)o+="0";o+=s[1]}}else{o="23:59"}str_fecha=r+"T"+o;return str_fecha}})(blink);(function(l){"use strict";var c=l.currentPage;var e=function(){Object.defineProperty(this,"name",{enumerable:true,value:"LateralToc"})};e.prototype.init=function(){};e.prototype.openIndexAtStartIfNeeded=function(e){this.openMenuAtStart=c.openMenuAtStart||false;e=e||false;if(this.openMenuAtStart&&!e){return this.show()}return false};e.prototype.openIndexLibro=function(){var e=this;if(c&&c.openIndexLibro){return c.openIndexLibro()}$("#help-panel-error").hideBlink();var h=$("#book-index"),t=$("#book-index .col-main"),i=l.TemplateCache.get("#course"),n="book-index-"+window.idcurso,a={esInfantil:e.infantBook,initTemasOrdenados:function(){var e=[]},user:{isPublisher:e.editorialUser},editar:window.editar,textweb:{course_7:textweb("course_7"),course_12:textweb("course_12"),course_20:textweb("course_20"),course_22:textweb("course_22"),course_75:textweb("course_75"),course_76:textweb("course_76"),course_77:textweb("course_77"),course_78:textweb("course_78"),course_79:textweb("course_79"),course_abrev_pag:textweb("course_abrev_pag"),course_unit_activities:textweb("course_unit_activities"),course_supplement_content:textweb("course_supplement_content"),course_create_new_resource:textweb("course_create_new_resource")},course:{id:window.idcurso}},r=function(e,t){var i=$("#book-index .col-units").outerWidth();var n=$("#book-index .col-main").outerWidth();var a=n+i;var r=h.hasClass("filled"),o=h.hasClass("active"),s=o?-a:"0";if(!r){Mustache.parse(e);h.children().html(Mustache.render(e,t))}conmutarEstadoBoton("btn-book-index",o);if(!o){$(".side-panel").removeClass("active");$("#boton_buscar").removeClass("active")}h.animate({left:s},500,"easeInOutQuart").toggleClass("active").addClass("filled");m();if(!o){var l=t.idcourseindex||t.portada,c=l&&parseInt(l)==window.idclase;var u=$(".js-list-activities"),d=u.find('[data-id="'+window.idclase+'"]'),f=c?d.closest(".unit-content").next().find(".js-list-activities li").first():d;var p=f.closest("[data-parent]").attr("data-parent");if(f){!c&&f.addClass("current");$('#list-units [data-id="'+p+'"]').addClass("current-parent");if(!$('#list-units [data-id="'+p+'"]').hasClass("active")){$('#list-units [data-id="'+p+'"]').find(".js-tema").click()}}}},m=function(){var e={ellipsis:"... ",wrap:"word",fallbackToLetter:true,watch:true,height:106};$(".js-indice-tema").each(function(){var e=$(this),t=e.data("id"),i=$('.js-unit-content[data-id="'+t+'"]').find(".item span.js-acceso:not(.lock)").length;if(i>0)e.removeClass("locked");i=$('.js-unit-content[data-id="'+t+'"]').find(".item").length;if(i>0)e.removeClass("disabled")});$(".js-item .title").each(function(e,t){if($(t).is(":empty")){$(t).text(textweb("course_actividad_no_name"))}});$(".js-item").each(function(e,t){if($(this).attr("data-ocultar")==="true"){$(this).remove()}});$(".js-title").on("tap",function(){});indexIScroll();l.events.trigger("indexLoaded")};h.animate({left:0},500,"easeInOutQuart");l.theme.spinner.show("#toc-spinner-backdrop, #toc-spinner");var o="/coursePlayer/curso_json.php?idcurso="+window.idcurso,s=function(e){$("#help-panel-error").hideBlink();r(i,$.extend(e,a));l.theme.spinner.hide("#toc-spinner-backdrop, #toc-spinner")};l.getCourse(window.idcurso).done(s).fail(function(){$("#help-panel-error").showBlink()})};e.prototype.isActive=function(){if(c&&c.isActive){return c.isActive()}var e=$("#book-index");return e.hasClass("active")};e.prototype.isFilled=function(){if(c&&c.isFilled){return c.isFilled()}var e=$("#book-index");return e.hasClass("filled")};e.prototype.show=function(){l.events.trigger("widget:widgetShows","LateralToc");if(this.isActive()){return false}if(c&&c.showIndex){return c.showIndex()}this.toggle()};e.prototype.hide=function(e){if(!this.isActive()){return false}if(c&&c.closeIndex){c.closeIndex();var t=e||false;if(!t){l.events.trigger("widget:widgetHides")}return}this.toggle(e);l.events.trigger("indexClosed")};e.prototype.toggle=function(e){var t=e||false;if(c){if(c.isActive&&!c.isActive()){l.events.trigger("widget:widgetShows","LateralToc")}else if(!this.isActive()){l.events.trigger("widget:widgetShows","LateralToc")}if(c.toggleIndex){return c.toggleIndex()}}else if(!this.isActive()){l.events.trigger("widget:widgetShows","LateralToc")}this.openIndexLibro();if(c&&c.isActive&&!c.isActive()&&!t){l.events.trigger("widget:widgetHides","LateralToc")}else if(!this.isActive()&&!t){l.events.trigger("widget:widgetHides","LateralToc")}};e.prototype.updatePageVariables=function(e){e=e||0;if(c&&c.updatePageVariables){return c.updatePageVariables(window.idcurso,window.idclase,e)}return false};e.prototype.toogleIndex=function(e){this.toggle(e)};e.prototype.closeIndex=function(e){this.hide(e)};e.prototype.showIndex=function(){this.show()};l.lateralToc=new e})(blink);(function(i){"use strict";var a=i.tools||{};var e={};var t=null;var n=false;e.colors={RED:{className:"red",hex:"#fc4236"},PINK:{className:"pink",hex:"#ff7bac"},PURPLE:{className:"purple",hex:"#81007f"},DARK_BLUE:{className:"dark-blue",hex:"#0071bd"},LIGHT_BLUE:{className:"light-blue",hex:"#29aae3"},BROWN:{className:"brown",hex:"#a67c52"},ORANGE:{className:"orange",hex:"#ff931e"},YELLOW:{className:"yellow",hex:"#ffff01"},LIGHT_GREEN:{className:"light-green",hex:"#79c942"},DARK_GREEN:{className:"dark-green",hex:"#009345"},WHITE:{className:"white",hex:"#ffffff"},GREY:{className:"grey",hex:"#9e9e9c"},BLACK:{className:"black",hex:"#000000"}};e.tools={};e.buttons={boton_rotulador:{tool:"pencil",clickAction:"primaryAction",pressAction:"primaryAction"},boton_borrador:{tool:"pencil",clickAction:"secondaryAction",pressAction:null},boton_subrayador:{tool:"highlighter",clickAction:"primaryAction",pressAction:"enable"},boton_notes:{tool:"note",clickAction:"primaryAction",pressAction:null},"tool-ink":{tool:"bpdftool",clickAction:"primaryAction",pressAction:"primaryAction"},"tool-text":{tool:"bpdftool",clickAction:"freeTextAction",pressAction:"freeTextAction"},"tool-highlight":{tool:"bpdftool",clickAction:"secondaryAction",pressAction:"secondaryAction"}};e.initialize=function(e){n=true;var t=this;_.each(e,function(e){e.init();t.tools[e.name]=e});this.$buttons=$("#boton_rotulador").add("#boton_subrayador").add("#boton_borrador").add("#boton_notes");var t=this;i.events.on("note:created",function(){t.disableButtons()});blink.events.trigger(true,"managerTools:inited")};e.setColor=function(e){t=e;window.colorSelected=e.hex};e.getColor=function(){return t};e.isInitialized=function(){return n};e.disableTools=function(t){_.each(this.tools,function(e){if(t!==e&&e.enabled)e.disable()})};e.disableButtons=function(){$.each(this.$buttons,function(e,t){blink.theme.buttonState.active($(t),false)})};e.discardNextAction=function(e){var t=this.buttons[e];if(!t)return;t.shouldDiscardNext=true};e.buttonPress=function(e){var t=this.buttons[e];if(!t)return;var i=a[t.tool],n=i[t.pressAction];this.disableTools(i);this.disableButtons();n&&n.call(i);blink.theme.buttonState.active("#"+e,i.enabled)};e.buttonClick=function(e){var t=this.buttons[e];if(!t)return;if(t.shouldDiscardNext){t.shouldDiscardNext=false;return}var i=a[t.tool],n=i[t.clickAction];this.disableTools(i);this.disableButtons();n&&n.call(i);blink.theme.buttonState.active("#"+e,i.enabled)};a.manager=e})(window.blink);(function(e){"use strict";var t=e.tools||{};var i=function(){var t;var i;var n;Object.defineProperty(this,"enabled",{configurable:false,enumerable:false,get:function(){return t},set:function(e){t=!!e}});Object.defineProperty(this,"color",{configurable:false,enumerable:false,get:function(){return i},set:function(e){i=e}});Object.defineProperty(this,"defaultColor",{configurable:false,enumerable:false,get:function(){return n},set:function(e){n=e}})};i.prototype.init=function(){};i.prototype.getStatus=function(e){return null};i.prototype.setStatus=function(e,t){};i.prototype.getGlobalStatus=function(){return null};i.prototype.setGlobalStatus=function(e){};i.prototype.primaryAction=function(e){if(!this.enabled){this.enable()}else{this.disable()}};i.prototype.enable=function(){this.enabled=true};i.prototype.disable=function(){this.enabled=false};t.tool=i})(window.blink);(function(e){"use strict";var t=e.tools||{};var i=t.tool;var n=i.prototype;var a={PENCIL:"AnnotationCreateFreeHand",FREE_TEXT:"AnnotationCreateFreeText",HIGHLIGTER:"AnnotationCreateTextHighlight"};var r=function(){i.apply(this,arguments);this.enabled=false;Object.defineProperty(this,"type",{configurable:true,enumerable:false,writable:true,value:a.PENCIL});Object.defineProperty(this,"name",{configurable:false,enumerable:false,writable:false,value:"bpdftool"})};r.prototype=Object.create(n);r.prototype.checkType=function(e){if(this.type===e){n.primaryAction.call(this)}else{this.type=e;this.disable();this.enable()}};r.prototype.primaryAction=function(){this.checkType(a.PENCIL)};r.prototype.secondaryAction=function(){this.checkType(a.HIGHLIGTER)};r.prototype.freeTextAction=function(){this.checkType(a.FREE_TEXT)};r.prototype.enable=function(){n.enable.apply(this);bpdf.tool.toggle(this.type,true)};r.prototype.disable=function(){bpdf.tool.toggle(this.type,false);n.disable.apply(this)};r.prototype.setGlobalStatus=function(e){if(e.pencil){e.pencil.color&&bpdf.setStrokeColorAsHex(e.pencil.color);e.pencil.thickness&&bpdf.setDefaultThickness(e.pencil.thickness)}if(e.highligter){e.highligter.color&&bpdf.setTextAnnotColorAsHex(e.highligter.color)}if(e.freeText){e.freeText.color&&bpdf.setFreeTextAnnotColorAsHex(e.freeText.color)}e.zoom&&bpdf.zoom.set(e.zoom)};r.prototype.getGlobalStatus=function(){return{pencil:{color:bpdf.getStrokeColorAsHex(),thickness:bpdf.getDefaultThickness()},highligter:{color:bpdf.getTextAnnotColorAsHex()},freeText:{color:bpdf.getFreeTextColorAsHex()},zoom:bpdf.zoom.get()}};t.bpdftool=new r})(window.blink);(function(a){"use strict";var e=a.tools||{};var t=e.tool;var i=t.prototype;var n=function(){t.apply(this,arguments);this.enabled=false;this.defaultColor=e.manager.colors.YELLOW;this.color=this.defaultColor.hex;Object.defineProperty(this,"name",{configurable:false,enumerable:false,writable:false,value:"highlight"});Object.defineProperty(this,"type",{configurable:true,enumerable:false,writable:true,value:"highlight"});this.workers={}};n.prototype=Object.create(i);n.prototype.setBackgroundForSlide=function(e){var t=$(e),i=t?t.find('[class*="hl-"]').not(".setted"):$('[class*="hl-"]').not(".setted");t.find(".setted").not('[class*="hl-"]').css("background-color","transparent");this.setBackgroundToElements(i)};n.prototype.setBackgroundToElements=function(e){$(e).each(function(){var e=$(this),t=e.attr("class").indexOf("hl-#"),i=e.attr("class").substr(t+4),n=hex2rgb(hex2dec(i)),a=n[0],r=n[1],o=n[2];e.css("background-color","rgba("+a+","+r+","+o+",0.5)").addClass("setted")})};n.prototype.init=function(){var m=this;$(document).ready(function(){!rangy.initialized&&rangy.init();$(".window-content-wrapper, .item").scroll(function(){m.hideAllPopovers()});_.each(blink.activity.getPrefijos(),function(h){m.workers[h]=rangy.createHighlighter();var e=m.getRootNode(h);$(e).off().on("tap",function(e,t){if(blink.isTablet&&t&&!blink.isIos&&!blink.isAndroid){var i,n,a;var r=$(t[0].target);var o=r.position();var s=r.offset();var l=!!$(e.target).closest(".setted").length;if(m.enabled&&!l){if(typeof document.caretPositionFromPoint=="function"){var c=document.caretPositionFromPoint(t.position.x,t.position.y);i=rangy.createRange();n=c.offsetNode;a=c.offset;i.setStartAndEnd(n,a)}else if(typeof document.caretRangeFromPoint=="function"){var u=e.originalEvent.changedTouches[0].clientX,d=e.originalEvent.changedTouches[0].clientY;i=document.caretRangeFromPoint(u,d)}var f=rangy.getSelection();f.setSingleRange(i);var p=m.calculateAutomaticSelection(1);if(p.anchorNode&&m.type=="highlight"){m.saveSelectionHighlight(h,m.getHighlightColor());setTimeout(function(){try{f.removeAllRanges()}catch(e){}},0)}}}}).on("doubletap",function(e,t){if(blink.isTablet){var i=!!$(e.target).closest(".setted").length;if(m.enabled){var n=m.calculateAutomaticSelection(2,e.target);if(n.anchorNode&&m.type=="highlight"){m.saveSelectionHighlight(h,m.getHighlightColor())}}}}).on("click",function(e){if(m.enabled&&!blink.isTablet){var t=$.trim(window.getSelection().toString()).length;if(!blink.isTablet&&m.type=="highlight"&&t){m.saveSelectionHighlight(h,m.getHighlightColor())}else if(m.type=="note"&&t==0){rangy.getSelection().expand("character",{wordOptions:{includeTrailingSpace:true}});m.saveSelectionNote(h,"rangy-"+m.type);m.secondaryAction($("#boton_notes"));var i=rangy.getSelection(),n=i.focusNode.parentElement;m.openNote(n,h);m.editNote($(n));e.preventDefault();e.stopImmediatePropagation();e.stopPropagation();a.events.trigger("note:created")}}}).on("touchstart",function(e){if((blink.isIos||blink.isAndroid)&&m.enabled){var t=$.trim(window.getSelection().toString()).length;var i=rangy.getSelection();if(m.type=="highlight"&&t>0){m.saveSelectionHighlight(h,m.getHighlightColor());setTimeout(function(){try{i.removeAllRanges()}catch(e){}},0)}}}).on("mousedown",".setted",function(){if(!blink.isAndroid&&!blink.isIos){$(this).on("mouseup mousemove",function handler(e){if(e.type=="mouseup"){!$(this).hasClass("bs-popover")?m.initPopover(this):m.removePopover(this);e.stopImmediatePropagation()}$(this).off("mouseup mousemove",handler)})}}).on("touchstart",".setted",function hand(e){if(blink.isAndroid||blink.isIos){if(e.type=="touchstart"){!$(this).hasClass("bs-popover")?m.initPopover(this):m.removePopover(this);e.stopImmediatePropagation()}$(this).off("touchstart",hand)}})});$(document).on("click",function(e){if(!$(e.target).data("bs.popover")&&$(e.target).closest(".popover").length==0){m.hideAllPopovers()}}).on("shown.bs.popover",function(e){blink.popovers.hideAll([$(e.target)])}).on("click",".js-delete-highlight",function(){var e=$(this),t=e.data("elem");if($.contains(document,t)){var i=m.getHighlightFromDOM(t);if(i){var n=i.getHighlightElements();m.cleanHighlights(n);var a=rangy.getSelection();a.setSingleRange(i.getRange());m.removeHighlight(e.data("prefix"),a)}m.removePopover(t)}}).on("click",function(e){var t=$(e.target).closest(".rangy-note");if(t.size()==0&&$(".nota_wrapper").size()>=0){m.closeNotes()}else if($(".nota_wrapper").length==0){var i=m.getPrefix(t);m.openNote(t.get(0),i)}})})};n.prototype.getHighlightColor=function(){return"hl-"+this.color};n.prototype.checkType=function(e){if(this.type===e){i.primaryAction.call(this)}else{this.type=e;this.disable();this.enable()}};n.prototype.primaryAction=function(){var e=window.getSelection(),t=$.trim(e.toString()).length;if(t===0){this.checkType("highlight")}else{var i=$(e.anchorNode).closest(".js-highlighter-root");if(i.length&&!$(e.anchorNode).closest(".setted").length){var n=this.getPrefix(i);this.saveSelectionHighlight(n,this.getHighlightColor());if(window.getSelection()){window.getSelection().removeAllRanges()}}else{this.checkType("highlight")}}};n.prototype.secondaryAction=function(){this.checkType("note");$("#slider").toggleClass("canvasnote")};n.prototype.enable=function(){i.enable.apply(this);blink.events.trigger("rangy:enable")};n.prototype.disable=function(){i.disable.apply(this);blink.events.trigger("rangy:disable")};n.prototype.getStatus=function(t){var i=[];var n=this;$("#"+t+"left .rangy-note").each(function(){var e=n.getHighlightFromDOM(this,t);if(e&&!!e.textNote)i.push({id:e.id,text:e.textNote})});var e={serializedString:this.serialize(t),notes:i};return e};n.prototype.setStatus=function(e,t){this.deserialize(e,t)};n.prototype.getGlobalStatus=function(){return{color:this.color}};n.prototype.setGlobalStatus=function(e){if(typeof e.color=="object")this.color="#ffff00";else this.color=e.color};n.prototype.openNote=function(e,t){var i=this.getHighlightFromDOM(e,t);if(!i)return;var n=this;var a=blink.tools;if(i.textNote)i.textNote=i.textNote.replace(/\\n/g,"\n");else i.textNote="";var r=""+'<div id="pos_'+i.id+'" class="nota_wrapper">'+'<div id="'+i.id+'" class="nota">'+'<div class="nota_content">'+'<a class="deletedigitalnote control delete" id="borrarNota'+i.id+'" href="javascript:void(0);">'+textweb("mensaje_10")+"</a>"+'<div  class="js-save postit-save hidden" style="height: 100%;">'+'<textarea id="postittext'+i.id+'" class="digitalnote">'+a.htmltoTexarea(i.textNote)+"</textarea><br>"+'<span id="savePostit"  class="save btn-postit">'+textweb("postit_close")+"</span>"+"</div>"+'<div class="js-edit" style="height: 100%;">'+'<div class="note-text"></div><br>'+'<span id="editPostit" class="btn-postit">'+textweb("postit_edit")+"</span>"+"</div>"+"</div>"+"</div>"+"</div>";$(r).appendTo(e);var o=i.textNote.replace(/\n/g,"<br/>");o=a.urlify(o);$(e).find("#pos_"+i.id+" .note-text").html(o)};n.prototype.editNote=function(e){var t=blink.tools;var i=e.closest(".rangy-note").get(0);var n=this.getHighlightFromDOM(i);var a=t.htmltoTexarea(n.textNote);$(i).find(".js-save").showBlink();$(i).find(".js-edit").hideBlink();$(i).find("textarea").val(a).focus()};n.prototype.closeNotes=function(){var t=this;$(".nota_wrapper").each(function(){var e=$(this);if(!e.find(".js-save").hasClass("hidden"))t.saveNote(e);e.fadeOut().remove()})};n.prototype.saveNote=function(e){var t=e.closest(".rangy-note").get(0);var i=this.getHighlightFromDOM(t);var n=e.find("textarea").val();if(n){n=n.replace(/\n/g,"<br/>");i.textNote=n;n=blink.tools.urlify(n);$(e).find(".js-edit .note-text").html(n);$(e).find(".js-save").hideBlink();$(e).find(".js-edit").showBlink();$(e).find("textarea").blur()}};n.prototype.deleteNote=function(e){var t=this.getPrefix(e),i=e.closest(".rangy-note").get(0),n=rangy.createRange(),a=rangy.getSelection();$(i).removeClass("ui-draggable ui-draggable-handle ui-draggable-dragging").removeAttr("style").find(".nota_wrapper").remove();n.selectNodeContents(i);a.setSingleRange(n);this.removeHighlight(t,a)};n.prototype.deleteAllNotes=function(){var e=this;$(".rangy-note").each(function(){e.deleteNote($(this))})};n.prototype.noteDraggable=function(s,e){var l=this;$(e).on("touchstart",function(e){e.stopPropagation()}).draggable({opacity:.5,containment:"#"+l.getRootNode(s).id,stop:function(e,t){var i=l.getHighlightFromDOM(this,s),n=i.textNote,a=document.caretRangeFromPoint(t.offset.left,t.offset.top),r=rangy.getSelection();r.setSingleRange(a);rangy.getSelection().expand("character",{wordOptions:{includeTrailingSpace:true}});var o=l.saveSelectionNote(s,"rangy-note");if(o[0]){o[0].textNote=n;l.deleteNote($(this))}blink.events.trigger("rangy:disable")}})};n.prototype.loadClass=function(e,t,i){var n={ignoreWhiteSpace:true,tagNames:["span","a"]};var a=this;var r={ignoreWhiteSpace:false,tagNames:["*"]};var o;switch(i){case"highlight":o=n;break;case"note":o=r;break}this.workers[e].addClassApplier(rangy.createClassApplier(t,o))};n.prototype.saveSelectionHighlight=function(e,t){if(!_.has(this.workers[e].classAppliers,t)){this.loadClass(e,t,"highlight")}var i={containerElementId:this.getRootNode(e).id,exclusive:true};var n=this;var a=n.workers[e].highlightSelection(t,i);if(a.length>0){var r=a[0].getHighlightElements();n.setBackgroundForSlide(n.getRootNode(e));if(!blink.isIos&&!blink.isAndroid){var o=rangy.getSelection();o.collapseToEnd()}if(!window.hayCorreccionesProfesorSinGrabar&&checkModoCorreccion()&&idalumno&&esProfesor)window.hayCorreccionesProfesorSinGrabar=1}};n.prototype.saveSelectionNote=function(e,t){if(!_.has(this.workers[e].classAppliers,t)){this.loadClass(e,t,"note")}var i={containerElementId:this.getRootNode(e).id,exclusive:true};var n=this.workers[e].highlightSelection(t,i);var a=rangy.getSelection();a.collapseToEnd();return n};n.prototype.serialize=function(e){return this.workers[e]?this.workers[e].serialize():null};n.prototype.deserialize=function(a,r){if(!r||!r.serializedString)return;var o=this;$(document).ready(function(){var e=r.serializedString.split("|");for(var t=e.length,i;t-- >0;){var i=e[t].split("$");if(!_.has(o.workers[a].classAppliers,i[3])){var n="highlight";if(i[3]=="note")n="note";o.loadClass(a,i[3],n)}}o.workers[a].deserialize(r.serializedString);$.each(r.notes,function(){var e=_.findWhere(o.workers[a].highlights,{id:this.id});e.textNote=this.text});o.setBackgroundForSlide(o.getRootNode(a))})};n.prototype.calculateAutomaticSelection=function(e,t){var i;switch(e){case 1:i=rangy.getSelection();i.expand("word",{wordOptions:{includeTrailingSpace:false,wordRegex:/[\S]+([\S]+)*/gi}});break;case 2:var n=rangy.createRange();var a=$(t).parent();if(!a.hasClass("js-highlighter-root")&&!a.find(".html-book").length&&!a.find(".layout-panel").length){if($(t).hasClass("setted"))n.selectNodeContents(a.get(0));else n.selectNodeContents(t)}i=rangy.getSelection();i.setSingleRange(n);break}return i};n.prototype.getRootNode=function(e){return $("#"+e+"pg").find(".js-highlighter-root").get(0)};n.prototype.getPrefix=function(e){return $(e).closest(".slide-wrapper").data("prefix")};n.prototype.getHighlightFromDOM=function(e,t){var t=t||$(e).length&&this.getPrefix(e),i=t&&this.workers[t];return i&&i.getHighlightForElement(e)};n.prototype.removeHighlight=function(e,t){this.workers[e].unhighlightSelection(t);if(!window.hayCorreccionesProfesorSinGrabar&&checkModoCorreccion()&&idalumno&&esProfesor)window.hayCorreccionesProfesorSinGrabar=1};n.prototype.cleanHighlights=function(e){$(e).removeClass("setted").removeAttr("style data-original-title title")};n.prototype.initPopover=function(e){var t=this.getPrefix(e);var i={content:'<button class="highlight-delete js-delete-highlight" data-prefix="'+t+'">'+textweb("highlight_delete")+"</button>",container:"body",toggle:"popover",placement:"top auto",trigger:"mouseup",html:true};var n=$(e).popover(i);$(e).popover("show").addClass("bs-popover");blink.popovers&&blink.popovers.register(n);$(".js-delete-highlight").data("elem",e)};n.prototype.removePopover=function(e){blink.popovers.deregister($(e).popover("hide").removeClass("bs-popover"))};n.prototype.hideAllPopovers=function(){blink.popovers&&blink.popovers.hideAll();$(".setted").removeClass("bs-popover")};e.highlighter=new n;blink.events.on("section:shown",function(e){var t="#boton_subrayador",i=window[e+"_slide"];if(blink.theme.buttonState.isActive(t)){blink.theme.buttonState.active(t,false);blink.tools.highlighter.enabled=false}if(blink.activity&&blink.activity.currentStyle&&blink.activity.currentStyle.disableHighlighter){blink.theme.buttonState.disabled(t,!!i.shouldDisabledHighlighter(blink.activity.currentStyle.disableHighlighter()))}})})(window.blink);(function(r){"use strict";var e=r.tools||{};var t=e.tool;var i=t.prototype;var n=function(){t.apply(this,arguments);this.enabled=false;this.endEvents=["touchend","mouseup"];this.startEvents=["touchstart","mousedown"];this.buttonId="boton_notes";this.bindStartEvents()};n.prototype=Object.create(i);n.prototype.primaryAction=function(){i.primaryAction.call(this);if(this.enabled){window.selectPizarraColor("boton_notes",8);this.bindDrawEvent()}else this.unbindDrawEvents()};n.prototype.bindStartEvents=function(e){var t=this;$(document).ready(function(){$(".js-slider-item").on(t.startEvents.join(" "),blink.tools.closeNotesOnEvent)})};n.prototype.bindDrawEvent=function(){$(".canvasdivclass").on(this.endEvents.join(" "),{caller:this},this.drawNote)};n.prototype.unbindDrawEvents=function(){$(".canvasdivclass").off(this.endEvents.join(" "),this.drawNote);setPizarraOff(false)};n.prototype.drawNote=function(e){var t=window.getCoordinates(e);var i=window.getIndiceStoreDrawing();var n=r.tools.getNewID(i);var a={x:parseInt(t.x),y:parseInt(t.y),ID:"note"+i+"_"+n,txt:""};if(!window.notesArray[i])window.notesArray[i]=[];window.notesArray[i].push(a);window.selectPizarraColor(this.buttonId,r.tools.NOTE);r.tools.drawNote(a,$("#canvas-wrapper"),true,true);e.data.caller.unbindDrawEvents();e.data.caller.disable()};n.prototype.disable=function(){blink.theme.buttonState.active("#"+this.buttonId,false);this.unbindDrawEvents();i.disable.apply(this)};n.prototype.drawNotes=function(e){var t=$("#canvas-wrapper");t.find(".nota_pos").remove();_.each(notesArray[e],function(e){r.tools.drawNote(e,t,false,false)})};e.note=new n})(window.blink);(function(e){"use strict";var n=e.tools||{};var a=n.tool;var t=a.prototype;var r={PENCIL:n.DRAW,ERASER:n.ERASER};var o=function(){a.apply(this,arguments);this.enabled=false;this.defaultColor=n.manager.colors.DARK_BLUE;this.color=this.defaultColor.hex;var t=3;Object.defineProperty(this,"name",{configurable:false,enumerable:false,writable:false,value:"pencil"});Object.defineProperty(this,"state",{configurable:true,enumerable:false,writable:true,value:r.PENCIL});Object.defineProperty(this,"thickness",{configurable:false,enumerable:false,get:function(){return t},set:function(e){t=parseInt(e,10)||1}});this.status={};this.currentStatus=null};o.prototype=Object.create(t);o.prototype.init=function(){this.scope=new window.paper.PaperScope;var a=this;var e=document.getElementById("activity-canvas");this.worker=new this.scope.Project(e);var t;var n=new a.scope.Tool;this.setDefaultStatus();n.onMouseDown=function(e){if(!a.enabled)return;if(a.isPencilMode()){t=new window.paper.Path({segments:[e.point],strokeColor:a.color,strokeWidth:a.thickness,fullySelected:false})}e.stopPropagation()};n.onMouseDrag=function(e){if(!a.enabled)return;if(a.isPencilMode()){t.add(e.point)}else if(e.item){e.item.remove()}};n.onMouseUp=function(e){if(!a.enabled)return;a.isPencilMode()&&t.simplify(10);if(!window.hayCorreccionesProfesorSinGrabar&&checkModoCorreccion()&&idalumno&&esProfesor)window.hayCorreccionesProfesorSinGrabar=1};blink.events.on("section:shown resize:disableTools",function(e){var t=["#boton_rotulador","#boton_borrador"],n=window[e+"_slide"];for(i=0;i<t.length;i++){if(blink.theme.buttonState.isActive(t[i])){blink.theme.buttonState.active(t[i],false);blink.tools.pencil.enabled=false}blink.theme.buttonState.disabled(t[i],!!n.shouldDisabledDrawTools())}if(!blink.activity.currentStyle.shouldCleanCanvasOnSectionChange()){return}if(a.currentStatus!==null){a.saveStatus(a.currentStatus)}a.currentStatus=e;a.worker.clear();a.loadStatus(e);a.worker.activate()})};o.prototype.setWidthToAllCanvas=function(e){this.worker.view.setViewSize({width:e,heigth:0});blink.events.trigger("canvas:size:set")};o.prototype.setCanvasSize=function(e,t,i){if(t>4750&&(blink.isIpad&&blink.isRetina))t=4750;var n=this.worker.view,a=n.getSize();a.setHeight(t);a.setWidth(i);n.setViewSize(a);blink.events.trigger("canvas:size:set")};o.prototype.setCanvasHeight=function(e,t){if(t>4750&&(blink.isIpad&&blink.isRetina))t=4750;var i=this.worker.view,n=i.getSize();n.setHeight(t);i.setViewSize(n);blink.events.trigger("canvas:size:set")};o.prototype.primaryAction=function(){if(this.state===r.PENCIL){t.primaryAction.call(this)}else{this.state=r.PENCIL;this.disable();this.enable()}};o.prototype.secondaryAction=function(){if(this.state==r.ERASER){t.primaryAction.call(this)}else{this.state=r.ERASER;this.disable();this.enable()}};o.prototype.isPencilMode=function(){return this.state==r.PENCIL};o.prototype.isEraserMode=function(){return this.state==r.ERASER};o.prototype.enableBlackboard=function(){blink.theme.selectPizarraColor(undefined,this.state)};o.prototype.disableBlackboard=function(){blink.theme.setPizarraOff(false)};o.prototype.enable=function(){t.enable.apply(this);this.enableBlackboard()};o.prototype.disable=function(){this.disableBlackboard();t.disable.apply(this)};o.prototype.getStatus=function(e){if(e===this.currentStatus){this.saveStatus(e)}return this.status[e]||{}};o.prototype.setStatus=function(e,t){this.status[e]=t};o.prototype.loadStatus=function(e){this.worker.importJSON(this.status[e]);this.worker.view.draw()};o.prototype.saveStatus=function(e){this.status[e]=this.worker.exportJSON({asString:false})};o.prototype.clearStatus=function(e){this.status[e]=this.getDefaultStatus()};o.prototype.getGlobalStatus=function(){return{color:this.color,thickness:this.thickness}};o.prototype.setGlobalStatus=function(e){this.color=e.color;this.thickness=e.thickness};o.prototype.getDefaultStatus=function(){return this.defaultStatus};o.prototype.setDefaultStatus=function(){this.defaultStatus=this.worker.exportJSON({asString:false})};n.pencil=new o})(window.blink);$(document).ready(function(){(function(a){"use strict";a.widgetManager={widgets:[a.lateralToc]};if(a.tools.timer)a.widgetManager.widgets.push(a.tools.timer);a.events.on("widget:widgetShows",function(e){var t=false;for(var i=0;i<a.widgetManager.widgets.length;i++){if(a.widgetManager.widgets[i].isActive()&&a.widgetManager.widgets[i].name!==e){var n=a.widgetManager.widgets[i];n.hide(true);t=true}}if(!t){if(a.isApp&&!a.isOfflinePC){a.restApp.showWebView(1)}$(".widgetBackground").show()}});a.events.on("widget:widgetHides",function(){for(var e=0;e<a.widgetManager.widgets.length;e++){if(a.widgetManager.widgets[e].isActive()){var t=a.widgetManager.widgets[e];t.hide(true)}}$(".widgetBackground").hide();if(a.isApp&&!a.isOfflinePC){a.restApp.showWebView(0)}})})(blink);$('<div class="widgetBackground"></div>').insertBefore(".spinner");$(".libro-right.toolbar a:not(#tool-timer), .widgetBackground").click(function(){blink.events.trigger("widget:widgetHides")})});(function(l){var c={};var u={};l.isCourseJSONCached=function(e){return c[e]!==undefined};l.clearCourseJSONCached=function(e){if(c&&c.hasOwnProperty(e)&&c[e]){c[e]=undefined}};l.getCourse=function(e,t,i,n,a){var r=c[e];if(!r||t&&(typeof r.responseJSON!=="undefined"&&!r.responseJSON.completo)){var o="/coursePlayer/curso_json.php?idcurso="+e,s=!i;o+=n?"&idgrupo="+n:"";o+=t?"&_completo=true":"";o+=a&&parseInt(a)===1?"&editar=1":"";o+=typeof idalumno!=="undefined"&&idalumno?"&idalumno="+idalumno:"";c[e]=l.getJSON(o,function(){},{cache:true,method:"GET",async:s});r=c[e]}return r};l.getActivity=function(e,s){var t=u[s];if(t){return(new jQuery.Deferred).resolve(t)}else{return l.getCourse(e).pipe(function(e){var t=_.reduce(e.units,function(e,t){return e.concat(t.subunits)},[]);var i=_.reduce(e.units,function(e,t){return e.concat(t.resources)},[]);var n=$.merge(i,t);var a=_.pluck(n,"id"),r=_.indexOf(a,""+s),o=n[r];u[s]=o;return o})}};l.reorderBooks=function(r){var o={};o["ordenarpor"]=r;o["ordenlibros"]={};o["lastID"]=0;$(".list-items.books").each(function(e,t){var i=$(this).find("li");i.sort(function(e,t){if(r=="sortByNameASC"||r=="sortByNameDESC"){var e=e.getAttribute("data-nombre").toUpperCase();var t=t.getAttribute("data-nombre").toUpperCase()}if(r=="sortByFechaASC"||r=="sortByFechaDESC"){var e=moment(e.getAttribute("data-fecha-ult-modif"),"YYYY-MM-DD HH:mm").toDate();var t=moment(t.getAttribute("data-fecha-ult-modif"),"YYYY-MM-DD HH:mm").toDate()}if(e<t){return-1}if(e>t){return 1}return 0});if(r=="sortByNameDESC"||r=="sortByFechaDESC"){i=i.get().reverse()}var n=new Array;$.each(i,function(e,t){n.push(t.getAttribute("data-id"))});l.updateCategoriesCounters(t,n);var a=$(t).parent().find(".title-buttons .title").attr("data-title");o["ordenlibros"][t.getAttribute("data-id")]={};o["ordenlibros"][t.getAttribute("data-id")]["title"]=a;o["ordenlibros"][t.getAttribute("data-id")]["libros"]=n;if(t.getAttribute("data-id")>o["lastID"])o["lastID"]=t.getAttribute("data-id");$(this).html(i)});return o};l.reorganizeBooks=function(e){var n=[];$.each(e,function(e,t){if(e!=0&&e!=1){var i=".list-items.books[data-id='"+e+"']";n.push(parseInt(e));if($(i).length<=0){l.createNewSection(t["title"],e)}if(t["libros"].length>0){$.each(t["libros"],function(e,t){$(".list-items.books:not([data-id='0'],[data-id='1']) li[data-id='"+t+"']").detach().appendTo(i)})}}});$.each($(".list-items.books"),function(e,t){if($(t).find("li").length<=0&&$("#editar_contenido.active").length<=0){$(t).parent().addClass("hidden")}})};l.createNewSection=function(e,t){var i='<div class="items-section"><div class="title-buttons "><div class="btn-group"><button type="button" class="btn btn-primary title disabled" data-title="'+e+'">'+e+' </button><button type="button" class="btn delete_category hidden" data-id="'+t+'"><i class="blinkicon-close"></i> <span>'+textweb("delete.category")+'</span></button><button type="button" class="btn edit_category hidden"><i class="blinkicon-edit"></i> <span>'+textweb("activities_edit")+'</span></button></div></div><ul class="list-items books" data-id="'+t+'"></ul></div>';$(i).prependTo(".items.cursos");if($("#editar_contenido.active").length>0)$('.list-items.books[data-id="'+t+'"]').closest(".items-section").find(".edit_category, .delete_category").removeClass("hidden")};l.updateCategoriesCounters=function(e,t){if($(e).parent().find(".title-buttons .btn-primary .cantidad").length<=0){var i=$(e).parent().find(".title-buttons .title");i.html(i.html()+"(<span class='cantidad'>"+t.length+"</span>)")}else{var i=$(e).parent().find(".title-buttons .title");i.html(i.html().substring(0,i.html().indexOf("("))+"(<span class='cantidad'>"+t.length+"</span>)")}};showCourseGrades=function(e,t,i){l.theme.spinner.show();l.ajax("/LMS/fichaalumno.php?idalumno="+e+"&idcurso="+t+"&_fromcourse=true"+(typeof i!="undefined"&&i>0?"&_idgrplanning="+i:""),function(e){l.theme.hideCourseStyles();var t=formatCourseGrades(e);l.theme.buttonState.hidden("#abrir-calificaciones",true);l.theme.buttonState.hidden("#cerrar-calificaciones",false);$("#boton_buscar").parent().toggleClass("hidden");$(".content-wrapper.libro").first().before(t).css("display","none");l.theme.spinner.count&&l.theme.spinner.hide();window.seleccion=undefined})};formatCourseGrades=function(e){var t,i;t=e.substring(e.indexOf('<div class="content-wrapper">'),e.indexOf("<script>blink.events.trigger('endOfDocument');<\/script>"));i=$('<div class="grade-container">'+t+"</div>");i.find(".footer").remove();i.find(".content-main-tabs").remove();i.find(".header .title-buttons").remove();return i};closeCourseGrades=function(){var e=$(".grade-container");l.theme.showCourseStyles();l.theme.buttonState.hidden("#abrir-calificaciones",false);l.theme.buttonState.hidden("#cerrar-calificaciones",true);$("#boton_buscar").parent().toggleClass("hidden");$(".content-wrapper.libro").attr("style","");$(e).css("height",0).remove()}})(blink);(function(u){"use strict";u.Pictures={goFullScreen:function(e,t){var o=[],i=$(".pswp").get(0),n,a=e.first().closest(".blink-gallery"),r={index:t||0,getThumbBoundsFn:u.Pictures.getThumbBoundsFn,showHideOpacity:true,history:false,shareEl:false,counterEl:false,closeOnScroll:false,arrowEl:true};if(e.hasClass("bck-i-fullscreen")||e.closest("figure").hasClass("bck-i-fullscreen")){if(e.is("img")){var s=e,l=e.closest("figure").find("figcaption").text(),c=l&&blink.domain.allowCKEdShowCaption()?l:"";if(blink.activity.currentStyle.deshabilitarMenuContextualGaleria&&blink.activity.currentStyle.deshabilitarMenuContextualGaleria()){$(".pswp").attr("oncontextmenu","return false")}}else{var s=e.find("img"),l=$("figcaption",e),c=l.text()}s.addClass("blink-fullscreen-active");o.push(u.Pictures.loadImage(s,c))}else{if(e.is("img")){var s=e,l=$(".base_foto",e),c=l.text();o.push(u.Pictures.loadImage(s,c))}else{e.siblings().andSelf().addClass("blink-fullscreen-active").each(function(e,t){var i=$(t),n=$("img",i),a=$(".base_foto",i),r=a.text();o.push(u.Pictures.loadImage(n,r))})}}Promise.all(o).then(function(e){n=new PhotoSwipe(i,PhotoSwipeUI_Default,e,r);n.listen("destroy",u.Pictures.fullScreenCleanup);n.init()})},loadImage:function(o,s){var e=new Promise(function(a){var r=new Image;r.src=o.attr("src");r.onload=function(){var e=r.naturalWidth,t=r.naturalHeight,i=o.data("width")||e,n=o.data("height")||t;a({src:r.src,msrc:r.src,history:false,w:i,h:n,title:s})};r.onerror=function(){var e=o.data("width")||0,t=o.data("height")||0;a({src:r.src,msrc:r.src,history:false,w:e,h:t,title:s})}});return e},getThumbBoundsFn:function(e){var t=$(".blink-fullscreen-active, .bck-i-fullscreen").get(e),i=window.pageYOffset||document.documentElement.scrollTop,n=t.getBoundingClientRect();return{x:n.left,y:n.top+i,w:n.width}},fullScreenCleanup:function(){$(".blink-fullscreen-active").removeClass("blink-fullscreen-active")}}})(window.blink);function Attachment(e){"use strict";this.tmpId=1;this.id=e.data("id");if(!this.types)this.types={};this.types=Object.assign(this.types,{FILE:1,URL:2,ACTIVITY:3});this.files=[];this.urls=[];this.activities=[];this.$container=e.find(".js-attachments");this.$input=e.find(".js-attachments-input");if(!this.$container.length){blink.log.error("Attachment container does not exist.")}if(!this.$input.length){blink.log.error("Attachment input does not exist.")}var l=this;this.attach=l;this.refreshOrg=this.refreshInput;this.refreshInput=function(){l.$input.val("");var e={files:l.files,urls:l.urls,activities:l.activities};if(l.refreshOrg)e=l.refreshOrg(e);var t=JSON.stringify(e);l.$input.val(t)};this.delOld=this.del;this.del=function(e){var t=$("#msg-"+l.id+"-attach-"+e),i=t.data("type"),n=t.data("obj_id");t.remove();if(!l.$container.find(".js-attach").length){l.$container.hideBlink()}if(i==l.types.FILE){l.delFunc(l.files,n,function(e,t){return e==t})}else if(i==l.types.URL){l.delFunc(l.urls,n,function(e,t){return e.id==t})}else if(i==l.types.ACTIVITY){l.delFunc(l.activities,n,function(e,t){return e==t})}else if(this.delOld)return this.delOld(i,n)};this.delFunc=function(e,t,i){var n=-1;for(var a=0;a<e.length;a++){if(i(e[a],t)){n=a;break}}if(n!=-1)e.splice(n,1)};this.append=function(e,t,i,n){var a=l.tmpId++,r=document.createElement("li"),o=$(r);r.id="msg-"+l.id+"-attach-"+a;o.addClass("js-attach");o.addClass("js-attach-type-"+t);o.data({type:t,id:a,obj_id:i,obj_size:n}).html(e);l.$container.showBlink().find("ul").append(r);var s=o.find(".js-delete");if(!s.length){blink.log.error("Attach delete button does not exists.")}s.click(function(){l.del(a)})};this.onSelectFile=function(e,t,i,n){if(typeof e=="object"){e=finSeleccionarMultimedia(e,t,"attachfile")}if(typeof e=="string"){if(isBlinkUrl(e)){l.getAttachmentFileData(e)}else if(isYoutubeUrl(e)||isVimeoUrl(e)){l.onCreateURL(e,textweb("tablettxt_video"))}else{getAJAX("/LMS/ajax.php?op=files.setcontentbyurl&url="+encodeURIComponent(e),function(e){if(e.startsWith("OK")){var t=JSON.parse(e.substr(2));l.getAttachmentFileData(t.url)}else{standardAJAX(e)}})}}else{blink.log.warning("error")}};this.getAttachmentFileData=function(e){getAJAX("/LMS/ajax.php?op=attach.getAttachmentData&type=file&path="+encodeURIComponent(e),function(e){if(e.startsWith("OK")){var t=JSON.parse(e.substr(2));l.files.push(t.obj_id);l.append(t.html,l.types.FILE,t.obj_id,t.obj_size);closeMsgBox()}else{standardAJAX(e)}})};this.onSelectAudioRecorder=function(e){return l.onSelectFile("/useruploads/tmp/"+e.substring(2),false,false,false)};this.onCreateURL=function(e,i){var e="/LMS/ajax.php?op=attach.getAttachmentData&type=url&url="+encodeURIComponent(e)+"&desc="+encodeURIComponent(i),t=function(e){if(e.startsWith("OK")){var t=JSON.parse(e.substr(2));l.urls.push({id:t.obj_id,desc:i});l.append(t.html,l.types.URL,t.obj_id);closeMsgBox()}else{standardAJAX(e)}};blink.ajax(e,t)};this.onSelectActivity=function(i){getAJAX("/LMS/ajax.php?op=attach.getAttachmentData&type=activity&id="+i,function(e){if(e.startsWith("OK")){var t=JSON.parse(e.substr(2));l.activities.push(i);l.append(t.html,l.types.ACTIVITY,t.obj_id);closeMsgBox()}else{standardAJAX(e)}})};this.onAfterSendMessageOld=this.onAfterSendMessage;this.onAfterSendMessage=function(){l.$input.val("");l.$container.hideBlink().find("ul").html("");l.tmp_id=1;l.files=[];l.urls=[];l.activities=[];if(this.onAfterSendMessageOld)this.onAfterSendMessageOld()}}function getAttachmentObjectName(e){"use strict";var t=e.closest(".js-message-wrapper"),i=t.data("id");if(!window.attachments[i]){window.attachments[i]=new Attachment(t)}return"attachments["+i+"]"}function Destinatarios(e,t){var a=this;this.element=$(e);this.idgrupohilo=t;this.input=this.element.find("input:eq(0)");if(this.element.length!=1||this.input.length!=1){blink.log.error("Elemento destinatarios mal construido");return}this.placeholder_singular=this.input.data("placeholder-singular");this.placeholder_plural=this.input.attr("placeholder");this.notIDs=[[],[]];this.types={GRUPO:0,PROFESOR:1,ALUMNO:2,PADRE:3};this.clear=function(){this.notIDs=[[],[]];this.input.val("");$(".destinatario",this.element).remove()};this.getNotIDsByType=function(e){return this.notIDs[parseInt(e)?1:0]};this.del=function(e){var t=$(e).parent().data("type");var i=$(e).parent().data("id");var n=this.getNotIDsByType(t).indexOf(i);this.getNotIDsByType(t).splice(n,1);$(e).parent().remove();this.refreshInput()};this.add=function(e,t,i){if(this.getNotIDsByType(e).indexOf(t)!=-1)return;this.getNotIDsByType(e).push(t);this.input.val("");this.input.focus();var n=$('<div class="destinatario" data-id="'+t+'" data-type="'+e+'"><span class="nombre">'+i+'</span> <span class="borrar"></span></div>');n.find(".borrar").click(function(){a.del(this)});this.input.before(n);this.refreshInput()};this.refreshInput=function(){var e=this.element.find(".destinatario").length?this.placeholder_singular:this.placeholder_plural;if(e!=this.input.attr("placeholder")){this.input.attr("placeholder",e)}};this.clearSelectedToDelete=function(){this.element.find(".destinatario.selected").removeClass("selected")};this.getGroupsIDs=function(){var i=[];this.element.find(".destinatario").each(function(e,t){if($(this).data("type")==0){i.push($(this).data("id"))}});return i};this.getUsersIDs=function(){var i=[];this.element.find(".destinatario").each(function(e,t){if($(this).data("type")>0){i.push($(this).data("id"))}});return i};this.bindInputWrapperEvents=function(){$(this.element).click(function(e){$(this).children("input").focus()});$(this.element).children("input").on("focus",function(e){a.element.addClass("highligth")}).on("blur",function(e){a.element.removeClass("highligth")})};this.input.catcomplete({minLength:2,position:{of:a.element},open:function(){setTimeout(function(){$(".ui-autocomplete").css("z-index",9999)},0)},source:function(e,t){var i="/LMS/ajax.php?op=search.searchall";i+="&term="+encodeURIComponent(e.term);i+="&notIDs_groups="+encodeURIComponent(a.notIDs[0].join(","));i+="&notIDs_users="+encodeURIComponent(a.notIDs[1].join(","));if(a.idgrupohilo>0)i+="&idgrupohilo="+encodeURIComponent(a.idgrupohilo);var n=function(e){if(!e)e="ERROR";if(e.startsWith("ERROR")){if(!blink.isApp)standardAJAX(e)}else{if(typeof e=="string")e=jQuery.parseJSON(e);if(e.length==0){e=[{category:textweb("destinatarios_no_results")}]}if(e)t(e);else if(!blink.isApp)standardAJAX("ERROR")}};blink.ajax(i,n,{},{waitingElement:"#waitingImage"})},select:function(e,t){a.add(t.item.type,t.item.id,t.item.value);return false}})}function DestinatariosTagsInputObj(a,i){var e=a.selector,r=a.selectortagsinput,t=a.idgrupohilo;i.add=function(e,t,i){$(r).tagsinput("add",{value:t,text:i,type:e});this.input.val("")};i.getIDs=function(e){var t=$(r).tagsinput("items"),i=[];for(var n=0,a=t.length;n<a;n++){if(t[n].type===e){i.push(t[n].value+":"+t[n].type)}}return i};i.getGroupsIDs=function(){return this.getIDs(this.types.GRUPO)};i.getUsersIDs=function(){var e=[];e=e.concat(this.getIDs(this.types.PROFESOR));e=e.concat(this.getIDs(this.types.ALUMNO));e=e.concat(this.getIDs(this.types.PADRE));return e};i.input.on("drop",function(e){e.preventDefault();e.stopPropagation()}).on("input paste",function(){i.refreshInput()}).focusout(function(){i.clearSelectedToDelete()}).keydown(function(e){i.refreshInput();var t=e.keyCode?e.keyCode:e.which;if(t!=8){destinatarios.clearSelectedToDelete()}}).keyup(function(e){if($(this).val().length==0){var t=e.keyCode?e.keyCode:e.which;if(t==8){if(i.element.find(".destinatario.selected").length>0){i.element.find(".destinatario.selected").find("span").click()}else{i.element.find(".destinatario").last().addClass("selected")}}}else{i.element.find(".destinatario.selected").removeClass("selected")}});var o=i;i.input.catcomplete({minLength:2,position:{of:o.element,my:"left top",at:"left bottom"},open:function(){setTimeout(function(){$(".ui-autocomplete").css("z-index",9999)},0)},source:function(e,t){var i="/LMS/ajax.php?op=search.searchall";if(a.urlajax!=undefined)i=a.urlajax;i+="&term="+encodeURIComponent(e.term);i+="&notIDs_groups="+encodeURIComponent(o.notIDs[0].join(","));i+="&notIDs_users="+encodeURIComponent(o.notIDs[1].join(","));if(o.idgrupohilo>0)i+="&idgrupohilo="+encodeURIComponent(o.idgrupohilo);var n=function(e){if(!e)e="ERROR";if(e.startsWith("ERROR")){if(!blink.isApp)standardAJAX(e)}else{if(typeof e=="string")e=jQuery.parseJSON(e);if(e.length==0){e=[{category:textweb("destinatarios_no_results")}]}if(e)t(e);else if(!blink.isApp)standardAJAX("ERROR")}};blink.ajax(i,n,{},{waitingElement:null})},select:function(e,t){o.add(t.item.type,t.item.id,t.item.value);return false}})}var DestinatariosTagsInput=function(e){$(e.selectortagsinput).tagsinput({itemValue:"value",itemText:"text",tagClass:function(e){return"label label-default"}});$destinatarios=new Destinatarios(e.selector,e.idgrupohilo);var t=$.extend($destinatarios,new DestinatariosTagsInputObj(e,$destinatarios));return t};$.widget&&$.widget("blink.blinkcombobox",{_create:function(){this.wrapper=$("<div>").addClass("blink-combobox input-group").insertAfter(this.element);this.element.hide();this._createAutocomplete();this._createShowAllButton()},_createAutocomplete:function(){var e=this.element.children(":selected"),t=e.val()?e.text():"";this.input=$("<input>").appendTo(this.wrapper).val(t).attr("title","").addClass("blink-combobox-input ui-widget ui-widget-content ui-state-default ui-corner-left form-control").autocomplete({delay:0,minLength:0,source:$.proxy(this,"_source"),open:function(e,t){$(this).data("ui-autocomplete").menu.activeMenu.addClass("blink-combobox-menu");if($(".modal:visible").length>0)$(this).data("ui-autocomplete").menu.activeMenu.zIndex("9999")},position:{collision:"flip"}}).tooltip();this._on(this.input,{autocompleteselect:function(e,t){t.item.option.selected=true;this._trigger("select",e,{item:t.item.option})},autocompletechange:"_removeIfInvalid"});var i=this.input;$(window).resize(function(){i.autocomplete();i.autocomplete("search","");i.autocomplete("close")})},_createShowAllButton:function(){var e=this.input,t=false;$("<a>").attr("tabIndex",-1).attr("title",textweb("show.all.items")).tooltip().appendTo(this.wrapper).button({icons:{primary:"ui-icon-triangle-1-s"},text:false}).removeClass("ui-corner-all").addClass("blink-combobox-toggle ui-corner-right input-group-addon fa-angle-down").on("mousedown",function(){t=e.autocomplete("widget").is(":visible")}).on("click",function(){e.trigger("focus");if(t){return}e.autocomplete("search","")})},_source:function(t,e){var i=new RegExp($.ui.autocomplete.escapeRegex(t.term),"i");e(this.element.children("option").map(function(){var e=$(this).text();if(this.value&&(!t.term||i.test(e)))return{label:e,value:e,option:this}}))},_removeIfInvalid:function(e,t){if(t.item){return}var i=this.input.val(),n=i.toLowerCase(),a=false;this.element.children("option").each(function(){if($(this).text().toLowerCase()===n){this.selected=a=true;return false}});if(a){return}this.input.val("").attr("title",i+" didn't match any item").tooltip();this.element.val("");this.input.autocomplete("instance").term=""},_destroy:function(){this.wrapper.remove();this.element.show()}});$.widget&&$.widget("blink.blinkcomplete",$.ui.autocomplete,{options:{width:300,getItemImg:function(e){return e.img},getItemLine1:function(e){return e.line1},getItemLine2:function(e){return e.line2},getItemWidth:function(e){return e.width},focus:function(e,t){if(blink.isIpad){$(this).data("blinkBlinkcomplete").options.select(e,t);$(this).data("blinkBlinkcomplete").close(e,t);return true}return false},change:function(e,t){$(this).trigger("change")}},_resizeMenu:function(){this._super();this.menu.element.width(this.options.width)},_renderItem:function(e,t){return $("<li></li>").data("ui-autocomplete-item",t).append(blink.getAutocompleteItem(this.options.getItemImg(t),this.options.getItemLine1(t),this.options.getItemLine2(t),this.options.getItemWidth(t))).appendTo(e)}});$.widget&&$.widget("blink.catcomplete",$.blink.blinkcomplete,{_create:function(){this._super();this.widget().menu("option","items","> :not(.ui-autocomplete-category)")},options:{getItemLine1:function(e){return e.value},focus:function(e,t){if(blink.isIpad){$(this).data("blinkCatcomplete").options.select(e,t);$(this).data("blinkCatcomplete").close(e,t);return true}return false}},_renderMenu:function(i,e){var n=this;i.addClass("ul-catcomplete");$.each(e,function(e,t){if(t.category){i.append("<li class='ui-autocomplete-category'>"+t.category+"</li>")}else{n._renderItem(i,t)}})}});jQuery.fn.center=function(e){this.css("position","absolute");if(!e||e=="vertical_only")this.css("top",($(window).height()-this.height())/2+$(window).scrollTop()+"px");if(!e||e=="horizontal_only")this.css("left",($(window).width()-this.width())/2+$(window).scrollLeft()+"px");return this};jQuery.fn.shuffle=function(){var i=this.get(),n=function(e){return Math.floor(Math.random()*e)},t=$.map(i,function(){var e=n(i.length),t=$(i[e]).clone(true)[0];i.splice(e,1);return t});this.each(function(e){$(this).replaceWith($(t[e]))});return $(t)};(function(){var e=jQuery.fn.fadeIn;var t=jQuery.fn.fadeOut;$.fn.fadeIn=function(){if($.browser.msie&&parseInt($.browser.version,10)<=8){if(arguments&&arguments.length>0)arguments[0]=0;return $.fn.show.apply(this,arguments)}else return e.apply(this,arguments)};$.fn.fadeOut=function(){if($.browser.msie&&parseInt($.browser.version,10)<=8){if(arguments&&arguments.length>0)arguments[0]=0;return $.fn.hide.apply(this,arguments)}else return t.apply(this,arguments)}})();(function(){$.fn.isIntoView=function(){var e=this;var t=$(window);var i=t.scrollTop();var n=i+t.height();var a=e.offset().top;var r=a+e.height();return r>=n&&a<=i||r<=n&&a>=i}})();(function(s){s.fn.autogrow=function(o){var e=s(this).css({overflow:"hidden",resize:"none"}),t=e.selector,i={context:s(document),animate:true,speed:200,fixMinHeight:true,cloneClass:"autogrowclone",onInitialize:true};o=s.isPlainObject(o)?o:{context:o?o:s(document)};o=s.extend({},i,o);e.each(function(e,t){var i,n;t=s(t);if(t.is(":visible")||parseInt(t.css("height"),10)>0){i=parseInt(t.css("height"),10)||t.innerHeight()}else{n=t.clone().addClass(o.cloneClass).val(t.val()).css({position:"absolute",visibility:"hidden",display:"block"});s("body").append(n);i=n.innerHeight();n.remove()}if(o.fixMinHeight){t.data("autogrow-start-height",i)}t.css("height",i);if(o.onInitialize&&t.length){resize.call(t[0])}});o.context.on("keyup paste",t,resize);function resize(e){var t=s(this),i=t.innerHeight(),n=this.scrollHeight,a=t.data("autogrow-start-height")||0,r;if(i<n){this.scrollTop=0;o.animate?t.stop().animate({height:n},o.speed):t.innerHeight(n)}else if(!e||e.which==8||e.which==46||e.ctrlKey&&e.which==88){if(i>a){r=t.clone().addClass(o.cloneClass).css({position:"absolute",zIndex:-10,height:""}).val(t.val());t.after(r);do{n=r[0].scrollHeight-1;r.innerHeight(n)}while(n===r[0].scrollHeight);n++;r.remove();t.focus();n<a&&(n=a);i>n&&o.animate?t.stop().animate({height:n},o.speed):t.innerHeight(n)}else{t.innerHeight(a)}}}return e}})(jQuery);var VKI_attach,VKI_close;function VKI_buildKeyboardInputs(){var p=this;this.VKI_version="1.40";this.VKI_showVersion=false;this.VKI_target=false;this.VKI_shift=this.VKI_shiftlock=false;this.VKI_altgr=this.VKI_altgrlock=false;this.VKI_dead=false;this.VKI_deadkeysOn=false;this.VKI_kts=this.VKI_kt="US Int'l";if(typeof locale!="undefined"&&locale&&locale.indexOf("ES")!=-1)this.VKI_kts=this.VKI_kt="Spanish Es";this.VKI_langAdapt=false;this.VKI_size=4;this.VKI_sizeAdj=true;this.VKI_clearPasswords=true;this.VKI_imageURI="";this.VKI_clickless=0;this.VKI_keyCenter=3;this.VKI_isIE=false;this.VKI_isIE6=false;this.VKI_isIElt8=false;this.VKI_isWebKit=RegExp("KHTML").test(navigator.userAgent);this.VKI_isOpera=RegExp("Opera").test(navigator.userAgent);this.VKI_isMoz=!this.VKI_isWebKit&&navigator.product=="Gecko";this.VKI_i18n={"00":"Virtual Keyboard Interface","01":"Display virtual keyboard interface","02":"Select keyboard layout","03":"Dead keys","04":"On","05":"Off","06":"Close the keyboard","07":"Clear","08":"Clear this input","09":"Version",10:"Adjust keyboard size"};this.VKI_layout={};this.VKI_layout.Arabic=[[["ذ","ّ "],["1","!","¡","¹"],["2","@","²"],["3","#","³"],["4","$","¤","£"],["5","%","€"],["6","^","¼"],["7","&","½"],["8","*","¾"],["9","(","‘"],["0",")","’"],["-","_","¥"],["=","+","×","÷"],["Bksp","Bksp"]],[["Tab","Tab"],["ض","َ"],["ص","ً"],["ث","ُ"],["ق","ٌ"],["ف","ل"],["غ","إ"],["ع","‘"],["ه","÷"],["خ","×"],["ح","؛"],["ج","<"],["د",">"],["\\","|"]],[["Caps","Caps"],["ش","ِ"],["س","ٍ"],["ي","]"],["ب","["],["ل","ل"],["ا","أ"],["ت","ـ"],["ن","،"],["م","/"],["ك",":"],["ط",'"'],["Enter","Enter"]],[["Shift","Shift"],["ئ","~"],["ء","ْ"],["ؤ","}"],["ر","{"],["ل","ل"],["ى","آ"],["ة","’"],["و",","],["ز","."],["ظ","؟"],["Shift","Shift"]],[[" "," "," "," "],["Alt","Alt"]]];this.VKI_layout.Arabic.lang=["ar"];this.VKI_layout["Armenian East"]=[[["՝","՜"],[":","1"],["ձ","Ձ"],["յ","Յ"],["՛","3"],[",","4"],["-","9"],[".","և"],["«","("],["»",")"],["օ","Օ"],["ռ","Ռ"],["ժ","Ժ"],["Bksp","Bksp"]],[["Tab","Tab"],["խ","Խ"],["ւ","Ւ"],["է","Է"],["ր","Ր"],["տ","Տ"],["ե","Ե"],["ը","Ը"],["ի","Ի"],["ո","Ո"],["պ","Պ"],["չ","Չ"],["ջ","Ջ"],["'","՞"]],[["Caps","Caps"],["ա","Ա"],["ս","Ս"],["դ","Դ"],["ֆ","Ֆ"],["ք","Ք"],["հ","Հ"],["ճ","Ճ"],["կ","Կ"],["լ","Լ"],["թ","Թ"],["փ","Փ"],["Enter","Enter"]],[["Shift","Shift"],["զ","Զ"],["ց","Ց"],["գ","Գ"],["վ","Վ"],["բ","Բ"],["ն","Ն"],["մ","Մ"],["շ","Շ"],["ղ","Ղ"],["ծ","Ծ"],["Shift","Shift"]],[[" "," "]]];this.VKI_layout["Armenian East"].lang=["hy"];this.VKI_layout["Armenian West"]=[[["՝","՜"],[":","1"],["ձ","Ձ"],["յ","Յ"],["՛","3"],[",","4"],["-","9"],[".","և"],["«","("],["»",")"],["օ","Օ"],["ռ","Ռ"],["ժ","Ժ"],["Bksp","Bksp"]],[["Tab","Tab"],["խ","Խ"],["վ","Վ"],["է","Է"],["ր","Ր"],["դ","Դ"],["ե","Ե"],["ը","Ը"],["ի","Ի"],["ո","Ո"],["բ","Բ"],["չ","Չ"],["ջ","Ջ"],["'","՞"]],[["Caps","Caps"],["ա","Ա"],["ս","Ս"],["տ","Տ"],["ֆ","Ֆ"],["կ","Կ"],["հ","Հ"],["ճ","Ճ"],["ք","Ք"],["լ","Լ"],["թ","Թ"],["փ","Փ"],["Enter","Enter"]],[["Shift","Shift"],["զ","Զ"],["ց","Ց"],["գ","Գ"],["ւ","Ւ"],["պ","Պ"],["ն","Ն"],["մ","Մ"],["շ","Շ"],["ղ","Ղ"],["ծ","Ծ"],["Shift","Shift"]],[[" "," "]]];this.VKI_layout["Armenian West"].lang=["hy-arevmda"];this.VKI_layout.Assamese=[[["+","?"],["১","{","১"],["২","}","২"],["৩","্ৰ","৩"],["৪","ৰ্","৪"],["৫","জ্ৰ","৫"],["৬","","৬"],["৭","ক্ৰ","৭"],["৮","শ্ৰ","৮"],["৯","(","৯"],["০",")","০"],["-",""],["ৃ","ঋ","ৢ","ৠ"],["Bksp","Bksp"]],[["Tab","Tab"],["ৌ","ঔ","ৗ"],["ৈ","ঐ"],["া","আ"],["ী","ঈ","ৣ","ৡ"],["ূ","ঊ"],["ৱ","ভ"],["হ","ঙ"],["গ","ঘ"],["দ","ধ"],["জ","ঝ"],["ড","ঢ","ড়","ঢ়"],["়","ঞ"]],[["Caps","Caps"],["ো","ও","৴","৵"],["ে","এ","৶","৷"],["্","অ","৸","৹"],["ি","ই","ৢ","ঌ"],["ু","উ"],["প","ফ"],["ৰ","","ৰ","ৱ"],["ক","খ"],["ত","থ"],["চ","ছ"],["ট","ঠ"],["Enter","Enter"]],[["Shift","Shift"],["ৎ","ঃ"],["ং","ঁ","৺"],["ম","ণ"],["ন","৷"],["ব",'"'],["ল","'"],["স","শ"],[",","ষ"],[".",";"],["য","য়"],["Shift","Shift"]],[[" "," "," "," "],["AltGr","AltGr"]]];this.VKI_layout.Assamese.lang=["as"];this.VKI_layout.Belarusian=[[["ё","Ё"],["1","!"],["2",'"'],["3","№"],["4",";"],["5","%"],["6",":"],["7","?"],["8","*"],["9","("],["0",")"],["-","_"],["=","+"],["Bksp","Bksp"]],[["Tab","Tab"],["й","Й"],["ц","Ц"],["у","У"],["к","К"],["е","Е"],["н","Н"],["г","Г"],["ш","Ш"],["ў","Ў"],["з","З"],["х","Х"],["'","'"],["\\","/"]],[["Caps","Caps"],["ф","Ф"],["ы","Ы"],["в","В"],["а","А"],["п","П"],["р","Р"],["о","О"],["л","Л"],["д","Д"],["ж","Ж"],["э","Э"],["Enter","Enter"]],[["Shift","Shift"],["/","|"],["я","Я"],["ч","Ч"],["с","С"],["м","М"],["і","І"],["т","Т"],["ь","Ь"],["б","Б"],["ю","Ю"],[".",","],["Shift","Shift"]],[[" "," "]]];this.VKI_layout.Belarusian.lang=["be"];this.VKI_layout.Belgian=[[["²","³"],["&","1","|"],["é","2","@"],['"',"3","#"],["'","4"],["(","5"],["§","6","^"],["è","7"],["!","8"],["ç","9","{"],["à","0","}"],[")","°"],["-","_"],["Bksp","Bksp"]],[["Tab","Tab"],["a","A"],["z","Z"],["e","E","€"],["r","R"],["t","T"],["y","Y"],["u","U"],["i","I"],["o","O"],["p","P"],["^","¨","["],["$","*","]"],["Enter","Enter"]],[["Caps","Caps"],["q","Q"],["s","S"],["d","D"],["f","F"],["g","G"],["h","H"],["j","J"],["k","K"],["l","L"],["m","M"],["ù","%","´"],["μ","£","`"]],[["Shift","Shift"],["<",">","\\"],["w","W"],["x","X"],["c","C"],["v","V"],["b","B"],["n","N"],[",","?"],[";","."],[":","/"],["=","+","~"],["Shift","Shift"]],[[" "," "," "," "],["AltGr","AltGr"]]];this.VKI_layout.Belgian.lang=["nl-BE","fr-BE"];this.VKI_layout.Bengali=[[[""],["1","","১"],["2","","২"],["3","্র","৩"],["4","র্","৪"],["5","জ্র","৫"],["6","ত্ষ","৬"],["7","ক্র","৭"],["8","শ্র","৮"],["9","(","৯"],["0",")","০"],["-","ঃ"],["ৃ","ঋ","ৢ","ৠ"],["Bksp","Bksp"]],[["Tab","Tab"],["ৌ","ঔ","ৗ"],["ৈ","ঐ"],["া","আ"],["ী","ঈ","ৣ","ৡ"],["ূ","ঊ"],["ব","ভ"],["হ","ঙ"],["গ","ঘ"],["দ","ধ"],["জ","ঝ"],["ড","ঢ","ড়","ঢ়"],["়","ঞ"]],[["Caps","Caps"],["ো","ও","৴","৵"],["ে","এ","৶","৷"],["্","অ","৸","৹"],["ি","ই","ৢ","ঌ"],["ু","উ"],["প","ফ"],["র","","ৰ","ৱ"],["ক","খ"],["ত","থ"],["চ","ছ"],["ট","ঠ"],["Enter","Enter"]],[["Shift","Shift"],[""],["ং","ঁ","৺"],["ম","ণ"],["ন"],["ব"],["ল"],["স","শ"],[",","ষ"],[".","{"],["য","য়"],["Shift","Shift"]],[[" "," "," "," "],["AltGr","AltGr"]]];this.VKI_layout.Bengali.lang=["bn"];this.VKI_layout["Bulgarian Ph"]=[[["ч","Ч"],["1","!"],["2","@"],["3","#"],["4","$"],["5","%"],["6","^"],["7","&"],["8","*"],["9","("],["0",")"],["-","_"],["=","+"],["Bksp","Bksp"]],[["Tab","Tab"],["я","Я"],["в","В"],["е","Е"],["р","Р"],["т","Т"],["ъ","Ъ"],["у","У"],["и","И"],["о","О"],["п","П"],["ш","Ш"],["щ","Щ"],["ю","Ю"]],[["Caps","Caps"],["а","А"],["с","С"],["д","Д"],["ф","Ф"],["г","Г"],["х","Х"],["й","Й"],["к","К"],["л","Л"],[";",":"],["'",'"'],["Enter","Enter"]],[["Shift","Shift"],["з","З"],["ь","Ь"],["ц","Ц"],["ж","Ж"],["б","Б"],["н","Н"],["м","М"],[",","<"],[".",">"],["/","?"],["Shift","Shift"]],[[" "," "]]];this.VKI_layout["Bulgarian Ph"].lang=["bg"];this.VKI_layout["Bulgarian BDS"]=[[["`","~"],["1","!"],["2","?"],["3","+"],["4",'"'],["5","%"],["6","="],["7",":"],["8","/"],["9","_"],["0","№"],["-","І"],["=","V"],["Bksp","Bksp"]],[["Tab","Tab"],[",","ы"],["у","У"],["е","Е"],["и","И"],["ш","Ш"],["щ","Щ"],["к","К"],["с","С"],["д","Д"],["з","З"],["ц","Ц"],[";","§"],["(",")"]],[["Caps","Caps"],["ь","Ь"],["я","Я"],["а","А"],["о","О"],["ж","Ж"],["г","Г"],["т","Т"],["н","Н"],["В","В"],["м","М"],["ч","Ч"],["Enter","Enter"]],[["Shift","Shift"],["Ю","ю"],["й","Й"],["ъ","Ъ"],["э","Э"],["ф","Ф"],["х","Х"],["п","П"],["р","Р"],["л","Л"],["б","Б"],["Shift","Shift"]],[[" "," "]]];this.VKI_layout.Burmese=[[["္`","~"],["၁","ဍ"],["၂","ဎ"],["၃","ဋ"],["၄","ကျပ်"],["၅","%"],["၆","/"],["၇","ရ"],["၈","ဂ"],["၉","("],["၀",")"],["-","_"],["=","+"],["Bksp","Bksp"]],[["Tab","Tab"],["ဆ","ဩ"],["တ","၀"],["န","ဿ"],["မ","ဣ"],["အ","ဤ"],["ပ","၌"],["က","ဉ"],["င","၍"],["သ","ဥ"],["စ","ဏ"],["ဟ","ဧ"],["‘","’"],["၏","ဋ္ဌ"]],[["Caps","Caps"],["​ေ","ဗ"],["​ျ","​ှ"],["​ိ","​ီ"],["​်","င်္​"],["​ါ","​ွ"],["​့","​ံ"],["​ြ","​ဲ"],["​ု","​ု"],["​ူ","​ူ"],["​း","​ါ်"],["ဒ","ဓ"],["Enter","Enter"]],[["Shift","Shift"],["ဖ","ဇ"],["ထ","ဌ"],["ခ","ဃ"],["လ","ဠ"],["ဘ","ဦ"],["ည","ဈ"],["​ာ","ဪ"],["ယ","ရ"],[".","ရ"],["။","၊"],["Shift","Shift"]],[[" "," "]]];this.VKI_layout.Burmese.lang=["my"];this.VKI_layout.Czech=[[[";","°","`","~"],["+","1","!"],["ě","2","@"],["š","3","#"],["č","4","$"],["ř","5","%"],["ž","6","^"],["ý","7","&"],["á","8","*"],["í","9","("],["é","0",")"],["=","%","-","_"],["´","ˇ","=","+"],["Bksp","Bksp"]],[["Tab","Tab"],["q","Q"],["w","W"],["e","E","€"],["r","R"],["t","T"],["y","Y"],["u","U"],["i","I"],["o","O"],["p","P"],["ú","/","[","{"],[")","(","]","}"],["Enter","Enter"]],[["Caps","Caps"],["a","A"],["s","S"],["d","D"],["f","F"],["g","G"],["h","H"],["j","J"],["k","K"],["l","L"],["ů",'"',";",":"],["§","!","¤","^"],["¨","'","\\","|"]],[["Shift","Shift"],["\\","|","","˝"],["z","Z"],["x","X"],["c","C"],["v","V"],["b","B"],["n","N"],["m","M"],[",","?","<","×"],[".",":",">","÷"],["-","_","/","?"],["Shift","Shift"]],[[" "," "," "," "],["Alt","Alt"]]];this.VKI_layout.Czech.lang=["cs"];this.VKI_layout.Danish=[[["½","§"],["1","!"],["2",'"',"@"],["3","#","£"],["4","¤","$"],["5","%","€"],["6","&"],["7","/","{"],["8","(","["],["9",")","]"],["0","=","}"],["+","?"],["´","`","|"],["Bksp","Bksp"]],[["Tab","Tab"],["q","Q"],["w","W"],["e","E","€"],["r","R"],["t","T"],["y","Y"],["u","U"],["i","I"],["o","O"],["p","P"],["å","Å"],["¨","^","~"],["Enter","Enter"]],[["Caps","Caps"],["a","A"],["s","S"],["d","D"],["f","F"],["g","G"],["h","H"],["j","J"],["k","K"],["l","L"],["æ","Æ"],["ø","Ø"],["'","*"]],[["Shift","Shift"],["<",">","\\"],["z","Z"],["x","X"],["c","C"],["v","V"],["b","B"],["n","N"],["m","M","μ","Μ"],[",",";"],[".",":"],["-","_"],["Shift","Shift"]],[[" "," "," "," "],["AltGr","AltGr"]]];this.VKI_layout.Danish.lang=["da"];this.VKI_layout.Dari=[[["‍","÷","~"],["۱","!","`"],["۲","٬","@"],["۳","٫","#"],["۴","؋","$"],["۵","٪","%"],["۶","×","^"],["۷","،","&"],["۸","*","•"],["۹",")","‎"],["۰","(","‏"],["-","ـ","_"],["=","+"],["Bksp","Bksp"]],[["Tab","Tab"],["ض","ْ","°"],["ص","ٌ"],["ث","ٍ","€"],["ق","ً","﴾"],["ف","ُ","﴿"],["غ","ِ","ٖ"],["ع","َ","ٙ"],["ه","ّ","ٕ"],["خ","]","'"],["ح","[",'"'],["ج","}","ځ"],["چ","{","څ"],["\\","|","?"]],[["Caps","Caps"],["ش","ؤ","ښ"],["س","ئ","ۍ"],["ی","ي","ى"],["ب","إ","ې"],["ل","أ","ڷ"],["ا","آ","ٱ"],["ت","ة","ټ"],["ن","»","ڼ"],["م","«","ں"],["ک",":",";"],["گ","؛","ګ"],["Enter","Enter"]],[["Shift","Shift"],["ظ","ك","ے"],["ط","ٓ","ڑ"],["ز","ژ","ږ"],["ر","ٰ","ړ"],["ذ","‌","ڈ"],["د","ٔ","ډ"],["پ","ء","ٹ"],["و",">",","],[".","<","ۇ"],["/","؟","ۉ"],["Shift","Shift"]],[[" "," "," "," "],["AltGr","AltGr"]]];this.VKI_layout.Dari.lang=["da"];this.VKI_layout.Dutch=[[["@","§","¬"],["1","!","¹"],["2",'"',"²"],["3","#","³"],["4","$","¼"],["5","%","½"],["6","&","¾"],["7","_","£"],["8","(","{"],["9",")","}"],["0","'"],["/","?","\\"],["°","~","¸"],["Bksp","Bksp"]],[["Tab","Tab"],["q","Q"],["w","W"],["e","E","€"],["r","R","¶"],["t","T"],["y","Y"],["u","U"],["i","I"],["o","O"],["p","P"],["¨","^"],["*","|"],["<",">"]],[["Caps","Caps"],["a","A"],["s","S","ß"],["d","D"],["f","F"],["g","G"],["h","H"],["j","J"],["k","K"],["l","L"],["+","±"],["´","`"],["Enter","Enter"]],[["Shift","Shift"],["]","[","¦"],["z","Z","«"],["x","X","»"],["c","C","¢"],["v","V"],["b","B"],["n","N"],["m","M","µ"],[",",";"],[".",":","·"],["-","="],["Shift","Shift"]],[[" "," "," "," "],["AltGr","AltGr"]]];this.VKI_layout.Dutch.lang=["nl"];this.VKI_layout.Dvorak=[[["`","~"],["1","!"],["2","@"],["3","#"],["4","$"],["5","%"],["6","^"],["7","&"],["8","*"],["9","("],["0",")"],["[","{"],["]","}"],["Bksp","Bksp"]],[["Tab","Tab"],["'",'"'],[",","<"],[".",">"],["p","P"],["y","Y"],["f","F"],["g","G"],["c","C"],["r","R"],["l","L"],["/","?"],["=","+"],["\\","|"]],[["Caps","Caps"],["a","A"],["o","O"],["e","E"],["u","U"],["i","I"],["d","D"],["h","H"],["t","T"],["n","N"],["s","S"],["-","_"],["Enter","Enter"]],[["Shift","Shift"],[";",":"],["q","Q"],["j","J"],["k","K"],["x","X"],["b","B"],["m","M"],["w","W"],["v","V"],["z","Z"],["Shift","Shift"]],[[" "," "]]];this.VKI_layout.Farsi=[[["پ","ّ "],["1","!","¡","¹"],["2","@","²"],["3","#","³"],["4","$","¤","£"],["5","%","€"],["6","^","¼"],["7","&","½"],["8","*","¾"],["9","(","‘"],["0",")","’"],["-","_","¥"],["=","+","×","÷"],["Bksp","Bksp"]],[["Tab","Tab"],["ض","َ"],["ص","ً"],["ث","ُ"],["ق","ٌ"],["ف","ل"],["غ","إ"],["ع","‘"],["ه","÷"],["خ","×"],["ح","؛"],["ج","<"],["چ",">"],["ژ","|"]],[["Caps","Caps"],["ش","ِ"],["س","ٍ"],["ي","]"],["ب","["],["ل","ل"],["ا","أ"],["ت","ـ"],["ن","،"],["م","\\"],["گ",":"],["ك",'"'],["Enter","Enter"]],[["Shift","Shift"],["ئ","~"],["ء","ْ"],["ز","}"],["ر","{"],["ذ","ل"],["د","آ"],["ئ","ء"],["و",","],[".","."],["/","؟"],["Shift","Shift"]],[[" "," "," "," "],["Alt","Alt"]]];this.VKI_layout.Farsi.lang=["fa"];this.VKI_layout.French=[[["²","³"],["&","1"],["é","2","~"],['"',"3","#"],["'","4","{"],["(","5","["],["-","6","|"],["è","7","`"],["_","8","\\"],["ç","9","^"],["à","0","@"],[")","°","]"],["=","+","}"],["Bksp","Bksp"]],[["Tab","Tab"],["a","A"],["z","Z"],["e","E","€"],["r","R"],["t","T"],["y","Y"],["u","U"],["i","I"],["o","O"],["p","P"],["^","¨"],["$","£","¤"],["Enter","Enter"]],[["Caps","Caps"],["q","Q"],["s","S"],["d","D"],["f","F"],["g","G"],["h","H"],["j","J"],["k","K"],["l","L"],["m","M"],["ù","%"],["*","μ"]],[["Shift","Shift"],["<",">"],["w","W"],["x","X"],["c","C"],["v","V"],["b","B"],["n","N"],[",","?"],[";","."],[":","/"],["!","§"],["Shift","Shift"]],[[" "," "," "," "],["AltGr","AltGr"]]];this.VKI_layout.French.lang=["fr"];this.VKI_layout.German=[[["^","°"],["1","!"],["2",'"',"²"],["3","§","³"],["4","$"],["5","%"],["6","&"],["7","/","{"],["8","(","["],["9",")","]"],["0","=","}"],["ß","?","\\"],["´","`"],["Bksp","Bksp"]],[["Tab","Tab"],["q","Q","@"],["w","W"],["e","E","€"],["r","R"],["t","T"],["z","Z"],["u","U"],["i","I"],["o","O"],["p","P"],["ü","Ü"],["+","*","~"],["Enter","Enter"]],[["Caps","Caps"],["a","A"],["s","S"],["d","D"],["f","F"],["g","G"],["h","H"],["j","J"],["k","K"],["l","L"],["ö","Ö"],["ä","Ä"],["#","'"]],[["Shift","Shift"],["<",">","¦"],["y","Y"],["x","X"],["c","C"],["v","V"],["b","B"],["n","N"],["m","M","µ"],[",",";"],[".",":"],["-","_"],["Shift","Shift"]],[[" "," "," "," "],["AltGr","AltGr"]]];this.VKI_layout.German.lang=["de"];this.VKI_layout.Greek=[[["`","~"],["1","!"],["2","@","²"],["3","#","³"],["4","$","£"],["5","%","§"],["6","^","¶"],["7","&"],["8","*","¤"],["9","(","¦"],["0",")","º"],["-","_","±"],["=","+","½"],["Bksp","Bksp"]],[["Tab","Tab"],[";",":"],["ς","^"],["ε","Ε"],["ρ","Ρ"],["τ","Τ"],["υ","Υ"],["θ","Θ"],["ι","Ι"],["ο","Ο"],["π","Π"],["[","{","“"],["]","}","”"],["Enter","Enter"]],[["Caps","Caps"],["α","Α"],["σ","Σ"],["δ","Δ"],["φ","Φ"],["γ","Γ"],["η","Η"],["ξ","Ξ"],["κ","Κ"],["λ","Λ"],["΄","¨","΅"],["'",'"'],["\\","|","¬"]],[["Shift","Shift"],["<",">"],["ζ","Ζ"],["χ","Χ"],["ψ","Ψ"],["ω","Ω"],["β","Β"],["ν","Ν"],["μ","Μ"],[",","<"],[".",">"],["/","?"],["Shift","Shift"]],[[" "," "," "," "],["AltGr","AltGr"]]];this.VKI_layout.Greek.lang=["el"];this.VKI_layout.Hebrew=[[["~","`"],["1","!"],["2","@"],["3","#"],["4","$","₪"],["5","%"],["6","^"],["7","&"],["8","*"],["9",")"],["0","("],["-","_"],["=","+"],["\\","|"],["Bksp","Bksp"]],[["Tab","Tab"],["/","Q"],["'","W"],["ק","E","€"],["ר","R"],["א","T"],["ט","Y"],["ו","U","װ"],["ן","I"],["ם","O"],["פ","P"],["]","}"],["[","{"]],[["Caps","Caps"],["ש","A"],["ד","S"],["ג","D"],["כ","F"],["ע","G"],["י","H","ײ"],["ח","J","ױ"],["ל","K"],["ך","L"],["ף",":"],[", ",'"'],["Enter","Enter"]],[["Shift","Shift"],["ז","Z"],["ס","X"],["ב","C"],["ה","V"],["נ","B"],["מ","N"],["צ","M"],["ת",">"],["ץ","<"],[".","?"],["Shift","Shift"]],[[" "," "," "," "],["AltGr","AltGr"]]];this.VKI_layout.Hebrew.lang=["he"];this.VKI_layout.Hindi=[[["‍","‌","`","~"],["1","ऍ","१","!"],["2","ॅ","२","@"],["3","्र","३","#"],["4","र्","४","$"],["5","ज्ञ","५","%"],["6","त्र","६","^"],["7","क्ष","७","&"],["8","श्र","८","*"],["9","(","९","("],["0",")","०",")"],["-","ः","-","_"],["ृ","ऋ","=","+"],["Bksp","Bksp"]],[["Tab","Tab"],["ौ","औ"],["ै","ऐ"],["ा","आ"],["ी","ई"],["ू","ऊ"],["ब","भ"],["ह","ङ"],["ग","घ"],["द","ध"],["ज","झ"],["ड","ढ","[","{"],["़","ञ","]","}"],["Enter","Enter"]],[["Caps","Caps"],["ो","ओ"],["े","ए"],["्","अ"],["ि","इ"],["ु","उ"],["प","फ"],["र","ऱ"],["क","ख"],["त","थ"],["च","छ",";",":"],["ट","ठ","'",'"'],["ॉ","ऑ","\\","|"]],[["Shift","Shift"],[""],["ं","ँ","","ॐ"],["म","ण"],["न"],["व"],["ल","ळ"],["स","श"],[",","ष",",","<"],[".","।",".",">"],["य","य़","/","?"],["Shift","Shift"]],[[" "," "," "," "],["AltGr","AltGr"]]];this.VKI_layout.Hindi.lang=["hi"];this.VKI_layout.Hungarian=[[["0","§"],["1","'","~"],["2",'"',"ˇ"],["3","+","ˆ"],["4","!","˘"],["5","%","°"],["6","/","˛"],["7","=","`"],["8","(","˙"],["9",")","´"],["ö","Ö","˝"],["ü","Ü","¨"],["ó","Ó","¸"],["Bksp","Bksp"]],[["Tab","Tab"],["q","Q","\\"],["w","W","|"],["e","E","Ä"],["r","R"],["t","T"],["z","Z"],["u","U","€"],["i","I","Í"],["o","O"],["p","P"],["ő","Ő","÷"],["ú","Ú","×"],["Enter","Enter"]],[["Caps","Caps"],["a","A","ä"],["s","S","đ"],["d","D","Đ"],["f","F","["],["g","G","]"],["h","H"],["j","J","í"],["k","K","Ł"],["l","L","ł"],["é","É","$"],["á","Á","ß"],["ű","Ű","¤"]],[["Shift","Shift"],["í","Í","<"],["y","Y",">"],["x","X","#"],["c","C","&"],["v","V","@"],["b","B","{"],["n","N","}"],["m","M","<"],[",","?",";"],[".",":",">"],["-","_","*"],["Shift","Shift"]],[[" "," "," "," "],["AltGr","AltGr"]]];this.VKI_layout.Hungarian.lang=["hu"];this.VKI_layout.Italian=[[["\\","|"],["1","!"],["2",'"'],["3","£"],["4","$","€"],["5","%"],["6","&"],["7","/"],["8","("],["9",")"],["0","="],["'","?"],["ì","^"],["Bksp","Bksp"]],[["Tab","Tab"],["q","Q"],["w","W"],["e","E","€"],["r","R"],["t","T"],["y","Y"],["u","U"],["i","I"],["o","O"],["p","P"],["è","é","[","{"],["+","*","]","}"],["Enter","Enter"]],[["Caps","Caps"],["a","A"],["s","S"],["d","D"],["f","F"],["g","G"],["h","H"],["j","J"],["k","K"],["l","L"],["ò","ç","@"],["à","°","#"],["ù","§"]],[["Shift","Shift"],["<",">"],["z","Z"],["x","X"],["c","C"],["v","V"],["b","B"],["n","N"],["m","M"],[",",";"],[".",":"],["-","_"],["Shift","Shift"]],[[" "," "," "," "],["AltGr","AltGr"]]];this.VKI_layout.Italian.lang=["it"];this.VKI_layout["日本語"]=[[["～"],["ぬ","ヌ"],["ふ","フ"],["あ","ア","ぁ","ァ"],["う","ウ","ぅ","ゥ"],["え","エ","ぇ","ェ"],["お","オ","ぉ","ォ"],["や","ヤ","ゃ","ャ"],["ゆ","ユ","ゅ","ュ"],["よ","ヨ","ょ","ョ"],["わ","ワ","を","ヲ"],["ほ","ホ","ー","＝"],["へ","ヘ","＾","～"],['"','"',"￥","｜"],["Bksp","Bksp"]],[["Tab","Tab"],["た","タ"],["て","テ"],["い","イ","ぃ","ィ"],["す","ス"],["か","カ"],["ん","ン"],["な","ナ"],["に","ニ"],["ら","ラ"],["せ","セ"],["、","、","＠","‘"],["。","。","「","｛"],["￥","","","＊"]],[["Caps","Caps"],["ち","チ"],["と","ト"],["し","シ"],["は","ハ"],["き","キ"],["く","ク"],["ま","マ"],["の","ノ"],["れ","レ","；","＋"],["け","ケ","：","ヶ"],["む","ム","」","｝"],["Enter","Enter"]],[["Shift","Shift"],["つ","ツ"],["さ","サ"],["そ","ソ"],["ひ","ヒ"],["こ","コ"],["み","ミ"],["も","モ"],["ね","ネ","、","＜"],["る","ル","。","＞"],["め","メ","・","？"],["ろ","ロ","","＿"],["Shift","Shift"]],[["AltLk","AltLk"],[" "," "," "," "],["Alt","Alt"]]];this.VKI_layout["日本語"].lang=["ja"];this.VKI_layout.Kazakh=[[["(",")"],['"',"!"],["ә","Ә"],["і","І"],["ң","Ң"],["ғ","Ғ"],[",",";"],[".",":"],["ү","Ү"],["ұ","Ұ"],["қ","Қ"],["ө","Ө"],["һ","Һ"],["Bksp","Bksp"]],[["Tab","Tab"],["й","Й"],["ц","Ц"],["у","У"],["к","К"],["е","Е"],["н","Н"],["г","Г"],["ш","Ш"],["щ","Щ"],["з","З"],["х","Х"],["ъ","Ъ"],["\\","/"]],[["Caps","Caps"],["ф","Ф"],["ы","Ы"],["в","В"],["а","А"],["п","П"],["р","Р"],["о","О"],["л","Л"],["д","Д"],["ж","Ж"],["э","Э"],["Enter","Enter"]],[["Shift","Shift"],["\\","|"],["я","Я"],["ч","Ч"],["с","С"],["м","М"],["и","И"],["т","Т"],["ь","Ь"],["б","Б"],["ю","Ю"],["№","?"],["Shift","Shift"]],[[" "," "]]];this.VKI_layout.Kazakh.lang=["kk"];this.VKI_layout.Kurdish=[[["€","~"],["١","!"],["٢","@"],["٣","#"],["٤","$"],["٥","%"],["٦","^"],["٧","&"],["٨","*"],["٩","("],["٠",")"],["-","_"],["=","+"],["Bksp","Bksp"]],[["Tab","Tab"],["ق","`"],["و","وو"],["ە","ي"],["ر","ڕ"],["ت","ط"],["ی","ێ"],["ئ","ء"],["ح","ع"],["ۆ","ؤ"],["پ","ث"],["[","{"],["]","}"],["\\","|"]],[["Caps","Caps"],["ا","آ"],["س","ش"],["د","ذ"],["ف","إ"],["گ","غ"],["ه","‌"],["ژ","أ"],["ک","ك"],["ل","ڵ"],["؛",":"],["'",'"'],["Enter","Enter"]],[["Shift","Shift"],["ز","ض"],["خ","ص"],["ج","چ"],["ڤ","ظ"],["ب","ى"],["ن","ة"],["م","ـ"],["،","<"],[".",">"],["/","؟"],["Shift","Shift"]],[[" "," "]]];this.VKI_layout.Kurdish.lang=["ku"];this.VKI_layout.Lithuanian=[[["`","~"],["ą","Ą"],["č","Č"],["ę","Ę"],["ė","Ė"],["į","Į"],["š","Š"],["ų","Ų"],["ū","Ū"],["„","("],["“",")"],["-","_"],["ž","Ž"],["Bksp","Bksp"]],[["Tab","Tab"],["q","Q"],["w","W"],["e","E"],["r","R"],["t","T"],["y","Y"],["u","U"],["i","I"],["o","O"],["p","P"],["[","{"],["]","}"],["Enter","Enter"]],[["Caps","Caps"],["a","A"],["s","S"],["d","D"],["f","F"],["g","G"],["h","H"],["j","J"],["k","K"],["l","L"],[";",":"],["'",'"'],["\\","|"]],[["Shift","Shift"],["–","€"],["z","Z"],["x","X"],["c","C"],["v","V"],["b","B"],["n","N"],["m","M"],[",","<"],[".",">"],["/","?"],["Shift","Shift"]],[[" "," "]]];this.VKI_layout.Lithuanian.lang=["lt"];this.VKI_layout.Macedonian=[[["`","~"],["1","!"],["2","„"],["3","“"],["4","’"],["5","%"],["6","‘"],["7","&"],["8","*"],["9","("],["0",")"],["-","_"],["=","+"],["Bksp","Bksp"]],[["Tab","Tab"],["љ","Љ"],["њ","Њ"],["е","Е","€"],["р","Р"],["т","Т"],["ѕ","Ѕ"],["у","У"],["и","И"],["о","О"],["п","П"],["ш","Ш","Ђ"],["ѓ","Ѓ","ђ"],["Enter","Enter"]],[["Caps","Caps"],["а","А"],["с","С"],["д","Д"],["ф","Ф","["],["г","Г","]"],["х","Х"],["ј","Ј"],["к","К"],["л","Л"],["ч","Ч","Ћ"],["ќ","Ќ","ћ"],["ж","Ж"]],[["Shift","Shift"],["ё","Ё"],["з","З"],["џ","Џ"],["ц","Ц"],["в","В","@"],["б","Б","{"],["н","Н","}"],["м","М","§"],[",",";"],[".",":"],["/","?"],["Shift","Shift"]],[[" "," "," "," "],["AltGr","AltGr"]]];this.VKI_layout.Macedonian.lang=["mk"];this.VKI_layout.Norwegian=[[["|","§"],["1","!"],["2",'"',"@"],["3","#","£"],["4","¤","$"],["5","%"],["6","&"],["7","/","{"],["8","(","["],["9",")","]"],["0","=","}"],["+","?"],["\\","`","´"],["Bksp","Bksp"]],[["Tab","Tab"],["q","Q"],["w","W"],["e","E","€"],["r","R"],["t","T"],["y","Y"],["u","U"],["i","I"],["o","O"],["p","P"],["å","Å"],["¨","^","~"],["Enter","Enter"]],[["Caps","Caps"],["a","A"],["s","S"],["d","D"],["f","F"],["g","G"],["h","H"],["j","J"],["k","K"],["l","L"],["ø","Ø"],["æ","Æ"],["'","*"]],[["Shift","Shift"],["<",">"],["z","Z"],["x","X"],["c","C"],["v","V"],["b","B"],["n","N"],["m","M","μ","Μ"],[",",";"],[".",":"],["-","_"],["Shift","Shift"]],[[" "," "," "," "],["AltGr","AltGr"]]];this.VKI_layout.Norwegian.lang=["no","nb","nn"];this.VKI_layout.Numpad=[[["$"],["£"],["€"],["¥"],["/"],["^"],["Bksp","Bksp"]],[["."],["7"],["8"],["9"],["*"],["<"],["("],["["]],[["="],["4"],["5"],["6"],["-"],[">"],[")"],["]"]],[["0"],["1"],["2"],["3"],["+"],["Enter","Enter"]],[[" "]]];this.VKI_layout.Numpad.DDK=true;this.VKI_layout.Numpad.lang=["num"];this.VKI_layout.Pashto=[[["‍","÷","`"],["۱","!","`"],["۲","٬","@"],["۳","٫","٫"],["۴","¤","£"],["۵","٪","%"],["۶","×","^"],["۷","«","&"],["۸","»","*"],["۹","(","ﷲ"],["۰",")","ﻻ"],["-","ـ","_"],["=","+","ﺇ","÷"],["Bksp","Bksp"]],[["Tab","Tab"],["ض","ْ","ە"],["ص","ٌ","ٓ"],["ث","ٍ","€"],["ق","ً","ﻷ"],["ف","ُ","ﻵ"],["غ","ِ","'"],["ع","َ","ﺄ"],["ه","ّ","ٰ"],["خ","ځ","'"],["ح","څ",'"'],["ج","]","}"],["چ","[","{"],["\\","٭","|"]],[["Caps","Caps"],["ش","ښ","ﮰ"],["س","ۍ","ے"],["ی","ي","ے"],["ب","پ","ں"],["ل","أ","ڷ"],["ا","آ","ٱ"],["ت","ټ","ٹ"],["ن","ڼ","<"],["م","ة",">"],["ک",":","ك"],["گ","؛","ګ"],["Enter","Enter"]],[["Shift","Shift"],["ظ","ئ","?"],["ط","ې",";"],["ز","ژ","ٕ"],["ر","ء","ٔ"],["ذ","‌","إ"],["د","ډ","ڈ"],["ړ","ؤ","ڑ"],["و","،",","],["ږ",".","ۇ"],["/","؟","ۉ"],["Shift","Shift","ٍ"]],[[" "," "," "," "],["Alt","Alt"]]];this.VKI_layout.Pashto.lang=["ps"];this.VKI_layout.Pinyin=[[["`","~","亓","〜"],["1","!","｢"],["2","@","｣"],["3","#","〝"],["4","$","〞"],["5","%","〟"],["6","^","〈"],["7","&","〉"],["8","*","〯"],["9","(","《"],["0",")","》"],["-","_","『"],["=","+","』"],["Bksp","Bksp"]],[["Tab","Tab"],["q","Q","ā","Ā"],["w","W","á","Á"],["e","E","ǎ","Ǎ"],["r","R","à","À"],["t","T","ē","Ē"],["y","Y","é","É"],["u","U","ě","Ě"],["i","I","è","È"],["o","O","ī","Ī"],["p","P","í","Í"],["[","{","ǐ","Ǐ"],["]","}","ì","Ì"],["\\","|","〠"]],[["Caps","Caps"],["a","A","ō","Ō"],["s","S","ó","Ó"],["d","D","ǒ","Ǒ"],["f","F","ò","Ò"],["g","G","ü","Ü"],["h","H","ū","Ū"],["j","J","ú","Ú"],["k","K","ǔ","Ǔ"],["l","L","ù","Ù"],[";",":"],["'",'"'],["Enter","Enter"]],[["Shift","Shift"],["z","Z","ǖ","Ǖ"],["x","X","ǘ","Ǘ"],["c","C","ǚ","Ǚ"],["v","V","ǜ","Ǜ"],["b","B"],["n","N"],["m","M"],[",","<","、"],[".",">","。"],["/","?"],["Shift","Shift"]],[["AltLk","AltLk"],[" "," "," "," "],["Alt","Alt"]]];this.VKI_layout.Pinyin.lang=["zh-Latn"];this.VKI_layout["Polish Prog"]=[[["`","~"],["1","!"],["2","@"],["3","#"],["4","$"],["5","%"],["6","^"],["7","&"],["8","*"],["9","("],["0",")"],["-","_"],["=","+"],["Bksp","Bksp"]],[["Tab","Tab"],["q","Q"],["w","W"],["e","E","ę","Ę"],["r","R"],["t","T"],["y","Y"],["u","U"],["i","I"],["o","O","ó","Ó"],["p","P"],["[","{"],["]","}"],["\\","|"]],[["Caps","Caps"],["a","A","ą","Ą"],["s","S","ś","Ś"],["d","D"],["f","F"],["g","G"],["h","H"],["j","J"],["k","K"],["l","L","ł","Ł"],[";",":"],["'",'"'],["Enter","Enter"]],[["Shift","Shift"],["z","Z","ż","Ż"],["x","X","ź","Ź"],["c","C","ć","Ć"],["v","V"],["b","B"],["n","N","ń","Ń"],["m","M"],[",","<"],[".",">"],["/","?"],["Shift","Shift"]],[[" "," "," "," "],["Alt","Alt"]]];this.VKI_layout["Polish Prog"].lang=["pl"];this.VKI_layout["Portuguese Br"]=[[["'",'"'],["1","!","¹"],["2","@","²"],["3","#","³"],["4","$","£"],["5","%","¢"],["6","¨","¬"],["7","&"],["8","*"],["9","("],["0",")"],["-","_"],["=","+","§"],["Bksp","Bksp"]],[["Tab","Tab"],["q","Q","/"],["w","W","?"],["e","E","€"],["r","R"],["t","T"],["y","Y"],["u","U"],["i","I"],["o","O"],["p","P"],["´","`"],["[","{","ª"],["Enter","Enter"]],[["Caps","Caps"],["a","A"],["s","S"],["d","D"],["f","F"],["g","G"],["h","H"],["j","J"],["k","K"],["l","L"],["ç","Ç"],["~","^"],["]","}","º"],["/","?"]],[["Shift","Shift"],["\\","|"],["z","Z"],["x","X"],["c","C","₢"],["v","V"],["b","B"],["n","N"],["m","M"],[",","<"],[".",">"],[":",":"],["Shift","Shift"]],[[" "," "," "," "],["AltGr","AltGr"]]];this.VKI_layout["Portuguese Br"].lang=["pt-br"];this.VKI_layout["Portuguese Pt"]=[[["\\","|"],["1","!"],["2",'"',"@"],["3","#","£"],["4","$","§"],["5","%"],["6","&"],["7","/","{"],["8","(","["],["9",")","]"],["0","=","}"],["'","?"],["«","»"],["Bksp","Bksp"]],[["Tab","Tab"],["q","Q"],["w","W"],["e","E","€"],["r","R"],["t","T"],["y","Y"],["u","U"],["i","I"],["o","O"],["p","P"],["+","*","¨"],["´","`"],["Enter","Enter"]],[["Caps","Caps"],["a","A"],["s","S"],["d","D"],["f","F"],["g","G"],["h","H"],["j","J"],["k","K"],["l","L"],["ç","Ç"],["º","ª"],["~","^"]],[["Shift","Shift"],["<",">","\\"],["z","Z"],["x","X"],["c","C"],["v","V"],["b","B"],["n","N"],["m","M"],[",",";"],[".",":"],["-","_"],["Shift","Shift"]],[[" "," "," "," "],["AltGr","AltGr"]]];this.VKI_layout["Portuguese Pt"].lang=["pt"];this.VKI_layout.Romanian=[[["„","”","`","~"],["1","!","~"],["2","@","ˇ"],["3","#","^"],["4","$","˘"],["5","%","°"],["6","^","˛"],["7","&","`"],["8","*","˙"],["9","(","´"],["0",")","˝"],["-","_","¨"],["=","+","¸","±"],["Bksp","Bksp"]],[["Tab","Tab"],["q","Q"],["w","W"],["e","E","€"],["r","R"],["t","T"],["y","Y"],["u","U"],["i","I"],["o","O"],["p","P","§"],["ă","Ă","[","{"],["î","Î","]","}"],["â","Â","\\","|"]],[["Caps","Caps"],["a","A"],["s","S","ß"],["d","D","ð","Ð"],["f","F"],["g","G"],["h","H"],["j","J"],["k","K"],["l","L","ł","Ł"],[this.VKI_isIElt8?"ş":"ș",this.VKI_isIElt8?"Ş":"Ș",";",":"],[this.VKI_isIElt8?"ţ":"ț",this.VKI_isIElt8?"Ţ":"Ț","'",'"'],["Enter","Enter"]],[["Shift","Shift"],["\\","|"],["z","Z"],["x","X"],["c","C","©"],["v","V"],["b","B"],["n","N"],["m","M"],[",",";","<","«"],[".",":",">","»"],["/","?"],["Shift","Shift"]],[[" "," "," "," "],["AltGr","AltGr"]]];this.VKI_layout.Romanian.lang=["ro"];this.VKI_layout.Russian=[[["ё","Ё"],["1","!"],["2",'"'],["3","№"],["4",";"],["5","%"],["6",":"],["7","?"],["8","*"],["9","("],["0",")"],["-","_"],["=","+"],["Bksp","Bksp"]],[["Tab","Tab"],["й","Й"],["ц","Ц"],["у","У"],["к","К"],["е","Е"],["н","Н"],["г","Г"],["ш","Ш"],["щ","Щ"],["з","З"],["х","Х"],["ъ","Ъ"],["Enter","Enter"]],[["Caps","Caps"],["ф","Ф"],["ы","Ы"],["в","В"],["а","А"],["п","П"],["р","Р"],["о","О"],["л","Л"],["д","Д"],["ж","Ж"],["э","Э"],["\\","/"]],[["Shift","Shift"],["/","|"],["я","Я"],["ч","Ч"],["с","С"],["м","М"],["и","И"],["т","Т"],["ь","Ь"],["б","Б"],["ю","Ю"],[".",","],["Shift","Shift"]],[[" "," "]]];this.VKI_layout.Russian.lang=["ru"];this.VKI_layout.SerbianCyr=[[["`","~"],["1","!"],["2",'"'],["3","#"],["4","$"],["5","%"],["6","&"],["7","/"],["8","("],["9",")"],["0","="],["'","?"],["+","*"],["Bksp","Bksp"]],[["Tab","Tab"],["љ","Љ"],["њ","Њ"],["е","Е","€"],["р","Р"],["т","Т"],["з","З"],["у","У"],["и","И"],["о","О"],["п","П"],["ш","Ш"],["ђ","Ђ"],["Enter","Enter"]],[["Caps","Caps"],["а","А"],["с","С"],["д","Д"],["ф","Ф"],["г","Г"],["х","Х"],["ј","Ј"],["к","К"],["л","Л"],["ч","Ч"],["ћ","Ћ"],["ж","Ж"]],[["Shift","Shift"],["<",">"],["ѕ","Ѕ"],["џ","Џ"],["ц","Ц"],["в","В"],["б","Б"],["н","Н"],["м","М"],[",",";","<"],[".",":",">"],["-","_","©"],["Shift","Shift"]],[[" "," "," "," "],["AltGr","AltGr"]]];this.VKI_layout.SerbianCyr.lang=["sr-Cyrl"];this.VKI_layout.SerbianLat=[[["‚","~"],["1","!","~"],["2",'"',"ˇ"],["3","#","^"],["4","$","˘"],["5","%","°"],["6","&","˛"],["7","/","`"],["8","(","˙"],["9",")","´"],["0","=","˝"],["'","?","¨"],["+","*","¸"],["Bksp","Bksp"]],[["Tab","Tab"],["q","Q","\\"],["w","W","|"],["e","E","€"],["r","R"],["t","T"],["z","Z"],["u","U"],["i","I"],["o","O"],["p","P"],["š","Š","÷"],["đ","Đ","×"],["Enter","Enter"]],[["Caps","Caps"],["a","A"],["s","S"],["d","D"],["f","F","["],["g","G","]"],["h","H"],["j","J"],["k","K","ł"],["l","L","Ł"],["č","Č"],["ć","Ć","ß"],["ž","Ž","¤"]],[["Shift","Shift"],["<",">"],["y","Y"],["x","X"],["c","C"],["v","V","@"],["b","B","{"],["n","N","}"],["m","M","§"],[",",";","<"],[".",":",">"],["-","_","©"],["Shift","Shift"]],[[" "," "," "," "],["AltGr","AltGr"]]];this.VKI_layout.SerbianLat.lang=["sr"];this.VKI_layout.Slovak=[[[";","°"],["+","1","~"],["ľ","2","ˇ"],["š","3","^"],["č","4","˘"],["ť","5","°"],["ž","6","˛"],["ý","7","`"],["á","8","˙"],["í","9","´"],["é","0","˝"],["=","%","¨"],["´","ˇ","¸"],["Bksp","Bksp"]],[["Tab","Tab"],["q","Q","\\"],["w","W","|"],["e","E","€"],["r","R"],["t","T"],["z","Z"],["u","U"],["i","I"],["o","O"],["p","P","'"],["ú","/","÷"],["ä","(","×"],["Enter","Enter"]],[["Caps","Caps"],["a","A"],["s","S","đ"],["d","D","Đ"],["f","F","["],["g","G","]"],["h","H"],["j","J"],["k","K","ł"],["l","L","Ł"],["ô",'"',"$"],["§","!","ß"],["ň",")","¤"]],[["Shift","Shift"],["&","*","<"],["y","Y",">"],["x","X","#"],["c","C","&"],["v","V","@"],["b","B","{"],["n","N","}"],["m","M"],[",","?","<"],[".",":",">"],["-","_","*"],["Shift","Shift"]],[[" "," "," "," "],["AltGr","AltGr"]]];this.VKI_layout.Slovak.lang=["sk"];this.VKI_layout.Slovenian=[[["¨","¨","¸"],["1","!","~"],["2",'"',"ˇ"],["3","#","^"],["4","$","˘"],["5","%","°"],["6","&","˛"],["7","/","`"],["8","(","·"],["9",")","´"],["0","=","″"],["'","?","¨"],["+","*","¸"],["Bksp","Bksp"]],[["Tab","Tab"],["q","Q","\\"],["w","W","|"],["e","E","€"],["r","R"],["t","T"],["z","Z"],["u","U"],["i","I"],["o","O"],["p","P"],["š","Š","÷"],["đ","Đ","×"],["Enter","Enter"]],[["Caps","Caps"],["a","A"],["s","S"],["d","D"],["f","F","["],["g","G","]"],["h","H"],["j","J"],["k","K","ł"],["l","L","Ł"],["č","Č"],["ć","Ć","ß"],["ž","Ž","¤"]],[["Shift","Shift"],["<",">"],["y","Y"],["x","X"],["c","C"],["v","V","@"],["b","B","{"],["n","N","}"],["m","M","§"],[",",";"],[".",":"],["-","_"],["Shift","Shift"]],[[" "," "," "," "],["AltGr","AltGr"]]];this.VKI_layout.Slovenian.lang=["sl"];this.VKI_layout["Spanish Es"]=[[["º","ª","\\"],["1","!","|"],["2",'"',"@"],["3","'","#"],["4","$","~"],["5","%","€"],["6","&","¬"],["7","/"],["8","("],["9",")"],["0","="],["'","?"],["¡","¿"],["Bksp","Bksp"]],[["Tab","Tab"],["q","Q"],["w","W"],["e","E"],["r","R"],["t","T"],["y","Y"],["u","U"],["i","I"],["o","O"],["p","P"],["`","^","["],["+","*","]"],["Enter","Enter"]],[["Caps","Caps"],["a","A"],["s","S"],["d","D"],["f","F"],["g","G"],["h","H"],["j","J"],["k","K"],["l","L"],["ñ","Ñ"],["´","¨","{"],["ç","Ç","}"]],[["Shift","Shift"],["<",">"],["z","Z"],["x","X"],["c","C"],["v","V"],["b","B"],["n","N"],["m","M"],[",",";"],[".",":"],["-","_"],["Shift","Shift"]],[[" "," "," "," "],["AltGr","AltGr"]]];this.VKI_layout["Spanish Es"].lang=["es"];this.VKI_layout.Swedish=[[["§","½"],["1","!"],["2",'"',"@"],["3","#","£"],["4","¤","$"],["5","%","€"],["6","&"],["7","/","{"],["8","(","["],["9",")","]"],["0","=","}"],["+","?","\\"],["´","`"],["Bksp","Bksp"]],[["Tab","Tab"],["q","Q"],["w","W"],["e","E","€"],["r","R"],["t","T"],["y","Y"],["u","U"],["i","I"],["o","O"],["p","P"],["å","Å"],["¨","^","~"],["Enter","Enter"]],[["Caps","Caps"],["a","A"],["s","S"],["d","D"],["f","F"],["g","G"],["h","H"],["j","J"],["k","K"],["l","L"],["ö","Ö"],["ä","Ä"],["'","*"]],[["Shift","Shift"],["<",">","|"],["z","Z"],["x","X"],["c","C"],["v","V"],["b","B"],["n","N"],["m","M","μ","Μ"],[",",";"],[".",":"],["-","_"],["Shift","Shift"]],[[" "," "," "," "],["AltGr","AltGr"]]];this.VKI_layout.Swedish.lang=["sv"];this.VKI_layout["Turkish-F"]=[[["+","*","¬"],["1","!","¹","¡"],["2",'"',"²"],["3","^","#","³"],["4","$","¼","¤"],["5","%","½"],["6","&","¾"],["7","'","{"],["8","(","["],["9",")","]"],["0","=","}"],["/","?","\\","¿"],["-","_","|"],["Bksp","Bksp"]],[["Tab","Tab"],["f","F","@"],["g","G"],["ğ","Ğ"],["ı","I","¶","®"],["o","O"],["d","D","¥"],["r","R"],["n","N"],["h","H","ø","Ø"],["p","P","£"],["q","Q","¨"],["w","W","~"],["Enter","Enter"]],[["Caps","Caps"],["u","U","æ","Æ"],["i","İ","ß","§"],["e","E","€"],["a","A"," ","ª"],["ü","Ü"],["t","T"],["k","K"],["m","M"],["l","L"],["y","Y","´"],["ş","Ş"],["x","X","`"]],[["Shift","Shift"],["<",">","|","¦"],["j","J","«","<"],["ö","Ö","»",">"],["v","V","¢","©"],["c","C"],["ç","Ç"],["z","Z"],["s","S","µ","º"],["b","B","×"],[".",":","÷"],[",",";","-"],["Shift","Shift"]],[[" "," "," "," "],["AltGr","AltGr"]]];this.VKI_layout["Turkish-Q"]=[[['"',"é","<"],["1","!",">"],["2","'","£"],["3","^","#"],["4","+","$"],["5","%","½"],["6","&"],["7","/","{"],["8","(","["],["9",")","]"],["0","=","}"],["*","?","\\"],["-","_","|"],["Bksp","Bksp"]],[["Tab","Tab"],["q","Q","@"],["w","W"],["e","E","€"],["r","R"],["t","T"],["y","Y"],["u","U"],["ı","I","i","İ"],["o","O"],["p","P"],["ğ","Ğ","¨"],["ü","Ü","~"],["Enter","Enter"]],[["Caps","Caps"],["a","A","æ","Æ"],["s","S","ß"],["d","D"],["f","F"],["g","G"],["h","H"],["j","J"],["k","K"],["l","L"],["ş","Ş","´"],["i","İ"],[",",";","`"]],[["Shift","Shift"],["<",">","|"],["z","Z"],["x","X"],["c","C"],["v","V"],["b","B"],["n","N"],["m","M"],["ö","Ö"],["ç","Ç"],[".",":"],["Shift","Shift"]],[[" "," "," "," "],["AltGr","AltGr"]]];this.VKI_layout["Turkish-Q"].lang=["tr"];this.VKI_layout.UK=[[["`","¬","¦"],["1","!"],["2",'"'],["3","£"],["4","$","€"],["5","%"],["6","^"],["7","&"],["8","*"],["9","("],["0",")"],["-","_"],["=","+"],["Bksp","Bksp"]],[["Tab","Tab"],["q","Q"],["w","W"],["e","E","é","É"],["r","R"],["t","T"],["y","Y"],["u","U","ú","Ú"],["i","I","í","Í"],["o","O","ó","Ó"],["p","P"],["[","{"],["]","}"],["Enter","Enter"]],[["Caps","Caps"],["a","A","á","Á"],["s","S"],["d","D"],["f","F"],["g","G"],["h","H"],["j","J"],["k","K"],["l","L"],[";",":"],["'","@"],["#","~"]],[["Shift","Shift"],["\\","|"],["z","Z"],["x","X"],["c","C"],["v","V"],["b","B"],["n","N"],["m","M"],[",","<"],[".",">"],["/","?"],["Shift","Shift"]],[[" "," "," "," "],["AltGr","AltGr"]]];this.VKI_layout.UK.lang=["en-gb"];this.VKI_layout.Ukrainian=[[["´","~"],["1","!"],["2",'"'],["3","№"],["4",";"],["5","%"],["6",":"],["7","?"],["8","*"],["9","("],["0",")"],["-","_"],["=","+"],["Bksp","Bksp"]],[["Tab","Tab"],["й","Й"],["ц","Ц"],["у","У"],["к","К"],["е","Е"],["н","Н"],["г","Г"],["ш","Ш"],["щ","Щ"],["з","З"],["х","Х"],["ї","Ї"],["ґ","Ґ"]],[["Caps","Caps"],["ф","Ф"],["і","І"],["в","В"],["а","А"],["п","П"],["р","Р"],["о","О"],["л","Л"],["д","Д"],["ж","Ж"],["є","Є"],["Enter","Enter"]],[["Shift","Shift"],["я","Я"],["ч","Ч"],["с","С"],["м","М"],["и","И"],["т","Т"],["ь","Ь"],["б","Б"],["ю","Ю"],[".",","],["Shift","Shift"]],[[" "," "]]];this.VKI_layout.Ukrainian.lang=["uk"];this.VKI_layout.US=[[["`","~"],["1","!"],["2","@"],["3","#"],["4","$"],["5","%"],["6","^"],["7","&"],["8","*"],["9","("],["0",")"],["-","_"],["=","+"],["Bksp","Bksp"]],[["Tab","Tab"],["q","Q"],["w","W"],["e","E"],["r","R"],["t","T"],["y","Y"],["u","U"],["i","I"],["o","O"],["p","P"],["[","{"],["]","}"],["\\","|"]],[["Caps","Caps"],["a","A"],["s","S"],["d","D"],["f","F"],["g","G"],["h","H"],["j","J"],["k","K"],["l","L"],[";",":"],["'",'"'],["Enter","Enter"]],[["Shift","Shift"],["z","Z"],["x","X"],["c","C"],["v","V"],["b","B"],["n","N"],["m","M"],[",","<"],[".",">"],["/","?"],["Shift","Shift"]],[[" "," "]]];this.VKI_layout.US.lang=["en-us"];this.VKI_layout["US Int'l"]=[[["`","~"],["1","!","¡","¹"],["2","@","²"],["3","#","³"],["4","$","¤","£"],["5","%","€"],["6","^","¼"],["7","&","½"],["8","*","¾"],["9","(","‘"],["0",")","’"],["-","_","¥"],["=","+","×","÷"],["Bksp","Bksp"]],[["Tab","Tab"],["q","Q","ä","Ä"],["w","W","å","Å"],["e","E","é","É"],["r","R","®"],["t","T","þ","Þ"],["y","Y","ü","Ü"],["u","U","ú","Ú"],["i","I","í","Í"],["o","O","ó","Ó"],["p","P","ö","Ö"],["[","{","«"],["]","}","»"],["\\","|","¬","¦"]],[["Caps","Caps"],["a","A","á","Á"],["s","S","ß","§"],["d","D","ð","Ð"],["f","F"],["g","G"],["h","H"],["j","J"],["k","K"],["l","L","ø","Ø"],[";",":","¶","°"],["'",'"',"´","¨"],["Enter","Enter"]],[["Shift","Shift"],["z","Z","æ","Æ"],["x","X"],["c","C","©","¢"],["v","V"],["b","B"],["n","N","ñ","Ñ"],["m","M","µ"],[",","<","ç","Ç"],[".",">"],["/","?","¿"],["Shift","Shift"]],[[" "," "," "," "],["Alt","Alt"]]];this.VKI_layout["US Int'l"].lang=["en"];this.VKI_deadkey={};this.VKI_deadkey['"']=this.VKI_deadkey["¨"]=[["a","ä"],["e","ë"],["i","ï"],["o","ö"],["u","ü"],["y","ÿ"],["ι","ϊ"],["υ","ϋ"],["ū","ǖ"],["ú","ǘ"],["ǔ","ǚ"],["ù","ǜ"],["A","Ä"],["E","Ë"],["I","Ï"],["O","Ö"],["U","Ü"],["Y","Ÿ"],["Ι","Ϊ"],["Υ","Ϋ"],["Ū","Ǖ"],["Ú","Ǘ"],["Ǔ","Ǚ"],["Ù","Ǜ"],["か","が"],["き","ぎ"],["く","ぐ"],["け","げ"],["こ","ご"],["た","だ"],["ち","ぢ"],["つ","づ"],["て","で"],["と","ど"],["さ","ざ"],["し","じ"],["す","ず"],["せ","ぜ"],["そ","ぞ"],["は","ば"],["ひ","び"],["ふ","ぶ"],["へ","べ"],["ほ","ぼ"],["カ","ガ"],["キ","ギ"],["ク","グ"],["ケ","ゲ"],["コ","ゴ"],["タ","ダ"],["チ","ヂ"],["ツ","ヅ"],["テ","デ"],["ト","ド"],["サ","ザ"],["シ","ジ"],["ス","ズ"],["セ","ゼ"],["ソ","ゾ"],["ハ","バ"],["ヒ","ビ"],["フ","ブ"],["ヘ","ベ"],["ホ","ボ"]];this.VKI_deadkey["~"]=[["a","ã"],["l","ł"],["n","ñ"],["o","õ"],["A","Ã"],["L","Ł"],["N","Ñ"],["O","Õ"]];this.VKI_deadkey["^"]=[["a","â"],["e","ê"],["i","î"],["o","ô"],["u","û"],["w","ŵ"],["y","ŷ"],["A","Â"],["E","Ê"],["I","Î"],["O","Ô"],["U","Û"],["W","Ŵ"],["Y","Ŷ"]];this.VKI_deadkey["ˇ"]=[["c","č"],["d","ď"],["e","ě"],["s","š"],["l","ľ"],["n","ň"],["r","ř"],["t","ť"],["u","ǔ"],["z","ž"],["ü","ǚ"],["C","Č"],["D","Ď"],["E","Ě"],["S","Š"],["L","Ľ"],["N","Ň"],["R","Ř"],["T","Ť"],["U","Ǔ"],["Z","Ž"],["Ü","Ǚ"]];this.VKI_deadkey["˘"]=[["a","ă"],["g","ğ"],["A","Ă"],["G","Ğ"]];this.VKI_deadkey["-"]=this.VKI_deadkey["¯"]=[["a","ā"],["e","ē"],["i","ī"],["o","ō"],["u","ū"],["y","ȳ"],["ü","ǖ"],["A","Ā"],["E","Ē"],["I","Ī"],["O","Ō"],["U","Ū"],["Y","Ȳ"],["Ü","Ǖ"]];this.VKI_deadkey["`"]=[["a","à"],["e","è"],["i","ì"],["o","ò"],["u","ù"],["ü","ǜ"],["A","À"],["E","È"],["I","Ì"],["O","Ò"],["U","Ù"],["Ü","Ǜ"]];this.VKI_deadkey["'"]=this.VKI_deadkey["´"]=this.VKI_deadkey["΄"]=[["a","á"],["e","é"],["i","í"],["o","ó"],["u","ú"],["y","ý"],["α","ά"],["ε","έ"],["η","ή"],["ι","ί"],["ο","ό"],["υ","ύ"],["ω","ώ"],["ü","ǘ"],["A","Á"],["E","É"],["I","Í"],["O","Ó"],["U","Ú"],["Y","Ý"],["Α","Ά"],["Ε","Έ"],["Η","Ή"],["Ι","Ί"],["Ο","Ό"],["Υ","Ύ"],["Ω","Ώ"],["Ü","Ǘ"]];this.VKI_deadkey["˝"]=[["o","ő"],["u","ű"],["O","Ő"],["U","Ű"]];this.VKI_deadkey["΅"]=[["ι","ΐ"],["υ","ΰ"]];this.VKI_deadkey["°"]=this.VKI_deadkey["º"]=[["a","å"],["u","ů"],["A","Å"],["U","Ů"]];this.VKI_deadkey["˛"]=[["a","Ć"],["e","ę"],["i","į"],["o","ǫ"],["u","ų"],["y","ŷ"],["A","ą"],["E","Ę"],["I","Į"],["O","Ǫ"],["U","Ų"],["Y","Ŷ"]];this.VKI_deadkey["˙"]=[["c","ċ"],["e","ė"],["g","ġ"],["z","ż"],["C","Ċ"],["E","Ė"],["G","Ġ"],["Z","Ż"]];this.VKI_deadkey["¸"]=this.VKI_deadkey["‚"]=[["c","ç"],["s","ş"],["C","Ç"],["S","Ş"]];this.VKI_deadkey[","]=[["s",this.VKI_isIElt8?"ş":"ș"],["t",this.VKI_isIElt8?"ţ":"ț"],["S",this.VKI_isIElt8?"Ş":"Ș"],["T",this.VKI_isIElt8?"Ţ":"Ț"]];this.VKI_deadkey["。"]=[["は","ぱ"],["ひ","ぴ"],["ふ","ぷ"],["へ","ぺ"],["ほ","ぽ"],["ハ","パ"],["ヒ","ピ"],["フ","プ"],["ヘ","ペ"],["ホ","ポ"]];this.VKI_symbol={"‌":"ZW\r\nNJ","‍":"ZW\r\nJ"};this.VKI_attachKeyboard=VKI_attach=function(e){if(e.getAttribute("VKI_attached"))return false;if(this.VKI_imageURI){var t=document.createElement("img");t.src=this.VKI_imageURI;t.alt=this.VKI_i18n["00"];t.className="keyboardInputInitiator";t.title=this.VKI_i18n["01"];t.elem=e;t.style["display"]="none";t.onclick=function(){p.VKI_show(this.elem,event)};e.onfocus=function(){$(".keyboardInputInitiator").hide();t.style["display"]="inline";if($("#keyboardInputMaster:visible").size()>0&&p.VKI_target!=this)p.VKI_show(this);e.focus()};$(e).blur(function(e){});e.parentNode.insertBefore(t,e.dir=="rtl"?e:e.nextSibling)}else e.ondblclick=function(){if(p.VKI_target!=this)p.VKI_show(this,event)};e.setAttribute("VKI_attached","true");if(this.VKI_isIE){e.onclick=e.onselect=e.onkeyup=function(e){if((e||event).type!="keyup"||!this.readOnly)this.range=document.selection.createRange()}}};var e=[document.getElementsByTagName("input"),document.getElementsByTagName("textarea")];for(var t=0,i;i=e[t++];)for(var n=0,a;a=i[n++];)if((a.nodeName=="TEXTAREA"||a.type=="text"||a.type=="password")&&a.className.indexOf("keyboardInput")>-1)this.VKI_attachKeyboard(a);this.VKI_keyboard=document.createElement("table");this.VKI_keyboard.id="keyboardInputMaster";this.VKI_keyboard.dir="ltr";this.VKI_keyboard.cellSpacing=this.VKI_keyboard.border="0";var r=document.createElement("thead");var o=document.createElement("tr");var s=document.createElement("th");var l=document.createElement("abbr");l.title=this.VKI_i18n["00"];l.appendChild(document.createTextNode("VKI"));var c=document.createElement("select");c.title=this.VKI_i18n["02"];for(ktype in this.VKI_layout){if(typeof this.VKI_layout[ktype]=="object"){if(!this.VKI_layout[ktype].lang)this.VKI_layout[ktype].lang=[];var u=document.createElement("option");u.value=ktype;u.appendChild(document.createTextNode(ktype));c.appendChild(u)}}if(c.options.length){c.value=this.VKI_kt;c.onchange=function(){p.VKI_kts=p.VKI_kt=this.value;p.VKI_buildKeys();p.VKI_position(true)};s.appendChild(c)}if(this.VKI_sizeAdj){this.VKI_size=Math.min(5,Math.max(1,this.VKI_size));var d=document.createElement("select");d.title=this.VKI_i18n["10"];for(var t=1;t<=5;t++){var u=document.createElement("option");u.value=t;u.appendChild(document.createTextNode(t));d.appendChild(u)}d.value=this.VKI_size;d.change=function(){p.VKI_size=this.value;p.VKI_keyboard.className=p.VKI_keyboard.className.replace(/ ?keyboardInputSize\d ?/,"");if(this.value!=2)p.VKI_keyboard.className+=" keyboardInputSize"+this.value;p.VKI_position(true)};d.onchange=d.change;s.appendChild(d)}var f=document.createElement("label");var h=document.createElement("input");h.type="checkbox";h.title=this.VKI_i18n["03"]+": "+(this.VKI_deadkeysOn?this.VKI_i18n["04"]:this.VKI_i18n["05"]);h.defaultChecked=this.VKI_deadkeysOn;h.onclick=function(){p.VKI_deadkeysOn=this.checked;this.title=p.VKI_i18n["03"]+": "+(this.checked?p.VKI_i18n["04"]:p.VKI_i18n["05"]);p.VKI_modify("");return true};f.appendChild(this.VKI_deadkeysElem=h);h.checked=this.VKI_deadkeysOn;s.appendChild(f);o.appendChild(s);var m=document.createElement("td");var g=document.createElement("span");g.id="keyboardInputClear";g.appendChild(document.createTextNode(this.VKI_i18n["07"]));g.title=this.VKI_i18n["08"];g.onmousedown=function(){this.className="pressed"};g.onmouseup=function(){this.className=""};g.onclick=function(){p.VKI_target.value="";p.VKI_target.focus();return false};m.appendChild(g);var v=document.createElement("strong");v.id="keyboardInputClose";v.appendChild(document.createTextNode("X"));v.title=this.VKI_i18n["06"];v.onmousedown=function(){this.className="pressed"};v.onmouseup=function(){this.className=""};v.onclick=function(){p.VKI_close()};m.appendChild(v);o.appendChild(m);r.appendChild(o);this.VKI_keyboard.appendChild(r);var b=document.createElement("tbody");var o=document.createElement("tr");var m=document.createElement("td");m.colSpan="2";var _=document.createElement("div");_.id="keyboardInputLayout";m.appendChild(_);if(this.VKI_showVersion){var _=document.createElement("div");var y=document.createElement("var");y.title=this.VKI_i18n["09"]+" "+this.VKI_version;y.appendChild(document.createTextNode("v"+this.VKI_version));_.appendChild(y);m.appendChild(_)}o.appendChild(m);b.appendChild(o);this.VKI_keyboard.appendChild(b);if(this.VKI_isIE6){this.VKI_iframe=document.createElement("iframe");this.VKI_iframe.style.position="absolute";this.VKI_iframe.style.border="0px none";this.VKI_iframe.style.filter="mask()";this.VKI_iframe.style.zIndex="999999";this.VKI_iframe.src=this.VKI_imageURI}this.VKI_buildKeys=function(){this.VKI_shift=this.VKI_shiftlock=this.VKI_altgr=this.VKI_altgrlock=this.VKI_dead=false;this.VKI_deadkeysOn=this.VKI_layout[this.VKI_kt].DDK?false:this.VKI_keyboard.getElementsByTagName("label")[0].getElementsByTagName("input")[0].checked;var e=this.VKI_keyboard.tBodies[0].getElementsByTagName("div")[0];while(e.firstChild)e.removeChild(e.firstChild);for(var t=0,i=false,n;n=this.VKI_layout[this.VKI_kt][t++];){var a=document.createElement("table");a.cellSpacing=a.border="0";if(n.length<=this.VKI_keyCenter)a.className="keyboardInputCenter";var r=document.createElement("tbody");var o=document.createElement("tr");for(var s=0,l;l=n[s++];){var c=document.createElement("td");if(this.VKI_symbol[l[0]]){var u=document.createElement("span");u.className=l[0];u.appendChild(document.createTextNode(this.VKI_symbol[l[0]]));c.appendChild(u)}else c.appendChild(document.createTextNode(l[0]||" "));var d=[];if(this.VKI_deadkeysOn)for(key in this.VKI_deadkey)if(key===l[0]){d.push("alive");break}if(n.length>this.VKI_keyCenter&&s==n.length)d.push("last");if(l[0]==" ")d.push("space");c.className=d.join(" ");c.VKI_clickless=0;if(!c.click){c.click=function(){var e=this.ownerDocument.createEvent("MouseEvents");e.initMouseEvent("click",true,true,this.ownerDocument.defaultView,1,0,0,0,0,false,false,false,false,0,null);this.dispatchEvent(e)}}c.onmouseover=function(){if(p.VKI_clickless){var e=this;clearTimeout(this.VKI_clickless);this.VKI_clickless=setTimeout(function(){e.click()},p.VKI_clickless)}if((this.firstChild.nodeValue||this.firstChild.className)!=" ")this.className+=" hover"};c.onmouseout=function(){if(p.VKI_clickless)clearTimeout(this.VKI_clickless);this.className=this.className.replace(/ ?(hover|pressed)/g,"")};c.onmousedown=function(){if(p.VKI_clickless)clearTimeout(this.VKI_clickless);if((this.firstChild.nodeValue||this.firstChild.className)!=" ")this.className+=" pressed"};c.onmouseup=function(){if(p.VKI_clickless)clearTimeout(this.VKI_clickless);this.className=this.className.replace(/ ?pressed/g,"")};c.ondblclick=function(){return false};switch(l[1]){case"Caps":case"Shift":case"Alt":case"AltGr":case"AltLk":c.onclick=function(e){return function(){p.VKI_modify(e);return false}}(l[1]);break;case"Tab":c.onclick=function(){p.VKI_insert("\t");return false};break;case"Bksp":c.onclick=function(){p.VKI_target.focus();if(p.VKI_target.setSelectionRange&&!p.VKI_target.readOnly){var e=[p.VKI_target.selectionStart,p.VKI_target.selectionEnd];if(e[0]<e[1])e[0]++;p.VKI_target.value=p.VKI_target.value.substr(0,e[0]-1)+p.VKI_target.value.substr(e[1]);p.VKI_target.setSelectionRange(e[0]-1,e[0]-1)}else if(p.VKI_target.createTextRange&&!p.VKI_target.readOnly){try{p.VKI_target.range.select()}catch(e){p.VKI_target.range=document.selection.createRange()}if(!p.VKI_target.range.text.length)p.VKI_target.range.moveStart("character",-1);p.VKI_target.range.text=""}else p.VKI_target.value=p.VKI_target.value.substr(0,p.VKI_target.value.length-1);if(p.VKI_shift)p.VKI_modify("Shift");if(p.VKI_altgr)p.VKI_modify("AltGr");p.VKI_target.focus();return true};break;case"Enter":c.onclick=function(){if(p.VKI_target.nodeName!="TEXTAREA"){p.VKI_close();this.className=this.className.replace(/ ?(hover|pressed)/g,"")}else p.VKI_insert("\n");return true};break;default:c.onclick=function(){var e=this.firstChild.nodeValue||this.firstChild.className;if(p.VKI_deadkeysOn&&p.VKI_dead){if(p.VKI_dead!=e){for(key in p.VKI_deadkey){if(key==p.VKI_dead){if(e!=" "){for(var t=0,i=false,n;n=p.VKI_deadkey[key][t++];){if(n[0]==e){p.VKI_insert(n[1]);i=true;break}}}else{p.VKI_insert(p.VKI_dead);i=true}break}}}else i=true}p.VKI_dead=false;if(!i&&e!=" "){if(p.VKI_deadkeysOn){for(key in p.VKI_deadkey){if(key==e){p.VKI_dead=key;this.className+=" dead";if(p.VKI_shift)p.VKI_modify("Shift");if(p.VKI_altgr)p.VKI_modify("AltGr");break}}if(!p.VKI_dead)p.VKI_insert(e)}else p.VKI_insert(e)}p.VKI_modify("");if(p.VKI_isOpera){this.style.width="50px";var a=this.offsetWidth;this.style.width=""}return false}}o.appendChild(c);r.appendChild(o);a.appendChild(r);for(var f=0;f<4;f++)if(this.VKI_deadkey[l[f]=l[f]||" "])i=true}e.appendChild(a)}this.VKI_deadkeysElem.style.display=!this.VKI_layout[this.VKI_kt].DDK&&i?"inline":"none"};this.VKI_buildKeys();this.VKI_keyboard.onselectstart=function(){return false};this.VKI_keyboard.unselectable="on";if(this.VKI_isOpera)this.VKI_keyboard.onmousedown=function(){return false};this.VKI_modify=function(e){switch(e){case"Alt":case"AltGr":this.VKI_altgr=!this.VKI_altgr;break;case"AltLk":this.VKI_altgr=0;this.VKI_altgrlock=!this.VKI_altgrlock;break;case"Caps":this.VKI_shift=0;this.VKI_shiftlock=!this.VKI_shiftlock;break;case"Shift":this.VKI_shift=!this.VKI_shift;break}var t=0;if(!this.VKI_shift!=!this.VKI_shiftlock)t+=1;if(!this.VKI_altgr!=!this.VKI_altgrlock)t+=2;var i=this.VKI_keyboard.getElementsByTagName("table");for(var n=0;n<i.length;n++){var a=i[n].getElementsByTagName("td");for(var r=0;r<a.length;r++){var o=[],s=this.VKI_layout[this.VKI_kt][n][r];if(a[r].className.indexOf("hover")>-1)o.push("hover");switch(s[1]){case"Alt":case"AltGr":if(this.VKI_altgr)o.push("dead");break;case"AltLk":if(this.VKI_altgrlock)o.push("dead");break;case"Shift":if(this.VKI_shift)o.push("dead");break;case"Caps":if(this.VKI_shiftlock)o.push("dead");break;case"Tab":case"Enter":case"Bksp":break;default:if(e){a[r].removeChild(a[r].firstChild);if(this.VKI_symbol[s[t]]){var l=document.createElement("span");l.className=s[t];l.appendChild(document.createTextNode(this.VKI_symbol[s[t]]));a[r].appendChild(l)}else a[r].appendChild(document.createTextNode(s[t]))}if(this.VKI_deadkeysOn){var c=a[r].firstChild.nodeValue||a[r].firstChild.className;if(this.VKI_dead){if(c==this.VKI_dead)o.push("dead");for(var u=0;u<this.VKI_deadkey[this.VKI_dead].length;u++){if(c==this.VKI_deadkey[this.VKI_dead][u][0]){o.push("target");break}}}for(key in this.VKI_deadkey)if(key===c){o.push("alive");break}}}if(r==a.length-1&&a.length>this.VKI_keyCenter)o.push("last");if(s[0]==" ")o.push("space");a[r].className=o.join(" ")}}};this.VKI_insert=function(e){this.VKI_target.focus();if(this.VKI_target.maxLength)this.VKI_target.maxlength=this.VKI_target.maxLength;if(typeof this.VKI_target.maxlength=="undefined"||this.VKI_target.maxlength<0||this.VKI_target.value.length<this.VKI_target.maxlength){this.VKI_target.value+=e;if(this.VKI_shift)this.VKI_modify("Shift");if(this.VKI_altgr)this.VKI_modify("AltGr");this.VKI_target.focus()}else if(this.VKI_target.createTextRange&&this.VKI_target.range)this.VKI_target.range.select()};this.VKI_show=function(e,t){if(blink.activity.currentStyle&&blink.activity.currentStyle.showKeyboard&&blink.activity.currentStyle.showKeyboard()&&this.elementCanShow(e)){if(!this.VKI_target){this.VKI_target=e;if(this.VKI_langAdapt&&this.VKI_target.lang){var i=false,n=[];for(ktype in this.VKI_layout){if(typeof this.VKI_layout[ktype]=="object"){for(var a=0;a<this.VKI_layout[ktype].lang.length;a++){if(this.VKI_layout[ktype].lang[a].toLowerCase()==this.VKI_target.lang.toLowerCase()){i=c.value=this.VKI_kt=ktype;break}else if(this.VKI_layout[ktype].lang[a].toLowerCase().indexOf(this.VKI_target.lang.toLowerCase())==0)n.push([this.VKI_layout[ktype].lang[a],ktype])}}if(i)break}if(n.length){n.sort(function(e,t){return e[0].length-t[0].length});i=c.value=this.VKI_kt=n[0][1]}if(i)this.VKI_buildKeys()}if(this.VKI_isIE){if(!this.VKI_target.range){this.VKI_target.range=this.VKI_target.createTextRange();this.VKI_target.range.moveStart("character",this.VKI_target.value.length)}this.VKI_target.range.select()}try{this.VKI_keyboard.parentNode.removeChild(this.VKI_keyboard)}catch(e){}if(this.VKI_clearPasswords&&this.VKI_target.type=="password")this.VKI_target.value="";var e=this.VKI_target;this.VKI_target.keyboardPosition="absolute";do{if(VKI_getStyle(e,"position")=="fixed"){this.VKI_target.keyboardPosition="fixed";break}}while(e=e.offsetParent);if(this.VKI_isIE6)document.body.appendChild(this.VKI_iframe);document.body.appendChild(this.VKI_keyboard);this.VKI_keyboard.style.position=this.VKI_target.keyboardPosition;if(this.VKI_isOpera){if(this.VKI_sizeAdj)d.value=this.VKI_size;c.value=this.VKI_kt}$("#keyboardInputMaster").blinkDraggable();this.VKI_position(true);if(p.VKI_isMoz||p.VKI_isWebKit)this.VKI_position(true);$("#keyboardInputMaster").css("top",""+(t.clientY+10)+"px").css("left",""+(t.clientX+10)+"px");this.VKI_target.focus()}else this.VKI_close()}};this.elementCanShow=function(e){if(e.isExample||$(e).hasClass("respuesta_ok")||$(e).hasClass("solucion")){return false}return true};this.VKI_position=function(e){if(p.VKI_target){var t=VKI_findPos(p.VKI_keyboard),i=VKI_innerDimensions(),n=VKI_scrollDist();var a=false,r=p.VKI_target.offsetHeight+3;if(e!==true){if(t[1]+p.VKI_keyboard.offsetHeight-n[1]-i[1]>0){a=true;r=-p.VKI_keyboard.offsetHeight-3}else if(t[1]-n[1]<0)a=true}if(a||e===true){var o=VKI_findPos(p.VKI_target);p.VKI_keyboard.style.top=o[1]-(p.VKI_target.keyboardPosition=="fixed"&&!p.VKI_isIE&&!p.VKI_isMoz?n[1]:0)+r+"px";p.VKI_keyboard.style.left=Math.max(10,Math.min(i[0]-p.VKI_keyboard.offsetWidth-25,o[0]))+"px";if(p.VKI_isIE6){p.VKI_iframe.style.width=p.VKI_keyboard.offsetWidth+"px";p.VKI_iframe.style.height=p.VKI_keyboard.offsetHeight+"px";p.VKI_iframe.style.top=p.VKI_keyboard.style.top;p.VKI_iframe.style.left=p.VKI_keyboard.style.left}}if(e===true)p.VKI_position()}};if(window.addEventListener){window.addEventListener("resize",this.VKI_position,false);window.addEventListener("scroll",this.VKI_position,false)}else if(window.attachEvent){window.attachEvent("onresize",this.VKI_position);window.attachEvent("onscroll",this.VKI_position)}if(this.VKI_sizeAdj)d.change();this.VKI_close=VKI_close=function(){if(this.VKI_target){try{this.VKI_keyboard.parentNode.removeChild(this.VKI_keyboard);if(this.VKI_isIE6)this.VKI_iframe.parentNode.removeChild(this.VKI_iframe)}catch(e){}if(this.VKI_kt!=this.VKI_kts){c.value=this.VKI_kt=this.VKI_kts;this.VKI_buildKeys()}this.VKI_target.focus();if(this.VKI_isIE){setTimeout(function(){p.VKI_target=false},0)}else this.VKI_target=false}}}function VKI_findPos(e){var t=curtop=0;do{t+=e.offsetLeft;curtop+=e.offsetTop}while(e=e.offsetParent);return[t,curtop]}function VKI_innerDimensions(){if(self.innerHeight){return[self.innerWidth,self.innerHeight]}else if(document.documentElement&&document.documentElement.clientHeight){return[document.documentElement.clientWidth,document.documentElement.clientHeight]}else if(document.body)return[document.body.clientWidth,document.body.clientHeight];return[0,0]}function VKI_scrollDist(){var e=document.getElementsByTagName("html")[0];if(e.scrollTop&&document.documentElement.scrollTop){return[e.scrollLeft,e.scrollTop]}else if(e.scrollTop||document.documentElement.scrollTop){return[e.scrollLeft+document.documentElement.scrollLeft,e.scrollTop+document.documentElement.scrollTop]}else if(document.body.scrollTop)return[document.body.scrollLeft,document.body.scrollTop];return[0,0]}function VKI_getStyle(e,t){if(e.currentStyle){var i=e.currentStyle[t]}else if(window.getComputedStyle)var i=window.getComputedStyle(e,null)[t];return i}if(window.addEventListener){window.addEventListener("load",VKI_buildKeyboardInputs,false)}else if(window.attachEvent)window.attachEvent("onload",VKI_buildKeyboardInputs);var editorNameMultimedia="";var prefijoSeleccionMultimedia="";var idCursoSeleccionMultimedia="";var idAppSeleccionarMultimedia="";var nameAppSeleccionarMultimedia="";var dbook={onSelectActivity:function(n){closeMsgBox();var e=this;getAJAX("/LMS/ajax.php?op=activity.getActivityData&idclase="+n,function(e){if(e.startsWith("OK")){var t=JSON.parse(e.substr(2));var i=finCreaVinculoActividadDigitalBook(n,t.nombre,t.img,t.open_in,t.url_real)}else{standardAJAX(e)}})}};function finSeleccionarMultimediaPantallaCompleta(e,t,i){return finSeleccionarMultimedia(e,t,"imagen_pantalla_completa")}function finSeleccionarImagenClase(e,t,i){return finSeleccionarMultimedia(e,t,"imagen_clase")}function finSeleccionarImagenTema(e,t,i){return finSeleccionarMultimedia(e,t,"imagen_tema")}function finSeleccionarVideoClase(e,t,i){return finSeleccionarMultimedia(e,t,"video_clase")}function finSeleccionarImagenPortadaVideo(e,t,i){return finSeleccionarMultimedia(e,t,"imagen_portada_video")}function finSeleccionarImagenPropiedadesSlide(e,t,i){return finSeleccionarMultimedia(e,t,"imagen_fondo_slide")}function finSeleccionarImagenClaseRepos(e,t,i){return finSeleccionarMultimedia(e,t,"imagen_clase_repositorio")}function finSeleccionarVideoClaseRepos(e,t,i){return finSeleccionarMultimedia(e,t,"video_clase_repositorio")}function finSeleccionarMultimediaDigitalBookApp(e,t,i,n){return finSeleccionarMultimediaDigitalBook(e,t,"listaapps")}function finSeleccionarMultimediaDigitalBookAmpliaciones(e,t,i,n){return finSeleccionarMultimediaDigitalBook(e,t,i,n,"listaampliaciones")}function finSeleccionarImagenIndex(e,t,i){return finSeleccionarMultimedia(e,t,"imagen_index")}function preprocess_server_data_swf_upload(e){var t="ERROR";var i="OK";if(e!=undefined){e=trim(e);if(e.startsWith(i)){e=e.substring(i.length)}else if(!e.startsWith(t)){getAJAX("/LMS/ajax.php?op=log.escribirtraza&nivel=BlinkFW_LogFile::LEVEL_ERROR&texto="+encodeURIComponent("ErrorSWFupload: "+e));e="ERROR"+textweb("upload_error_12")}}return e}var err_flash_shown=false;function createSWFUpload(e,t){if(!err_flash_shown){var i=swfobject.getFlashPlayerVersion();if(!i||!i.major||i.major<9){err_flash_shown=true;_showAlert(textweb("error_flash_required"))}}if(t==null){t=""}var n=textweb("upload_1")==undefined?"Upload":textweb("upload_1");var a="12px";if(n.length>6)a="11px";if(n.length>8)a="9px";if(n.length>10)a="8px";var r={flash_url:"../libs/swfupload/swfupload.swf",upload_url:"../coursePlayer/upload_swf.php",post_params:{},file_size_limit:"10 MB",file_types:"*.*",file_types_description:"All Files",file_upload_limit:1,file_queue_limit:0,custom_settings:{progressTarget:"fsUploadProgress"+t},debug:false,button_image_url:"../images/XPButtonUploadText_61x22_blank.png",button_placeholder_id:"spanButtonPlaceholder"+t,button_width:62,button_height:22,button_text:'<span class="estiloBoton">'+n+"</span>",button_text_style:".estiloBoton { font-size:"+a+"; font-family:Verdana,Arial; text-align:center; }",button_text_left_padding:0,button_text_top_padding:2,file_queued_handler:fileQueued,file_queue_error_handler:fileQueueError,file_dialog_complete_handler:fileDialogComplete,upload_start_handler:uploadStart,upload_progress_handler:uploadProgress,upload_error_handler:uploadError,upload_success_handler:uploadSuccess,upload_complete_handler:uploadComplete,queue_complete_handler:queueComplete,button_window_mode:SWFUpload.WINDOW_MODE.TRANSPARENT};for(var o in e){r[o]=e[o]}swfobj=new SWFUpload(r);return swfobj}function createUploadFile(a,r){var e=null;if(typeof getCurrentMediaType==="function"){e=getCurrentMediaType()}var o=$("#progress-"+a).parents(".progress-container"),s=$("#"+a).parent(".fileinput-button"),n=$("."+a).find(".fs-upload-progress"),t=prefijoURL+"/LMS/ajax.php?op=uploadFile.upload"+(e?"&mediatype="+e:""),i=changeToBytes(r.file_size_limit),l=r.file_types.match(/[0-9a-z]+/g),c="(.|/)(";_.each(l,function(e,t){c+=t>0?"|":"";c+=e});c+=")$";var u=$("#"+a).parents(".tab-pane").length>0?$("#"+a).parents(".tab-pane"):$(document);var d={url:t,dataType:"json",maxFileSize:i,acceptFileTypes:new RegExp(c,"i"),formData:r.post_params,dropZone:u,done:function(e,t){var i=t&&t.result;if(!i){return d.fail(false,{errorThrown:"Error"})}$.each(i.files,function(e,t){$files=$("#files").empty();$("<p/>").text(t.name).appendTo("#files")});if(typeof r.isDigitalBookType!=="undefined"&&typeof i.files[0].size!=="undefined"&&r.isDigitalBookType&&i.files[0].size>MFSIDZE){var n=MFSIDZE/1024/1024;_showAlert(textweb("upload_error_15",[n]))}r.upload_success_handler(i.files[0],i.files[0].ruta,a);o.addClass("hidden");s.removeClass("disabled")},fail:function(e,t){var i="";if(t.jqXHR&&t.jqXHR.responseText){i=t.jqXHR.responseText;standardAJAX(i)}else{i=t.errorThrown;n.text(i)}blink.log.warning(i);o.addClass("hidden");s.removeClass("disabled")},progressall:function(e,t){var i=parseInt(t.loaded/t.total*100,10);o.find(".progress-bar").css("width",i+"%")},processfail:function(e,t){blink.log.warning("Error: "+t.files[t.index].error);o.addClass("hidden");s.removeClass("disabled");$.each(t.files,function(e,t){$("<p/>").text(t.error).appendTo(n)})},process:function(e,t){blink.log.info("Processing "+t.files[t.index].name);n.empty();o.removeClass("hidden");s.addClass("disabled")}};$("#"+a).fileupload(d).prop("disabled",!$.support.fileInput).parent().addClass($.support.fileInput?undefined:"disabled")}function seleccionarMultimedia(e,t,i,n,a,r,o,s,l,c){if(!a)a="";if(!o)o="";prefijoSeleccionMultimedia=t;idCursoSeleccionMultimedia=e;idAppSeleccionarMultimedia=s;nameAppSeleccionarMultimedia=o;opajax=blink.theme.isAdaptative()?"SelectMultimedia2.showFilePicker":"selectmultimedia";showMsgBox("","/LMS/msgbox.php?op="+opajax+"&idcurso="+e+(a?"&mediatype="+a:"")+(idclase?"&idclase="+idclase:"")+(o?"&activitytype="+o:"")+(s?"&activityID="+s:"")+(prefijoSeleccionMultimedia?"&prefijoSeleccionMultimedia="+prefijoSeleccionMultimedia:"")+(l?"&maxfilesize="+l:"")+(i?"&callback="+i:"")+(n?"&callbackBorrar="+n:"")+(r?"&ref="+encodeURIComponent(r):"")+(c?"&recurso="+c:""),771);return false}function seleccionarRecurso(e,t,i,n,a,r,o,s,l,c){if(!a)a="";if(!o)o="";prefijoSeleccionMultimedia=t;idCursoSeleccionMultimedia=e;idAppSeleccionarMultimedia=s;nameAppSeleccionarMultimedia=o;var u="templates/dialogs/MSGBOX_select_resource.tpl";opajax=blink.theme.isAdaptative()?"neweditclass":"selectmultimedia";showMsgBox("","/LMS/msgbox.php?op="+opajax+"&idcurso="+e+(a?"&mediatype="+a:"")+(idclase?"&idclase="+idclase:"")+(o?"&activitytype="+o:"")+(s?"&activityID="+s:"")+(prefijoSeleccionMultimedia?"&prefijoSeleccionMultimedia="+prefijoSeleccionMultimedia:"")+(l?"&maxfilesize="+l:"")+(i?"&callback="+i:"")+(n?"&callbackBorrar="+n:"")+(r?"&ref="+encodeURIComponent(r):"")+(c?"&recurso="+c:"")+(u?"&tpl="+u:""),771);return false}function getMediaType(e){if(e){if(typeof e=="Blob"){return e.type.split("/")[0]}if(isOnlineServiceUrlVideo(e))return"video";else if(e.indexOf("maps.google.com/maps")!=-1)return"image";var t=getExt(e,true);if(t){t=t.split(/[?&]/)[0];if(FLASH_MULTIMEDIA_EXT.split(",").contains(t))return"flash";else if(VIDEO_MULTIMEDIA_EXT.split(",").contains(t))return"video";else if(DOC_MULTIMEDIA_EXT.split(",").contains(t))return"doc";else if(IMAGE_EXT.split(",").contains(t))return"image";else if(SOUND_EXT.split(",").contains(t))return"sound";else if(["ggb"].contains(t))return"geogebra";else if(["htm","html"].contains(t))return"html"}}return"other"}function hasUploadError(e,t){var i="ERROR";var n=false;if(t!=undefined&&$swfu[t]!=undefined){n=$swfu[t]}var a=false;if(n){if(e.startsWith(i)){a=true;var r=n.getStats();r.successful_uploads--;n.setStats(r);$("#fsUploadProgress").html('<span style="color:red;">'+e.substring(i.length)+"</span>")}}return a}function getUploadInfo(e,t){var i="5";var n="../images/icons/doc.png";var a="archivo";var r=getMediaType(e);if(t=="listaapps"){a="aplicacion";i="9";n=""}else if(t=="listaampliaciones"){a="ampliacion";i="10"}else{var o=e.substring(e.lastIndexOf(".")+1).toLowerCase();if(o=="zip"){r="zip"}if(r=="image"){i="8"}else if(r=="video"){i="2";n="../images/icons/video.png"}else if(r=="sound"){i="3";n="../images/icons/sound.png"}else if(r=="zip"){i="4";n="../images/icons/zip.png"}else if(r=="flash"){i="1";n="../images/icons/flash.png"}}return{tipoactividad:i,strThumb:n,tipoFichero:a,mediatype:r}}function finSeleccionarMultimediaDigitalBook(e,t,i,n,o){var s=t||e||"",l=_libroDigital.nuevoID(),c=true,a=blink.getReqParam(location.href,"idclase");var r=getUploadInfo(s,o),u=r.tipoactividad,d=r.strThumb,f=r.tipoFichero,p=e.name||r.tipoFichero,h=r.mediatype;var m=h=="image"?"activity.addfiledigitalbook":"activity.getfiledigitalbookinfo";getAJAX("/LMS/ajax.php?op=activity.addfiledigitalbook&filename="+encodeURIComponent(s)+"&idclase="+a,function(e){if(e.startsWith("OK")){var t="NEWURLS";var i=s;if(e.indexOf(t)!=-1){var n=e.substr(e.indexOf(t)+t.length);var a=n.indexOf("|");s=n.substr(0,a);i=n.substr(a+1)}if(checkUrlExisteJSON(i)){_showAlert(textweb("select_multimedia_30"));c=false;return}if(h=="image"){d=e.indexOf(t)!=-1?e.substring(2,e.indexOf(t)):e.substring(2);var r=d.split(";");d=r[0];$("#img_"+l).attr("src",d)}$("#borrar_"+l).click(function(e){return deleteFileDigitalBook(l,o)});salvaLinkJSON(u,i)}else{if(s.startsWith("http")||s.startsWith("www")||s.startsWith("map:")){if(checkUrlExisteJSON(s)){_showAlert(textweb("select_multimedia_30"));c=false;return}salvaLinkJSON(u,s)}else{c=false}}},false,undefined,undefined,true);if(c){finSeleccionarMultimediaDigitalBook_create(l,s,p,d,u,f,o)}}function finSeleccionarMultimediaDigitalBook_create(t,i,e,n,a,r,o){closeMsgBox();if(o==undefined)nombre_lista="listaarchivos";else nombre_lista=o;$(".infosinelementos_"+nombre_lista).hide();var s="#contador"+nombre_lista;$(s).html($(s).text().replace(/\(.*?\)/,"("+($("#"+nombre_lista+"posttituloa div.un_ejercicioa:visible").length+$("#"+nombre_lista+"_nuevoselementos div.un_ejercicioa:visible").length+1)+")"));var l="";var c="";var u="";if(a!=_libroDigital.type_app){if(i&&i.length){var d=i.substr(i.lastIndexOf("/")+1);u="<b>"+d+"</b>"}}var f=getHtmlActividad_LibroDigital(t,nombre_lista,a,e,c,i,n,u,r,true);$(f).appendTo("div#"+nombre_lista+"_nuevoselementos");$('[id="capa_'+t+'"]').hover(function(){$(this).addClass("librodigital_menu_actividades_on")},function(){$(this).removeClass("librodigital_menu_actividades_on")}).click(function(){_libroDigital.abrirActividadDigitalDesdeMenu($(this).attr("tipoactividad"),$(this).attr("urlactividad"))});$(".capaenlaceborrar").click(function(e){e.preventDefault();e.stopPropagation()});$(".capaenlaceeditar").click(function(e){e.preventDefault();e.stopPropagation()});$("#borrar_"+t).click(function(e){return deleteFileDigitalBook(t,o)});if(editar){$('[id="capa_'+t+'"]').draggable({opacity:.5,helper:"clone",stop:function(e,t){_libroDigital.crearActividadLibroDigital(""+a,i,t,0,e)}})}refrescaTooltip($("#capainfofile_"+t+"[tooltip]"));var p=document.getElementById("listadorecursos");p.scrollTop=p.scrollHeight}function finEditaFileDigitalBook(e,t,i,n,a,r,o){closeMsgBox();var s=a;if(trim(s)=="")s=r;$("#nombre_"+e).html("<b>"+s+"</b>");var l="";if(s!=r){l='<span style="font-size:9px; font-style: italic">'+r+"</span>";if(trim(t)!="")l="<br>"+l}$("#descapa_"+e).html(t+l);var c="<b>"+s+"</b><br>"+t;$("#capainfofile_"+e).attr("tooltip",c);refrescaTooltip($("#capainfofile_"+e+"[tooltip]"));_libroDigital.actualizarFile(e,t,i,n,a,o)}function finEditaActivityDigitalBook(e,t,i,n){closeMsgBox();_libroDigital.actualizarActividad(e,t,i,n)}function finEditaVinculoDigitalBook(e,t,i,n,a,r){closeMsgBox();var o="7";var s=t;var l=getMediaType(t);var c=getHtmlActividadLink_LibroDigital(e,o,r,i,s,true);$("#capa_link_"+e).html(c);$("#capa_link_"+e).hover(function(){$(this).addClass("librodigital_menu_actividades_on")},function(){$(this).removeClass("librodigital_menu_actividades_on")}).click(function(){_libroDigital.abrirActividadDigitalDesdeMenu($(this).attr("tipoactividad"),$(this).attr("urlactividad"))});$("#capa_link_"+e).click(function(e){e.preventDefault();e.stopPropagation()});$(".capaenlaceborrar").click(function(e){e.preventDefault();e.stopPropagation()});$(".capaenlaceeditar").click(function(e){e.preventDefault();e.stopPropagation()});$("#capa_link_"+e).draggable({opacity:.5,helper:"clone",stop:function(e,t){_libroDigital.crearActividadLibroDigital(""+o,s,t,0,e)}});refrescaTooltip($("#capa_link_nombre_"+e+"[tooltip]"));refrescaTooltip($("#capa_link_desc_"+e+"[tooltip]"));_libroDigital.actualizarLink(e,i,t,n,a,r)}function finCreaVinculoActividadDigitalBook(e,t,i){closeMsgBox();var n=_libroDigital.nuevoID();var a="6";var r=e+"-0";var o=t;$("#contadorlistaactividades").html($("#contadorlistaactividades").text().replace(/\(.*?\)/,"("+($("#listaactividadesposttituloa div.un_ejercicioa:visible").length+1)+")"));var s=getHtmlActividadVinculo_LibroDigital(n,"listaactividades",t,"",r,i,t,true);$(s).appendTo("div#listavinculosactividades");$("#capa_"+n).hover(function(){$(this).addClass("librodigital_menu_actividades_on")},function(){$(this).removeClass("librodigital_menu_actividades_on")}).click(function(){_libroDigital.abrirActividadDigitalDesdeMenu($(this).attr("tipoactividad"),$(this).attr("urlactividad"))});$("#capa_"+n).click(function(e){e.preventDefault();e.stopPropagation()});$(".capaenlaceborrar").click(function(e){e.preventDefault();e.stopPropagation()});$(".capaenlaceeditar").remove();$("#capa_"+n).draggable({opacity:.5,helper:"clone",stop:function(e,t){_libroDigital.crearActividadLibroDigital(""+a,r,t,0)}});refrescaTooltip($("#capa_"+n+"[tooltip]"));var l=document.getElementById("listadorecursos");l.scrollTop=l.scrollHeight;_libroDigital.crearLinkLibroDigital(""+a,r,o,"1")}function finCreaVinculoDigitalBook(e,t){closeMsgBox();var i=_libroDigital.nuevoID();var n="7";var a=e;$("#contadorlistaenlaces").html($("#contadorlistaenlaces").text().replace(/\(.*?\)/,"("+($("#listaposttituloalink div.un_ejercicioa:visible").length+1)+")"));var r=getHtmlActividadLink_LibroDigital(i,n,a,t,a,true);$(r).appendTo("div#listaposttituloalink");$("#capa_link_"+i).hover(function(){$(this).addClass("librodigital_menu_actividades_on")},function(){$(this).removeClass("librodigital_menu_actividades_on")}).click(function(){_libroDigital.abrirActividadDigitalDesdeMenu($(this).attr("tipoactividad"),$(this).attr("urlactividad"))});$("#capa_link_"+i).click(function(e){e.preventDefault();e.stopPropagation()});$(".capaenlaceborrar").click(function(e){e.preventDefault();e.stopPropagation()});$(".capaenlaceeditar").click(function(e){e.preventDefault();e.stopPropagation()});$("#capa_link_"+i).draggable({opacity:.5,helper:"clone",stop:function(e,t){_libroDigital.crearActividadLibroDigital(""+n,a,t,0,e)}});refrescaTooltip($("#capa_link_nombre_"+i+"[tooltip]"));refrescaTooltip($("#capa_link_desc_"+i+"[tooltip]"));$(".infosinelementos_listalinks").hide();var o=document.getElementById("listadorecursos");o.scrollTop=o.scrollHeight;_libroDigital.crearLinkLibroDigital(""+n,a,t,"1")}function finSeleccionarMultimedia(multimedia,ruta,uso_especial){var strUrl_estandar=multimedia;if(multimedia){multimedia.name=ruta}conidapp=true;if(multimedia&&multimedia.name){if(idAppSeleccionarMultimedia==""||idAppSeleccionarMultimedia==undefined||nameAppSeleccionarMultimedia==""||nameAppSeleccionarMultimedia==undefined){if(idCursoSeleccionMultimedia==0){conidapp=false;multimedia=MEDIA_URL+"/tmp/"+multimedia.name}else{nameAppSeleccionarMultimedia="course";idAppSeleccionarMultimedia=idCursoSeleccionMultimedia}}if(uso_especial=="imagen_tema"||uso_especial=="imagen_index"){nameAppSeleccionarMultimedia="course";var tmpIDTema=idAppSeleccionarMultimedia;idAppSeleccionarMultimedia=idCursoSeleccionMultimedia}if(conidapp){strUrl_estandar=MEDIA_URL+"/resources/"+multimedia.name;var multimedia_url=MEDIA_URL;if(nameAppSeleccionarMultimedia=="slide")multimedia_url+="/ctx/a/"+window.idclase;multimedia=multimedia_url+"/r/"+nameAppSeleccionarMultimedia.substr(0,1)+"/"+idAppSeleccionarMultimedia+"/"+multimedia.name}}else{if(prefijoSeleccionMultimedia==""&&idCursoSeleccionMultimedia>0){if(nameAppSeleccionarMultimedia==undefined||nameAppSeleccionarMultimedia.length==0){nameAppSeleccionarMultimedia="course";idAppSeleccionarMultimedia=idCursoSeleccionMultimedia}}if(uso_especial=="imagen_tema"||uso_especial=="imagen_index"){nameAppSeleccionarMultimedia="course";var tmpIDTema=idAppSeleccionarMultimedia;idAppSeleccionarMultimedia=idCursoSeleccionMultimedia}else if(uso_especial=="perfil"){nameAppSeleccionarMultimedia="userfile";idAppSeleccionarMultimedia=blink.user.getID()}getAJAX("/LMS/ajax.php?op=files.getfilemultimedia&filename="+encodeURIComponent(multimedia)+"&app="+nameAppSeleccionarMultimedia+"&appid="+idAppSeleccionarMultimedia,function(e){if(e.startsWith("OK")&&e.length>2){var t="NEWURLS";if(e.indexOf(t)!=-1){newurls=e.substr(e.indexOf(t)+t.length);var i=newurls.indexOf("|");multimedia=newurls.substr(0,i);if(nameAppSeleccionarMultimedia=="slide"&&multimedia.startsWith(MEDIA_URL)&&!multimedia.startsWith(BLINKDB_URL))multimedia=multimedia.slice(0,12)+"/ctx/a/"+window.idclase+multimedia.slice(12);strUrl_estandar=newurls.substr(i+1)}}else{}},false,undefined,undefined,true)}closeMsgBox();if(uso_especial=="attachfile"){return multimedia}else if(uso_especial=="imagen_clase"||uso_especial=="imagen_clase_repositorio"){getAJAX("/LMS/ajax.php?op=activity.updateclassimage&idcurso="+idCursoSeleccionMultimedia+"&idclase="+idAppSeleccionarMultimedia+"&img="+encodeURIComponent(strUrl_estandar),function(e){if(e=="OK"||e=="RELOAD"){if(uso_especial=="imagen_clase_repositorio")$("#img_actividad_"+idAppSeleccionarMultimedia).attr("src",multimedia);else window.location.reload(true)}},false)}else if(uso_especial=="video_clase"||uso_especial=="video_clase_repositorio"){getAJAX("/LMS/ajax.php?op=activity.updateclassvideo&idcurso="+idCursoSeleccionMultimedia+"&idclase="+idAppSeleccionarMultimedia+"&video="+encodeURIComponent(strUrl_estandar),function(e){if(e=="OK"||e=="RELOAD"){if(uso_especial=="video_clase_repositorio")$("#img_actividad_"+idAppSeleccionarMultimedia).attr("src",multimedia);else window.location.reload(true)}},false)}else if(uso_especial=="imagen_tema"){getAJAX("/LMS/ajax.php?op=section.updatesectionimage&idcurso="+idCursoSeleccionMultimedia+"&idtema="+tmpIDTema+"&img="+encodeURIComponent(strUrl_estandar),function(e){if(e=="OK"||e=="RELOAD"){window.location.reload(true)}},false)}else if(uso_especial=="imagen_index"){getAJAX("/LMS/ajax.php?op=course.updatecourseimageindex&idcurso="+idCursoSeleccionMultimedia+"&img="+encodeURIComponent(strUrl_estandar),standardAJAXFunc,false)}else if(uso_especial=="imagen_hijo"){cargarImagen("imagenhijo",multimedia,true)}else if(uso_especial=="imagen_portada_video"){var $playerPortada=$(".bck-video-player[data-edit-poster=true]");if($playerPortada.length>0){blink.theme.insertarImagenPortada($playerPortada,multimedia)}else{blink.theme.video.setPoster(prefijoSeleccionMultimedia,multimedia)}}else if(uso_especial=="imagen_fondo_slide"){if(!multimedia){$("#"+idtransp+"pg").css({backgroundImage:"none",backgroundRepeat:"no-repeat"});$("#url-img-back-slide").html($slideBackImageUrl);$("#t"+prefijoSeleccionMultimedia+"_imagen_back_slide").val(multimedia);marcarHaCambiado(getIDSlideFromPrefijo(prefijoSeleccionMultimedia))}else{blink.theme.setSlideBackImg(multimedia)}}else{if(prefijoSeleccionMultimedia==""&&idCursoSeleccionMultimedia>0){cargarImagen("",multimedia,true);getAJAX("/LMS/ajax.php?op=course.updatecourseimage&idcurso="+idCursoSeleccionMultimedia+"&img="+encodeURIComponent(strUrl_estandar),standardAJAXFunc,false)}else if(prefijoSeleccionMultimedia==""&&idCursoSeleccionMultimedia==0){cargarImagen("perfil",multimedia,true)}else{var mediatype=getMediaType(multimedia);$("#"+prefijoSeleccionMultimedia+"_img1v").val(multimedia);var maxHeight=380;try{eval("var maxHeight = "+prefijoSeleccionMultimedia+"_maxHeight;")}catch(e){}if(mediatype=="image"){var centrar=false;if(uso_especial=="imagen_pantalla_completa")centrar=true;writeImgPlayer(prefijoSeleccionMultimedia,multimedia,"",centrar,$("[name="+prefijoSeleccionMultimedia+"_img1v_title]").val(),maxHeight);cargarImagen(prefijoSeleccionMultimedia,multimedia,true);$("#slide_miniatura_"+secuencia[activeSlide]).attr("src",multimedia)}else if(mediatype=="video"||mediatype=="sound"){var isFlash=mediatype==="flash",mediaType=mediatype==="sound"?"audio":"video",media=blink.theme[mediaType],id=prefijoSeleccionMultimedia+"_multimedia-"+Date.now();writeVideoPlayer(prefijoSeleccionMultimedia,multimedia,isFlash,maxHeight,false,false,id)}else if(mediatype=="flash"){writeFlashPlayer(prefijoSeleccionMultimedia,multimedia,maxHeight)}else if(mediatype=="geogebra"){writeGeogebraPlayer(prefijoSeleccionMultimedia,multimedia,maxHeight)}else if(mediatype=="doc"){writeDocPlayer(prefijoSeleccionMultimedia,multimedia,maxHeight,true);$("#slide_miniatura_"+secuencia[activeSlide]).attr("src",$("#"+prefijoSeleccionMultimedia+"_img1").attr("src"))}else{writeOtherPlayer(prefijoSeleccionMultimedia,multimedia,maxHeight)}blink.events.trigger("write-player-"+prefijoSeleccionMultimedia,mediatype,prefijoSeleccionMultimedia);$("#"+prefijoSeleccionMultimedia+"_tipomultimedia").val(mediatype);marcarHaCambiado(getIDSlideFromPrefijo(prefijoSeleccionMultimedia))}$("body").trigger("image:change")}}function finSeleccionarImagenFondo(n,e,t,i){var a=n;if(idAppSeleccionarMultimedia==""||idAppSeleccionarMultimedia==undefined||nameAppSeleccionarMultimedia==""||nameAppSeleccionarMultimedia==undefined){nameAppSeleccionarMultimedia="slide";idAppSeleccionarMultimedia=idtransact}n.name=e;if(n.name){n=MEDIA_URL+"/ctx/a/"+window.idclase+"/r/"+nameAppSeleccionarMultimedia.substr(0,1)+"/"+idAppSeleccionarMultimedia+"/"+n.name}else{getAJAX("/LMS/ajax.php?op=files.getfilemultimedia&filename="+encodeURIComponent(n)+"&app="+nameAppSeleccionarMultimedia+"&appid="+idAppSeleccionarMultimedia,function(e){if(e.startsWith("OK")&&e.length>2){var t="NEWURLS";if(e.indexOf(t)!=-1){newurls=e.substr(e.indexOf(t)+t.length);var i=newurls.indexOf("|");n=newurls.substr(0,i);a=newurls.substr(i+1)}}else{}},false,undefined,undefined,true)}var r=prefijoSeleccionMultimedia;$("[name="+r+"_img_bg]").val(n);setBackgroundImage(n,r);marcarHaCambiado(getIDSlideFromPrefijo(prefijoSeleccionMultimedia));closeMsgBox()}function finUploadImagenDBBlink(e,t,i,n){getAJAX("/coursePlayer/getfiles.php?type=uploadblinkdbimage&tags="+encodeURIComponent(t.join("|"))+"&img="+escape(e)+"&urlmedia="+i+"&app_id="+n,null,false,"preview")}function getImageMarkUp(e){return"<img src='"+e+"'>"}function finSeleccionarImagenGaleria(n,e,t,i){var a=n;if(idAppSeleccionarMultimedia==""||idAppSeleccionarMultimedia==undefined||nameAppSeleccionarMultimedia==""||nameAppSeleccionarMultimedia==undefined){nameAppSeleccionarMultimedia="slide";idAppSeleccionarMultimedia=idtransact}if(e){n=MEDIA_URL+"/r/"+nameAppSeleccionarMultimedia.substr(0,1)+"/"+idAppSeleccionarMultimedia+"/"+e}else{var r="";if(nameAppSeleccionarMultimedia=="message_body"){nameAppSeleccionarMultimedia="message";idAppSeleccionarMultimedia=999999999;r="tmp_messagebody"}var o="/LMS/ajax.php?op=files.getfilemultimedia&filename="+encodeURIComponent(n)+"&app="+nameAppSeleccionarMultimedia+"&appid="+idAppSeleccionarMultimedia;if(r.length>0)o+="&use_type="+r;getAJAX(o,function(e){if(e.startsWith("OK")&&e.length>2){var t="NEWURLS";if(e.indexOf(t)!=-1){newurls=e.substr(e.indexOf(t)+t.length);var i=newurls.indexOf("|");n=newurls.substr(0,i);a=newurls.substr(i+1)}}else{}},false,undefined,undefined,true)}var s=n.substring(n.lastIndexOf("/")+1);var l=CKEDITOR.instances[editorNameMultimedia];var c=getImageGalleryMarkUp(n);var u=l.getSelection();var d=u.getRanges();var f=u.getSelectedElement();var p=f.find(".bck-gallery-images").getItem(0);var h=l.createRange();h.selectNodeContents(p);h.moveToPosition(p,CKEDITOR.POSITION_BEFORE_END);if(CKEDITOR.env.ie){var m=l.getData();l.setData(m+" "+c)}else{l.insertHtml(c,"html",h)}marcarHaCambiado(getIDSlideFromPrefijo(prefijoSeleccionMultimedia));closeMsgBox()}function getImageGalleryMarkUp(e){var t=""+'<figure class="image">'+'<img class="bck-image" src="'+e+'">'+"<figcaption>"+"<div>Edit me...</div>"+"</figcaption>"+"</figure>&nbsp";return t}function finSeleccionarSonidoFondo(n,e,t,i){var a=n;if(idAppSeleccionarMultimedia==""||idAppSeleccionarMultimedia==undefined||nameAppSeleccionarMultimedia==""||nameAppSeleccionarMultimedia==undefined){nameAppSeleccionarMultimedia="slide";idAppSeleccionarMultimedia=idtransact}n.name=e;if(n.name){n=MEDIA_URL+"/r/"+nameAppSeleccionarMultimedia.substr(0,1)+"/"+idAppSeleccionarMultimedia+"/"+n.name}else{getAJAX("/LMS/ajax.php?op=files.getfilemultimedia&filename="+encodeURIComponent(n)+"&app="+nameAppSeleccionarMultimedia+"&appid="+idAppSeleccionarMultimedia,function(e){if(e.startsWith("OK")&&e.length>2){var t="NEWURLS";if(e.indexOf(t)!=-1){newurls=e.substr(e.indexOf(t)+t.length);var i=newurls.indexOf("|");n=newurls.substr(0,i);a=newurls.substr(i+1)}}else{}},false,undefined,undefined,true)}document.f.elements[prefijoSeleccionMultimedia+"_snd1v"].value=n;updateLabelFile(n,prefijoSeleccionMultimedia+"_snd1v_info");marcarHaCambiado(getIDSlideFromPrefijo(prefijoSeleccionMultimedia));closeMsgBox()}function finSeleccionarImagenEditor(e,t){blink.theme.finSeleccionarImagenEditor(e,t)}function insertarArchivoMultimediaSlides(e,t,i){blink.theme.insertarArchivoMultimediaSlides(e,t,i)}function finSeleccionarSonido(e,t){blink.theme.finSeleccionarSonido(e,t)}function finSeleccionarVideo(e,t){blink.theme.finSeleccionarVideo(e,t)}function finSeleccionarVideo2(e,t){blink.theme.finSeleccionarVideo2(e,t)}function finSeleccionarArchivo(e,t){blink.theme.finSeleccionarArchivo(e,t)}function finSeleccionarSubtitulo(a,e,t,i){var r=a,n={isSetIDApp:idAppSeleccionarMultimedia==""||idAppSeleccionarMultimedia==undefined,isSetNameApp:nameAppSeleccionarMultimedia==""||nameAppSeleccionarMultimedia==undefined};if(n.isSetIDApp||n.isSetNameApp){nameAppSeleccionarMultimedia="slide";idAppSeleccionarMultimedia=idtransact}if(e){a=MEDIA_URL+"/r/"+nameAppSeleccionarMultimedia.substr(0,1)+"/"+idAppSeleccionarMultimedia+"/"+e}else{getAJAX("/LMS/ajax.php?op=files.getfilemultimedia&filename="+encodeURIComponent(a)+"&app="+nameAppSeleccionarMultimedia+"&appid="+idAppSeleccionarMultimedia,function(e){if(e.startsWith("OK")&&e.length>2){var t="NEWURLS";if(e.indexOf(t)!=-1){var i=e.substr(e.indexOf(t)+t.length);var n=i.indexOf("|");a=i.substr(0,n);r=i.substr(n+1)}}else{}},false,undefined,undefined,true)}var o=a.substring(a.lastIndexOf("/")+1);var s=CKEDITOR.instances[editorNameMultimedia];var l=o.replace(/\W+/g," ").replace(/_*[0-9]*( srt| vtt)/g,"");var c=s.getSelection();var u=c.getRanges();var d=c.getSelectedElement();var f=d.find(".bck-subtitles").getItem(0);var p=s.createRange();p.selectNodeContents(f);p.moveToPosition(f,CKEDITOR.POSITION_BEFORE_END);var h=getSrtMarkUp(a,l,f);if(blink.isIE9||blink.isIE8orlower){var m=s.getData();s.setData(m+" "+h)}else{s.insertHtml(h,"html",p)}marcarHaCambiado(getIDSlideFromPrefijo(prefijoSeleccionMultimedia));closeMsgBox()}getSrtMarkUp=function(e,t,i){var n=i.find(".bck-video-srt").count();return""+'<div id="srt_'+n+'" href="'+e+'" class="bck-video-srt" '+'data-srt-file="'+e+'" '+'data-srt-label="'+t+'" '+'data-srt-kind="captions" '+'data-srt-default="'+!n+'" '+">"+'<img src="../themes/responsive/images/contenido/recurso-icon-archivo-add.png"/>'+'<div class="bck-video-srt-label">&nbsp'+t+"</div>&nbsp"+"</div>"};function uploadFile(e,t,i,n,a,r){var o=new FormData;if(!(i instanceof Blob)){i=new Blob([i],{type:"text/plain"})}o.append("Filedata",i,t);o.append("type","multimedia");o.append("app",e||"multimedia");if(r){_.each(r,function(e,t){o.append(t,e)})}var s=a||"/coursePlayer/upload_swf.php";blink.ajax(s,n,{data:o,processData:false,contentType:false},{})}function finSeleccionMultimediaLibro(n,e,t,i){var a=null;if(typeof getCurrentMediaType==="function"){a=getCurrentMediaType()}if(typeof i=="undefined")i=0;var r=n;if(n){n.name=e}conidapp=true;nameAppSeleccionarMultimedia="course";idTema=idAppSeleccionarMultimedia;idAppSeleccionarMultimedia=idCursoSeleccionMultimedia;if(n&&n.name){if(idAppSeleccionarMultimedia==""||idAppSeleccionarMultimedia==undefined||nameAppSeleccionarMultimedia==""||nameAppSeleccionarMultimedia==undefined){if(idCursoSeleccionMultimedia==0){conidapp=false;n=MEDIA_URL+"/tmp/"+n.name}else{nameAppSeleccionarMultimedia="course";idAppSeleccionarMultimedia=idCursoSeleccionMultimedia}}if(conidapp){r=MEDIA_URL+"/resources/"+n.name;var o=MEDIA_URL;if(nameAppSeleccionarMultimedia=="slide")o+="/ctx/a/"+window.idclase;n=o+"/r/"+nameAppSeleccionarMultimedia.substr(0,1)+"/"+idAppSeleccionarMultimedia+"/"+n.name}}else{getAJAX("/LMS/ajax.php?op=files.getfilemultimedia&filename="+encodeURIComponent(n)+"&app="+nameAppSeleccionarMultimedia+"&appid="+idAppSeleccionarMultimedia+(a?"&mediatype="+a:""),function(e){if(e.startsWith("OK")&&e.length>2){var t="NEWURLS";if(e.indexOf(t)!=-1){newurls=e.substr(e.indexOf(t)+t.length);var i=newurls.indexOf("|");n=newurls.substr(0,i);if(nameAppSeleccionarMultimedia=="slide"&&n.startsWith(MEDIA_URL)&&!n.startsWith(BLINKDB_URL))n=n.slice(0,12)+"/ctx/a/"+window.idclase+n.slice(12);r=newurls.substr(i+1)}}else{}},false,undefined,undefined,true)}if(t!="activityResourceUpload"){closeMsgBox()}$("#archivoimportado").val(n.replace(/^.*[\\\/]/,""));actualizar=true;var s="&hidden=1&tipoclase="+(a=="libro"?8:6)+"&idcurso="+idCursoSeleccionMultimedia+"&guardar=1&arim=1&recurso="+i;getAJAX("/LMS/ajax.php?op=activity.executeneweditclassprev&justrefresh=false&idtema="+idTema+s,function(e){if(e=="OKesdistinto"){if(!confirm("\x3c!--{textweb name='new_edit_class_79'}--\x3e")){actualizar=false}}},$("#dlgForm"),undefined,undefined,true);if(actualizar){getAJAX("/LMS/ajax.php?op=activity.executeneweditclass&justrefresh=false&idtema="+idTema+s,standardAJAXPopup,$("#dlgForm"))}}function finSeleccionMultimediaLibroRecurso(e,t,i){finSeleccionMultimediaLibro(e,t,i,1)}var pizarraOff=true;var modoPizarra=false;var herramientaPizarra=0;function toggleModoPizarra(){modoPizarra=!modoPizarra;conmutarEstadoBoton("boton_modo_pizarra",!modoPizarra);var cambiarZoom=!($.browser.msie&&parseInt($.browser.version,10)<9)&&false;if(modoPizarra){$(".titulo_pagina_curso, #paginador").hide();$(document.body).css("font-size","125%");$(".texto_curso,.circulo_gris,.true_false,.ejercicio,.clasificar_lista,.clasificar_conjuntos,.relacion,.relacionreducida,.ordenar,.slide_main,.boton_rojo,.quedan,.drag").addClass("modo_pizarra");$(".libro3, .curso, .contenidos_curso").removeClass("modo_ordenador").addClass("modo_pizarra");$(".contenidos_curso").css("background-position","0 40px");$("#menubar").hide()}else{$("#menubar").show();$(".titulo_pagina_curso, #paginador").show();$(document.body).css("font-size","100%");$(".texto_curso,.circulo_gris,.true_false,.ejercicio,.clasificar_lista,.clasificar_conjuntos,.relacion,.relacionreducida,.ordenar,.slide_main,.boton_rojo,.quedan,.drag").removeClass("modo_pizarra");$(".libro3, .curso, .contenidos_curso").removeClass("modo_pizarra").addClass("modo_ordenador");$(".contenidos_curso").css("background-position","0 0")}if(modoContinuo)posicionarMenuLateral(false);$(".contenidos_curso").each(function(){$(this).find("canvas").attr("height",$(this).height())});if(window.activeSlide){var objSlide=eval("t"+window.secuencia[activeSlide]+"_slide");if(objSlide)objSlide.onShow()}}var miniaturasInfantil=false;function mostrarMiniaturasInfantil(){conmutarEstadoBoton("boton_miniaturas_infantil",miniaturasInfantil);miniaturasInfantil=miniaturasInfantil?false:true;if(!$(".miniaturas").is(":visible")){$(".miniaturas").fadeIn()}else{$(".miniaturas").fadeOut()}if(miniaturasInfantil){hideLupa();if(!pizarraOff)setPizarraOff(false);if(modoContinuo)conmutarModoContinuo()}}function puedeUsarHerramienta(e,t){if(t==0)return true;if($.browser.msie&&parseInt($.browser.version,10)<9){setPizarraOff(e);_showAlert(textweb("javascript_switchpizarra"));return false}return true}function selectPizarraColor(e,t){blink.theme.selectPizarraColor(e,t)}function setPizarraOn(e,t){blink.theme.setPizarraOn(e,t)}function setPizarraOff(e){blink.theme.setPizarraOff(e)}function switchPizarra(e){if(!e)e=1;if($.browser.msie&&parseInt($.browser.version,10)<9){setPizarraOff(true);_showAlert(textweb("javascript_switchpizarra"));return}pizarraOff||e!=herramientaPizarra?setPizarraOn(true,e):setPizarraOff(true);return false}function estrella(e,t){$("[id^=estrella_"+e+"]").removeClass("on").addClass("off");$("[id^=estrella_"+e+"]:lt("+t+")").addClass("on")}function estrella0(e){$("[id^=estrella_"+e+"]").removeClass("on").addClass("off");$("[id^=estrella_"+e+"_t]").html("")}var colorSelected="#000000";function _setSelectedColor(e){colorSelected=e;hidePopupColores()}var idbuttonPopupColores="";var toolbarFixed=false;function showPopupColores(e){blink.theme.showPopupColores(e)}function hidePopupColores(){$(".popup_colores").fadeOut("fast")}function positionPopupColores(){if($(".popup_colores:visible").size()==0)return;var e=$("#"+idbuttonPopupColores).offset();if(e!=null)$(".popup_colores").css({top:e.top+(esWeb?20:0)-(toolbarFixed?$(window).scrollTop():0),left:e.left-$(".popup_colores").width()+(esWeb?84:0)}).fadeIn("slow");if(esWeb)$(".popup_colores").addClass("up")}function setSelectedColorInfantil(e,t){colorSelected=e;$('li[id^="color"] div').removeClass("on");$("li#color"+t+" div").addClass("on");setPizarraOn(false,herramientaPizarra)}function generaPanelColores(e){return blink.theme.generaPanelColores(e)}var gometSelected;var zIndexGomet=200;function setSelectedGomet(e){var t=$(e),i=t.position();if(!t.hasClass("gometusado")){t.clone().appendTo(t.parent()).blinkDraggable();t.addClass("gometusado").attr("inix",i.left).attr("iniy",i.top)}t.css("z-index",zIndexGomet);zIndexGomet++;return false}function generaPanelGomets(e){return blink.theme.generaPanelGomets(e)}$(document).ready(function(){if(blink.isWinRTApp){window.confirm=function(){return true}}});$(document).ready(function(){try{blink.utils.attachImageEvents();if(blink.isWinRTApp)$("#footer").hide();var e=0;$("#ul_botonera li").each(function(){e+=parseInt($(this).css("width"))+12});$("#div_botonera").css("width",e);$(".link_solapa").each(function(){var e=$(this);if(this.offsetWidth<this.scrollWidth&&!e.attr("title")){e.attr("title",e.text())}});$(document).mousemove(function(e){window.mouseXPos=e.pageX;window.mouseYPos=e.pageY});if(typeof TEXTWEB_DEBUG!="undefined"&&TEXTWEB_DEBUG){for(k in text_web)text_web[k]="["+k+"]"+textweb(k)}if(typeof modoVisualizacion!="undefined")setModoVisualizacion(modoVisualizacion);if(typeof access_type_blocked!="undefined"&&access_type_blocked)setModoBlocked();if(typeof ask_credit!="undefined"&&ask_credit)askCredit();if(typeof esPopup!="undefined"&&esPopup)$(".no_popup").remove();if(typeof esPopup=="undefined"||!esPopup)$(".only_popup").remove();if(canUseOfflineUrls()||window.offline&&blink.appVersion<4){$(document).on("submit","form",function(){var e=canUseOfflineUrls();if(!e){var t=$(this).attr("method");e=t&&t.toLowerCase()=="post"}if(e){mostrarAvisoOffline();return false}})}if(typeof loadpagewithajax!="undefined"&&loadpagewithajax){$("a").each(function(){var e=$(this).attr("href");if(e.startsWith("/")||e.startsWith("."))$(this).attr("href","javascript:redireccionar('"+e+"');")})}$("a.disabled_link").remove();prepararCamposTexto();desactivarVinculosAccessControl();$(".submit_on_return").keypress(function(e){if(e.keyCode=="13")$(this).parents("form").get(0).submit()});$("#buscador").keypress(function(e){if(e.keyCode=="13")goBusqueda(this.id)});blink.theme&&blink.theme.attachFiltersEvents&&blink.theme.attachFiltersEvents();if(blink.browserNotSupported&&getCookie("invbrowser")!="1"){showMsgBox("","/LMS/msgbox.php?op=invalidbrowser",msgBoxWidth,null,false);setCookie("invbrowser","1",1)}enableFloatingObjects();if(blink.isAndroid){blink.initAndroid()}else if(blink.isAndroidApp){initAndroidApp()}else{blink.initPC()}var t=blink.getReqParam(location.href,"errCode");if(t!="")printError(textweb("error_"+t))}catch(e){blink.log.error(e);_showAlert(e)}if(blink.getReqParam(location.href,"puppeteer")=="true"&&blink.theme.isAdaptative()){$("body").addClass("puppeteer")}if(blink.getReqParam(location.href,"printServer")=="true"&&blink.theme.isAdaptative()){$("body").addClass("print-mode");var i=[];$(".js-slider-item").each(function(){var e=parseInt($(this).attr("id").substr(12,$(this).attr("id").length));i[e]=$(this)});i.unshift(i.pop());i.reverse().map(function(e){e.prependTo("#actividad .content")});$(".spinner").css("display","none");$(document.body).css("overflow","auto");$(".select-wrap").addClass("solucion");generarContenidoPrintMode(i.length);$("body.print-mode .layout-panel").width("45%");var n=[];var n=$("body.print-mode .layout-panel.left");n.map(function(e,t){var i=$(this).attr("id").substr(1,$(this).attr("id").length-5);if($("#t"+i+"right").hasClass("hidden")){$("#t"+i+"left").css("width","100%")}});for(var a=0;a<=i.length;a++){var r;if(window["t"+a+"_preguntas"]!==undefined){r=window["t"+a+"_preguntas"];$.map(r,function(e,t){var i=diferenciarTipoSlide(a);$(i[0]).append($('<li id="t'+a+"v"+t+'"\t\t\t\t\t\t\t class="'+i[1]+'">\t\t\t\t\t\t\t<p>\t\t\t\t\t\t\t\t<span class="texto">'+e+"</span>\t\t\t\t\t\t\t</p>\t\t\t\t\t\t</li>"))})}if(window["Datat"+a]!==undefined){var o=window["t"+a+"_slide"];o.data=window["Datat"+a];o.clues=window["Cluest"+a];var s=o.getPuzzleData();$("#t"+a+"-puzzle-wrapper").crossword(s,"t"+a,o)}}for(var l=0;l<i.length-1;l++){try{var c=window["t"+l+"_slide"];c.evalNumElements();c.firstElementIndex=c.useExamples?1:0;c.showSolution()}catch(e){}}}});$(window).resize(function(){if($("#background:visible").length)resizeMask();setTimeout(function(){$(".swipeview-active .js-rich-group").each(function(){calculateDimTextareas($(this))})},100)});function calculateDimTextareas(e){if($(e).find(".textarea-answer textarea").length>0){var t=$(e).find(".textarea-answer textarea");var i=t.parent().siblings(".preview.js-richeditor");t.css("height","");var n=parseInt(t.css("line-height")),a=false,r=t.get(0).scrollHeight+2;if(t.attr("rows")!=undefined){a=parseInt(t.attr("rows"))*n+2}var o=a&&a>=r?a:r;t.css({"min-height":a?a:"",height:o});i.css({"min-height":a?a:""})}}$(function(){$.fn.tooltip&&$(".temas").tooltip({selector:"[data-original-title]",container:"body"});if($.fn.tooltip&&!blink.hasTouch){$(".toolbar").tooltip({selector:"[data-original-title]",placement:"bottom"})}});function diferenciarTipoSlide(e){var t=[];if($("#t"+e+"_lista").length){t=["#t"+e+"_lista","js-rank-item"]}else if($("#t"+e+"_lista_conceptos")){t=["#t"+e+"_lista_conceptos","classify-item"]}return t}function generarContenidoPrintMode(){}